"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[361],{8361:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(6768),l=t(4232);const s={class:"calendar-app"},r={class:"calendar-workarea"},d={key:0,class:"col-10"},i={key:0,class:"calendar-mainmenuarea-info col-11"},u={key:1,class:"calendar-mainmenuarea-info col-11"},o={key:2,class:"calendar-mainmenuarea-info col-11"},c={class:"calendar-table-tcell-header current-day d-flex justify-content-center align-items-center"},h={class:"calendar-table-tcell-content border p-1"},y={class:"planelem d-flex justify-content-center align-items-center"},g={class:"planelem-timearea"},p={class:"planelem-titlearea"},D={class:"calendar-table-month"},m={colspan:"7"},L={class:"calendar-table-monthheader"},b={class:"calendar-table-th"},k={class:"calendar-table-th"},v={class:"calendar-table-th"},M={class:"calendar-table-th"},w={class:"calendar-table-th"},_={class:"calendar-table-th"},f={class:"calendar-table-th"},S={class:"calendar-table-tcell-content"};function C(e,a){return(0,n.uX)(),(0,n.CE)("div",s,[a[5]||(a[5]=(0,n.Lk)("div",{class:"calendar-top-panel"},null,-1)),(0,n.Lk)("div",r,[(0,n.Lk)("div",{class:"calendar-mainmenuarea",style:(0,l.Tr)(e.FullMenuMode?"width: 300px;":"")},[(0,n.Lk)("button",{class:"calendar-btn-chngmenu btn row",onClick:a[0]||(a[0]=a=>e.Chng_fullMenuMode())},[a[1]||(a[1]=(0,n.Lk)("i",{class:"bi bi-list col-1"},null,-1)),e.FullMenuMode?((0,n.uX)(),(0,n.CE)("span",d,"Мой календарь")):(0,n.Q3)("",!0)]),e.FullMenuMode?((0,n.uX)(),(0,n.CE)("div",i,[a[2]||(a[2]=(0,n.Lk)("span",null,"Текущая дата: ",-1)),(0,n.Lk)("i",null,(0,l.v_)(e.Get_formatingDate(e.Get_currentDate())),1)])):(0,n.Q3)("",!0),e.FullMenuMode?((0,n.uX)(),(0,n.CE)("div",u,[...a[3]||(a[3]=[(0,n.Lk)("span",null,"Текущее время: ",-1),(0,n.Lk)("i",null,"??:??",-1)])])):(0,n.Q3)("",!0),e.FullMenuMode?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",c,(0,l.v_)(e.display_selectedDate()+" ("+e.Get_weekDay(e.SelectedDate)+")"),1),(0,n.Lk)("div",h,[a[4]||(a[4]=(0,n.eW)(" Запланировано на день: ",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.SelectedDate_plan,e=>((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",g,(0,l.v_)(e.time||"Весь день"),1),(0,n.Lk)("div",p,(0,l.v_)(e.title||"- -"),1)]))),256))])])):(0,n.Q3)("",!0)],4),(0,n.Lk)("div",{class:"calendar-tablearea",style:(0,l.Tr)(e.FullMenuMode?"":"width: calc(100% - 70px);")},[(0,n.Lk)("div",D,[(0,n.Lk)("table",null,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",m,[(0,n.Lk)("span",L,(0,l.v_)(e.Get_monthStr(e.SelectedDate)),1)])]),(0,n.Lk)("tr",null,[(0,n.Lk)("th",b,(0,l.v_)(e.LangData("mon")),1),(0,n.Lk)("th",k,(0,l.v_)(e.LangData("tue")),1),(0,n.Lk)("th",v,(0,l.v_)(e.LangData("wed")),1),(0,n.Lk)("th",M,(0,l.v_)(e.LangData("thu")),1),(0,n.Lk)("th",w,(0,l.v_)(e.LangData("fri")),1),(0,n.Lk)("th",_,(0,l.v_)(e.LangData("sat")),1),(0,n.Lk)("th",f,(0,l.v_)(e.LangData("sun")),1)])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.calendarWeeks,e=>((0,n.uX)(),(0,n.CE)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.days,e=>((0,n.uX)(),(0,n.CE)("td",null,[(0,n.Lk)("div",{class:(0,l.C4)(["calendar-table-tcell",{"current-day-block":e.isCurrentDay}])},[(0,n.Lk)("div",{class:(0,l.C4)(["calendar-table-tcell-header d-flex justify-content-center align-items-center",{"current-day":e.isCurrentDay,"selected-day":e.isSelectedDay,"other-month":!e.isCurrentMonth}])}," - "+(0,l.v_)(e.dayOfMonth)+" - ",3),(0,n.Lk)("div",S,(0,l.v_)(e.isCurrentMonth)+" "+(0,l.v_)(e.isCurrentDay),1)],2)]))),256))]))),256))])])])],4)]),a[6]||(a[6]=(0,n.Lk)("div",{class:"calendar-bottom-panel d-flex justify-content-center align-items-center"},null,-1))])}t(4114);var I=t(8027),F=t(5619);const T={en:{mycalendar:"My calendar",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun",sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Thursday",saturday:"Saturday",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},ru:{mycalendar:"Мой календарь",mon:"Пн",tue:"Вт",wed:"Ср",thu:"Чт",fri:"Пт",sat:"Сб",sun:"Вс",sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота",january:"Январь",february:"Февраль",march:"Март",april:"Апрель",may:"Май",june:"Июнь",july:"Июль",august:"Август",september:"Сентябрь",october:"Октябрь",november:"Ноябрь",december:"Декабрь"}};var E=t(2261),j={name:"OSICalendar",props:{windowId:{type:String,required:!0},USERID:{type:Number,default:0},selectedYear:{type:Number,default:null},selectedMonth:{type:Number,default:null},selectedDay:{type:Number,default:null}},data(){return{lang_data:{},FullMenuMode:!0,MonthsDay:{},Today:new Date,SelectedDate:new Date,SelectedDate_plan:[{},{}],USER:null}},computed:{...(0,E.n2)(F.useAppsStore),display_year(){return null!==this.selectedYear?this.selectedYear:this.Today.getFullYear()},display_month(){return null!==this.selectedMonth?this.selectedMonth:this.Today.getMonth()+1},display_day(){return null!==this.selectedDay?this.selectedDay:this.Today.getDate()},calendarWeeks(){const e=[],a=new Date(this.display_year,this.display_month-1,1),t=new Date(a),n=a.getDay(),l=0===n?6:n-1;t.setDate(t.getDate()-l);let s=new Date(t),r=0;for(let d=0;d<6;d++){const a=[];for(let e=0;e<7;e++){const e=new Date(s),t=e.getDate(),n=e.getMonth()+1===this.display_month,l=n&&t===this.display_day&&e.getFullYear()===this.display_year,r=null!==this.selectedDay&&n&&t===this.selectedDay&&e.getFullYear()===this.display_year();a.push({date:e,dateString:e.toISOString().split("T")[0],dayOfMonth:t,isCurrentMonth:n,isCurrentDay:l,isSelectedDay:r,month:e.getMonth(),year:e.getFullYear()}),s.setDate(s.getDate()+1)}const t=a.some(e=>e.isCurrentMonth),n=0===d;(t||n||d<5&&new Date(s).getMonth()!==this.displayMonth)&&e.push({weekNumber:r++,days:a})}return e},selectedDate(){const e=this.SelectedDate;return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()}},methods:{async findUser(){try{this.USER=await I.Vy.getbyId(this.USERID)}catch(e){console.error("Ошибка поиска пользователя:",e),this.$toast.error("Не удалось загрузить данные пользователя")}},display_selectedDate(){return this.display_day+"-"+this.display_month+"-"+this.display_year},Get_currentDate(){return new Date},Get_monthStr(e){let a=[this.LangData("january"),this.LangData("february"),this.LangData("march"),this.LangData("april"),this.LangData("may"),this.LangData("june"),this.LangData("july"),this.LangData("august"),this.LangData("september"),this.LangData("october"),this.LangData("november"),this.LangData("december")];return a[e.getMonth()]},Get_weekDay(e){let a=[this.LangData("sunday"),this.LangData("monday"),this.LangData("tuesday"),this.LangData("wednesday"),this.LangData("thursday"),this.LangData("friday"),this.LangData("saturday")];return a[e.getDay()]},Get_formatingDate(e){return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},LangData(e){return this.lang_data[e]||""},initFromStore(){if(!this.windowId||!this.appsStore)return void console.error("OSICalendar: windowId or appsStore is missing");const e=this.appsStore.getWindowState(this.windowId);console.log("OSICalendar loaded state:",e),e&&"calendar"===e.appType&&(this.expression=e.expression||"",this.result=e.result||"0",this.history=e.history||[],this.lastResult=e.lastResult||null),this.isInitialized=!0,console.log("OSICalendar initialized")},saveState(){if(!this.windowId||!this.appsStore||!this.isInitialized)return;const e={appType:"calendar",timestamp:Date.now()};console.log("OSICalculator saving state:",e),this.appsStore.saveWindowState(this.windowId,e)},Chng_fullMenuMode(){this.FullMenuMode=!this.FullMenuMode}},mounted(){console.log("OSICalendar app mounted with windowId:",this.windowId),this.findUser(),this.$nextTick(()=>{this.initFromStore()});const e=navigator.language||navigator.userLanguage,a=e.split("-")[0];this.UserLang=a;const t=T;this.lang_data=a&&t&&t[a]?t[a]:t.en,setTimeout(()=>{this.saveState()},100)}},X=t(1241);const O=(0,X.A)(j,[["render",C]]);var x=O}}]);
//# sourceMappingURL=361.bd109c5b.js.map