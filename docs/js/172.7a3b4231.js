"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[172],{5172:function(e,a,t){t.r(a),t.d(a,{default:function(){return W}});var n=t(6768),l=t(4232);const s={class:"calendar-app"},r={class:"calendar-top-panel d-flex justify-content-center align-items-center"},d={class:"calendar-area-work"},i={class:"calendar-area-table"},u={class:"calendar-area-table-head"},c={class:"calendar-area-table-tab"},o={class:"calendar-mtable"},h={class:"calendar-mtable-wday"},g={class:"calendar-mtable-wday"},y={class:"calendar-mtable-wday"},L={class:"calendar-mtable-wday"},D={class:"calendar-mtable-wday"},m={class:"calendar-mtable-wday"},b={class:"calendar-mtable-wday"},k={key:0,style:{height:"1px",margin:"3px 4px 0 0",color:"rgba(75, 75, 240, 0.829)",transform:"rotate(-10deg)","text-align":"right"}},v={class:"calendar-area-info"},p={class:"calendar-area-info-sdate"},w={class:"calendar-sdate-table"},f={style:{width:"140px"}},S={class:"calendar-sdate-table-list selected-date-border"},_={class:"header selected-date-hbg"},M={class:"calendar-sdate-table-info"};function C(e,a){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",r," Текущее время: "+(0,l.v_)(e.currentTime)+" "+(0,l.v_)(e.currentDateStr),1),(0,n.Lk)("div",d,[(0,n.Lk)("div",i,[(0,n.Lk)("div",u,[(0,n.Lk)("span",null,(0,l.v_)(e.Get_monthStr(e.selectDate.getMonth()))+" "+(0,l.v_)(e.selectDate.getFullYear()),1)]),(0,n.Lk)("div",c,[(0,n.Lk)("table",o,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,[(0,n.Lk)("div",h,(0,l.v_)(e.LangData("mon")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",g,(0,l.v_)(e.LangData("tue")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",y,(0,l.v_)(e.LangData("wed")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",L,(0,l.v_)(e.LangData("thu")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",D,(0,l.v_)(e.LangData("fri")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",m,(0,l.v_)(e.LangData("sat")),1)]),(0,n.Lk)("th",null,[(0,n.Lk)("div",b,(0,l.v_)(e.LangData("sun")),1)])])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.calendarWeeks(),e=>((0,n.uX)(),(0,n.CE)("tr",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.days,e=>((0,n.uX)(),(0,n.CE)("td",null,[(0,n.Lk)("div",{class:(0,l.C4)(["calendar-mtable-day",e.SelectedDay?"selected-date-border":"",e.CurrentMonth?"":"opacity-6"])},[(0,n.Lk)("div",{class:(0,l.C4)(["calendar-mtable-day-header",e.SelectedDay?"selected-date-hbg":""])},(0,l.v_)(e.dateString),3),a[1]||(a[1]=(0,n.Lk)("span",null,[(0,n.Lk)("i",{class:"bi bi-calendar2-week-fill"}),(0,n.eW)(" : ")],-1)),a[2]||(a[2]=(0,n.Lk)("span",null,[(0,n.Lk)("i",{class:"bi bi-exclamation-circle-fill"}),(0,n.eW)(" : ")],-1)),e.CurrentDay?((0,n.uX)(),(0,n.CE)("span",k,[...a[0]||(a[0]=[(0,n.Lk)("i",null,"Сегодня!",-1)])])):(0,n.Q3)("",!0)],2)]))),256))]))),256))])])])]),(0,n.Lk)("div",v,[a[8]||(a[8]=(0,n.Lk)("div",{class:"calendar-area-table-head"},"Выбранная дата:",-1)),(0,n.Lk)("div",p,[(0,n.Lk)("table",w,[(0,n.Lk)("tbody",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",f,[(0,n.Lk)("div",S,[(0,n.Lk)("div",_,[a[3]||(a[3]=(0,n.Lk)("div",{class:"d-flex justify-content-around align-items-center"},[(0,n.Lk)("i",{class:"odiv"}),(0,n.Lk)("i",{class:"odiv"})],-1)),(0,n.Lk)("span",null,(0,l.v_)(e.selectDate.toLocaleDateString()),1)]),(0,n.eW)(" "+(0,l.v_)(e.Get_wdayStr(e.selectDate.getDay()))+" ",1),a[4]||(a[4]=(0,n.Lk)("br",null,null,-1)),a[5]||(a[5]=(0,n.Lk)("div",{style:{margin:"30px 5px 0 0",color:"rgba(75, 75, 240, 0.829)",transform:"rotate(-10deg)","text-align":"right"}},[(0,n.Lk)("i",null,"Сегодня!")],-1))])]),(0,n.Lk)("td",null,[(0,n.Lk)("div",M,[(0,n.Lk)("div",null,[a[6]||(a[6]=(0,n.Lk)("i",{class:"bi bi-calendar2-week-fill"},null,-1)),(0,n.eW)(" События: "+(0,l.v_)(e.selectDate_Events.length),1)]),(0,n.Lk)("div",null,[a[7]||(a[7]=(0,n.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,n.eW)(" Напоминания: "+(0,l.v_)(e.selectDate_Reminders.length),1)])])])])])])])])]),a[9]||(a[9]=(0,n.Lk)("div",{class:"calendar-bottom-panel d-flex justify-content-center align-items-center"},null,-1))])}t(4114);const I={en:{mycalendar:"My calendar",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun",sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Thursday",saturday:"Saturday",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},ru:{mycalendar:"Мой календарь",mon:"Пн",tue:"Вт",wed:"Ср",thu:"Чт",fri:"Пт",sat:"Сб",sun:"Вс",sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота",january:"Январь",february:"Февраль",march:"Март",april:"Апрель",may:"Май",june:"Июнь",july:"Июль",august:"Август",september:"Сентябрь",october:"Октябрь",november:"Ноябрь",december:"Декабрь"}};var T=t(2261),x=t(5619),Y=t(8027),j={name:"OSICalendar",props:{windowId:{type:String,required:!0},USERID:{type:Number,default:0},selectedYear:{type:Number,default:null},selectedMonth:{type:Number,default:null},selectedDay:{type:Number,default:null}},data(){return{USER:null,lang_data:{},timer:null,currentDate:new Date,currentDateStr:null,currentTime:null,selectDate:new Date,selectDate_Events:[],selectDate_Reminders:[]}},computed:{...(0,T.n2)(x.useAppsStore),selectYear(){const e=this.selectDate;return e.getYear()}},methods:{async reloadTime(){this.updateTime(),this.timer=setInterval(this.updateTime,1e3)},updateTime(){const e=new Date;this.currentDate=e,this.currentDateStr=e.toLocaleDateString(),this.currentTime=e.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})},async findUser(){try{this.USER=await Y.Vy.getbyId(this.USERID)}catch(e){console.error("Ошибка поиска пользователя:",e),this.$toast.error("Не удалось загрузить данные пользователя")}},saveState(){if(!this.windowId||!this.appsStore||!this.isInitialized)return;const e={appType:"calendar",timestamp:Date.now()};console.log("OSICalculator saving state:",e),this.appsStore.saveWindowState(this.windowId,e)},LangData(e){return this.lang_data[e]||""},Get_monthStr(e){let a=[this.LangData("january"),this.LangData("february"),this.LangData("march"),this.LangData("april"),this.LangData("may"),this.LangData("june"),this.LangData("july"),this.LangData("august"),this.LangData("september"),this.LangData("october"),this.LangData("november"),this.LangData("december")];return a[e]},Get_wdayStr(e){let a=[this.LangData("sunday"),this.LangData("monday"),this.LangData("tuesday"),this.LangData("wednesday"),this.LangData("thursday"),this.LangData("friday"),this.LangData("saturday")];return a[e]},calendarWeeks(){const e=[],a=new Date(this.selectDate.getFullYear(),this.selectDate.getMonth(),1);let t=this.selectDate;t=new Date(t.getFullYear(),t.getMonth(),t.getDate());const n=this.currentDate.getMonth(),l=this.currentDate.getDate(),s=this.currentDate.getFullYear(),r=new Date(a),d=a.getDay(),i=0===d?6:d-1;r.setDate(r.getDate()-i);let u=new Date(r),c=0;for(let o=0;o<6;o++){const a=[];for(let e=0;e<7;e++){const e=new Date(u),r=e.getDate(),d=e.getFullYear()===s,i=e.getMonth()===n,c=i&&r===l&&e.getFullYear()===s,o=e.toLocaleDateString()===t.toLocaleDateString();a.push({date:e,dateString:e.toLocaleDateString(),dayOfMonth:r,CurrentYear:d,CurrentMonth:i,CurrentDay:c,SelectedDay:o,month:e.getMonth(),year:e.getFullYear()}),u.setDate(u.getDate()+1)}const r=a.some(e=>e.isCurrentMonth),d=0===o;(r||d||o<5&&new Date(u).getMonth()!==this.currentDate.getMonth()+2)&&e.push({weekNumber:c++,days:a})}return e}},mounted(){console.log("OSICalendar app mounted with windowId:",this.windowId);const e=this.selectedYear&&this.selectedMonth&&this.selectedDay?new Date(this.selectedYear,this.selectedMonth,this.selectedDay):this.currentDate;this.selectDate=e;const a=navigator.language||navigator.userLanguage,t=a.split("-")[0];this.UserLang=t;const n=I;this.lang_data=t&&n&&n[t]?n[t]:n.en,setTimeout(()=>{this.saveState()},100),this.reloadTime()},beforeUnmount(){this.timer&&clearInterval(this.timer)}},E=t(1241);const F=(0,E.A)(j,[["render",C]]);var W=F}}]);
//# sourceMappingURL=172.7a3b4231.js.map