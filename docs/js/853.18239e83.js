"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[853],{1853:function(r,t,i){i.r(t),i.d(t,{default:function(){return f}});var e=i(6768);const n={class:"browser-app"},o={class:"iframe-wrapper"},s=["src"],a={key:0,class:"loading-indicator"},c={key:1,class:"error-message"};function h(r,t){return(0,e.uX)(),(0,e.CE)("div",n,[(0,e.Lk)("div",o,[((0,e.uX)(),(0,e.CE)("iframe",{ref:"iframeRef",src:r.iframeSrc,onLoad:t[0]||(t[0]=(...t)=>r.onIframeLoad&&r.onIframeLoad(...t)),onError:t[1]||(t[1]=(...t)=>r.onIframeError&&r.onIframeError(...t)),sandbox:"allow-scripts allow-same-origin allow-forms allow-popups",referrerpolicy:"no-referrer",key:r.iframeKey},null,40,s))]),r.loading?((0,e.uX)(),(0,e.CE)("div",a,[...t[3]||(t[3]=[(0,e.Lk)("div",{class:"spinner"},null,-1),(0,e.Lk)("span",null,"Загрузка...",-1)])])):(0,e.Q3)("",!0),r.error?((0,e.uX)(),(0,e.CE)("div",c,[t[4]||(t[4]=(0,e.Lk)("p",null,"⚠️ Не удалось загрузить страницу",-1)),(0,e.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>r.reload&&r.reload(...t))},"Повторить")])):(0,e.Q3)("",!0)])}i(4114),i(4603),i(7566),i(8721);var l={name:"AppWiki",data(){return{currentUrl:"https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0",iframeSrc:"https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0",loading:!1,error:!1,history:[this.initialUrl],currentHistoryIndex:0,iframeKey:0}},computed:{canGoBack(){return this.currentHistoryIndex>0},canGoForward(){return this.currentHistoryIndex<this.history.length-1}},methods:{navigate(){let r=this.currentUrl.trim();r.startsWith("http://")||r.startsWith("https://")||(r="https://"+r);try{new URL(r),this.iframeSrc=r,this.loading=!0,this.error=!1,r!==this.history[this.currentHistoryIndex]&&(this.history=this.history.slice(0,this.currentHistoryIndex+1),this.history.push(r),this.currentHistoryIndex=this.history.length-1),this.iframeKey++}catch(t){console.error("Invalid URL:",r),this.error=!0}},goBack(){this.canGoBack&&(this.currentHistoryIndex--,this.currentUrl=this.history[this.currentHistoryIndex],this.iframeSrc=this.currentUrl,this.loading=!0,this.iframeKey++)},goForward(){this.canGoForward&&(this.currentHistoryIndex++,this.currentUrl=this.history[this.currentHistoryIndex],this.iframeSrc=this.currentUrl,this.loading=!0,this.iframeKey++)},reload(){this.loading=!0,this.error=!1,this.iframeKey++},onIframeLoad(){this.loading=!1,this.error=!1,this.safeGetTitle()},onIframeError(){this.loading=!1,this.error=!0},safeGetTitle(){try{const r=this.$refs.iframeRef;if(r&&r.contentDocument){const t=r.contentDocument.title;t&&console.log("Page title:",t)}}catch(r){console.log("Cannot access iframe content due to CORS")}},openInNewTab(){window.open(this.currentUrl,"_blank","noopener,noreferrer")},safeNavigate(r){try{const t=this.$refs.iframeRef;t&&t.contentWindow&&this.isSameOrigin(t.contentWindow.location.href)&&(t.contentWindow.location.href=r)}catch(t){this.currentUrl=r,this.navigate()}},isSameOrigin(r){try{const t=window.location.origin,i=new URL(r).origin;return t===i}catch{return!1}}},mounted(){this.loading=!0}},d=i(1241);const u=(0,d.A)(l,[["render",h],["__scopeId","data-v-35773a73"]]);var f=u}}]);
//# sourceMappingURL=853.18239e83.js.map