"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[320],{4320:function(e,s,t){t.r(s),t.d(s,{default:function(){return V}});var n=t(6768),l=t(5130),a=t(4232);const i={class:"appmanager-app"},o={class:"row"},c={class:"search-area"},r={key:0,class:"warning-text-area"},p={key:1},h={key:2,class:"appslist-area"},d={class:"row"},u={class:"appslist-elem-info"},k={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center",title:"Отображать на рабочем столе."},y=["id","onUpdate:modelValue","checked","onChange"],w={class:"appslist-elem-showStart d-flex justify-content-center align-items-center",title:"Отображать в меню запуска."},m=["id","checked","onUpdate:modelValue","onChange"],g={class:"appslist-elem-category"},C={key:3,class:"appslist-area"},f={key:0},L={class:"row"},S={class:"appslist-elem-info"},v={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center"},I=["id","onUpdate:modelValue","checked","onChange"],b={class:"appslist-elem-showStart d-flex justify-content-center align-items-center"},E=["id","checked","onUpdate:modelValue","onChange"],U={class:"appslist-elem-category"},x={key:1,class:"no-results"};function D(e,s){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",o,[(0,n.Lk)("div",c,[s[1]||(s[1]=(0,n.Lk)("label",{for:"search_input"},"Поиск:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"search_input",type:"text","onUpdate:modelValue":s[0]||(s[0]=s=>e.searchInputTxt=s)},null,512),[[l.Jo,e.searchInputTxt]])]),e.isNeedReload?((0,n.uX)(),(0,n.CE)("div",r,[...s[2]||(s[2]=[(0,n.Lk)("h3",null,"Для того, чтобы изменения вступили в силу, необходимо перезагрузить систему.",-1)])])):((0,n.uX)(),(0,n.CE)("div",p)),0===e.searchInputTxt.length?((0,n.uX)(),(0,n.CE)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Object.keys(e.sortedAppsByCategory),t=>((0,n.uX)(),(0,n.CE)("div",{key:t},[(0,n.Lk)("h3",null,(0,a.v_)(t),1),(0,n.Lk)("div",d,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sortedAppsByCategory[t],t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,a.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",t.iconclass||""]),style:(0,a.Tr)(t.iconclass?"color: white":"")},null,6),(0,n.Lk)("div",u,[(0,n.Lk)("div",k,[s[3]||(s[3]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:t.id+"_showOnDesktop","onUpdate:modelValue":e=>t.showOnDesktop=e,checked:t.showOnDesktop,onChange:s=>e.Chng_showOnDesktop(t)},null,40,y),[[l.lH,t.showOnDesktop]])]),(0,n.Lk)("div",w,[s[4]||(s[4]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:t.id+"_showInStartMenu",checked:t.showInStartMenu,"onUpdate:modelValue":e=>t.showInStartMenu=e,onChange:s=>e.Chng_showInStartMenu(t)},null,40,m),[[l.lH,t.showInStartMenu]])]),(0,n.Lk)("i",g,(0,a.v_)(t.category),1),(0,n.Lk)("h3",null,(0,a.v_)(t.label),1),(0,n.Lk)("i",null,(0,a.v_)(t.description),1)])]))),128))])]))),128))])):((0,n.uX)(),(0,n.CE)("div",C,[e.hasSearchResults?((0,n.uX)(),(0,n.CE)("div",f,[s[7]||(s[7]=(0,n.Lk)("h3",null,"Результаты поиска",-1)),(0,n.Lk)("div",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.filteredApps,t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,a.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",t.iconclass||""]),style:(0,a.Tr)(t.iconclass?"color: white":"")},null,6),(0,n.Lk)("div",S,[(0,n.Lk)("div",v,[s[5]||(s[5]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:t.id+"_showOnDesktop","onUpdate:modelValue":e=>t.showOnDesktop=e,checked:t.showOnDesktop,onChange:s=>e.Chng_showOnDesktop(t)},null,40,I),[[l.lH,t.showOnDesktop]])]),(0,n.Lk)("div",b,[s[6]||(s[6]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:t.id+"_showInStartMenu",checked:t.showInStartMenu,"onUpdate:modelValue":e=>t.showInStartMenu=e,onChange:s=>e.Chng_showInStartMenu(t)},null,40,E),[[l.lH,t.showInStartMenu]])]),(0,n.Lk)("i",U,(0,a.v_)(t.category),1),(0,n.Lk)("h3",null,(0,a.v_)(t.label),1),(0,n.Lk)("i",null,(0,a.v_)(t.description),1)])]))),128))])])):((0,n.uX)(),(0,n.CE)("div",x,'Ничего не найдено по запросу "'+(0,a.v_)(e.searchInputTxt)+'"',1))]))])])}t(4114),t(8111),t(2489),t(7588);var _=t(8047),A=t(8027),R={name:"OSIAppManager",props:{windowId:{type:String,required:!0},USERID:{type:Number,default:0}},inject:["reloadDesk"],data(){return{appsList:[],searchInputTxt:"",USERApps:[],USER:null,isNeedReload:!1}},computed:{filteredApps(){if(this.searchInputTxt.trim()){const e=this.searchInputTxt.toLowerCase().trim();return this.USERApps.filter(s=>s.label.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e))}return this.USERApps},sortedAppsByCategory(){const e={};return this.USERApps.forEach(s=>{const t=s.category;e[t]||(e[t]=[]),e[t].push(s)}),Object.keys(e).forEach(s=>{e[s].sort((e,s)=>e.label.localeCompare(s.label))}),e},hasSearchResults(){return this.filteredApps.length>0},isSearching(){return this.searchInputTxt.trim().length>0}},async mounted(){const e=_.F.getAllApps(),s=await A.Vy.getApps(this.USERID);await this.findUser(),this.appsList=e,this.USERApps=s||e},methods:{async findUser(){try{this.USER=await A.Vy.getbyId(this.USERID)}catch(e){console.error("Ошибка поиска пользователя:",e),this.$toast.error("Не удалось загрузить данные пользователя")}},async Chng_showOnDesktop(e){try{const s=e.id;await A.Vy.updateAppSetting(this.USERID,s,"showOnDesktop",e.showOnDesktop),this.reloadDesk()}catch(s){console.error("Ошибка обновления данных:",s)}},async Chng_showInStartMenu(e){try{const s=e.id;await A.Vy.updateAppSetting(this.USERID,s,"showInStartMenu",e.showInStartMenu),this.isNeedReload=!0}catch(s){console.error("Ошибка обновления данных:",s)}}}},O=t(1241);const M=(0,O.A)(R,[["render",D]]);var V=M}}]);
//# sourceMappingURL=320.3b0be0c3.js.map