{"version":3,"file":"js/320.3b0be0c3.js","mappings":"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","sources":["webpack://osi/./src/apps/system/OSIAppManager/template.html","webpack://osi/./src/apps/system/OSIAppManager/OSIAppManager.vue","webpack://osi/./src/apps/system/OSIAppManager/OSIAppManager.vue?0477"],"sourcesContent":["<div class=\"appmanager-app\">\n    <div class=\"row\">\n        <div class=\"search-area\">\n            <label for=\"search_input\">Поиск:</label>\n            <input id=\"search_input\" type=\"text\" v-model=\"searchInputTxt\">\n        </div>\n        \n        <div v-if=\"isNeedReload\" class=\"warning-text-area\">\n            <h3>Для того, чтобы изменения вступили в силу, необходимо перезагрузить систему.</h3>\n        </div>\n        <div v-else></div>\n\n        <div v-if=\"searchInputTxt.length ===0\" class=\"appslist-area\">\n            <div v-for=\"cat in Object.keys(sortedAppsByCategory)\" :key=\"cat\">\n                <h3>{{cat}}</h3>\n                <div class=\"row\">\n                    <div v-for=\"app in sortedAppsByCategory[cat]\" :key=\"app.id\" class=\"appslist-elem col-4 d-flex\">\n                        <div class=\"appslist-elem-ico d-flex justify-content-center align-items-center\" :class=\"app.iconclass || ''\" :style=\"app.iconclass ? 'color: white' : ''\"></div>\n                        <div class=\"appslist-elem-info\">\n                            <div class=\"appslist-elem-showDesk d-flex justify-content-center align-items-center\" title=\"Отображать на рабочем столе.\">\n                                <i class=\"bi bi-display-fill me-1\"></i>\n                                <input type=\"checkbox\" name=\"\" :id=\"app.id + '_showOnDesktop'\" v-model=\"app.showOnDesktop\" :checked=\"app.showOnDesktop\" @change=\"Chng_showOnDesktop(app)\">\n                            </div>\n                            <div class=\"appslist-elem-showStart d-flex justify-content-center align-items-center\" title=\"Отображать в меню запуска.\">\n                                <i class=\"bi bi-house-fill me-1\"></i>\n                                <input type=\"checkbox\" name=\"\" :id=\"app.id + '_showInStartMenu'\" :checked=\"app.showInStartMenu\" v-model=\"app.showInStartMenu\" @change=\"Chng_showInStartMenu(app)\">\n                            </div>\n                            <i class=\"appslist-elem-category\">{{app.category}}</i>\n                            <h3>{{app.label}}</h3>\n                            <i>{{app.description}}</i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else class=\"appslist-area\">\n            <div v-if=\"hasSearchResults\">\n                <h3>Результаты поиска</h3>\n                <div class=\"row\">\n                    <div v-for=\"app in filteredApps\" :key=\"app.id\" class=\"appslist-elem col-4 d-flex\">\n                        <div class=\"appslist-elem-ico d-flex justify-content-center align-items-center\" :class=\"app.iconclass || ''\" :style=\"app.iconclass ? 'color: white' : ''\"></div>\n                        <div class=\"appslist-elem-info\">\n                            <div class=\"appslist-elem-showDesk d-flex justify-content-center align-items-center\">\n                                <i class=\"bi bi-display-fill me-1\"></i>\n                                <input type=\"checkbox\" name=\"\" :id=\"app.id + '_showOnDesktop'\" v-model=\"app.showOnDesktop\" :checked=\"app.showOnDesktop\" @change=\"Chng_showOnDesktop(app)\">\n                            </div>\n                            <div class=\"appslist-elem-showStart d-flex justify-content-center align-items-center\">\n                                <i class=\"bi bi-house-fill me-1\"></i>\n                                <input type=\"checkbox\" name=\"\" :id=\"app.id + '_showInStartMenu'\" :checked=\"app.showInStartMenu\" v-model=\"app.showInStartMenu\" @change=\"Chng_showInStartMenu(app)\">\n                            </div>\n                            <i class=\"appslist-elem-category\">{{app.category}}</i>\n                            <h3>{{app.label}}</h3>\n                            <i>{{app.description}}</i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-else class=\"no-results\">Ничего не найдено по запросу \"{{searchInputTxt}}\"</div>\n        </div>\n    </div>\n</div>","<template src=\"./template.html\"></template>\n<style src=\"./style.css\"></style>\n<script>\n    import { appsConfig } from '@/config/applications';\n    import { usersTable } from '@/idb/db';\n\n    export default {\n        name: 'OSIAppManager',\n\n        props: {\n            windowId: {type: String, required: true},\n            USERID: {type: Number, default: 0},\n        },\n\n        inject: [ 'reloadDesk' ],\n\n        data() {\n            return {\n                appsList: [],\n                searchInputTxt: '',\n                USERApps: [],\n                USER: null,\n                isNeedReload: false,\n            }\n        },\n\n        computed: {\n            // Отфильтрованные приложения по поисковому запросу\n            filteredApps() {\n                if (!this.searchInputTxt.trim()) {\n                    return this.USERApps;\n                } else {\n                    const query = this.searchInputTxt.toLowerCase().trim();\n\n                    return this.USERApps.filter(app => {\n                        // Ищем по label и description для лучшего поиска\n                        return app.label.toLowerCase().includes(query) || \n                            (app.description && app.description.toLowerCase().includes(query));\n                    });\n                }\n            },\n\n            // Группировка по категориям для обычного отображения\n            sortedAppsByCategory() {\n                const resultObj = {};\n                \n                this.USERApps.forEach(element => {\n                    const category = element.category;\n                    \n                    if (!resultObj[category]) { \n                        resultObj[category] = []; \n                    }\n                    resultObj[category].push(element);\n                });\n\n                // Сортировка внутри категорий по названию (label)\n                Object.keys(resultObj).forEach(key => {\n                    resultObj[key].sort((a, b) => {\n                        return a.label.localeCompare(b.label);\n                    });\n                });\n\n                return resultObj;\n            },\n\n            // Проверка есть ли результаты поиска\n            hasSearchResults() { return this.filteredApps.length > 0; },\n\n            // Есть ли поисковый запрос\n            isSearching() { return this.searchInputTxt.trim().length > 0; },\n        },\n\n        async mounted() {\n            const defAppsList = appsConfig.getAllApps();\n            const findUserApps = await usersTable.getApps(this.USERID);\n\n            await this.findUser();\n\n            this.appsList = defAppsList;\n            this.USERApps = (findUserApps) ? findUserApps : defAppsList;\n        },\n\n        methods: {\n            async findUser() {\n                try {                    \n                    this.USER = await usersTable.getbyId(this.USERID);\n                } catch (error) {\n                    console.error('Ошибка поиска пользователя:', error);\n                    this.$toast.error('Не удалось загрузить данные пользователя');\n                }\n            },\n\n            async Chng_showOnDesktop(app) {\n                try {\n                    const appId = app.id;\n\n                    await usersTable.updateAppSetting(this.USERID, appId, 'showOnDesktop', app.showOnDesktop);\n                    this.reloadDesk();\n                } catch (error) {\n                    console.error('Ошибка обновления данных:', error);\n                }\n            },\n            async Chng_showInStartMenu(app) {\n                try {\n                    const appId = app.id;\n                    \n                    await usersTable.updateAppSetting(this.USERID, appId, 'showInStartMenu', app.showInStartMenu);\n                    // TODO: пока это перезапишет в indexeddb конфиг в учетке, но не приведет к динамическому перестроению меню \"пуск\", надо подумать\n                    this.isNeedReload = true;\n                } catch (error) {\n                    console.error('Ошибка обновления данных:', error);\n                }\n            },\n        },\n    }\n</script>","import { render } from \"./template.html?vue&type=template&id=59f12ef0&external\"\nimport script from \"./OSIAppManager.vue?vue&type=script&lang=js\"\nexport * from \"./OSIAppManager.vue?vue&type=script&lang=js\"\n\nimport \"./style.css?vue&type=style&index=0&lang=css&external\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","title","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","for","id","type","_ctx","searchInputTxt","$event","isNeedReload","_hoisted_4","_cache","_hoisted_5","length","_hoisted_6","_Fragment","_renderList","Object","keys","sortedAppsByCategory","cat","key","_toDisplayString","_hoisted_7","app","_normalizeClass","iconclass","style","_normalizeStyle","_hoisted_8","_hoisted_9","name","showOnDesktop","checked","onChange","Chng_showOnDesktop","_hoisted_11","showInStartMenu","Chng_showInStartMenu","_hoisted_13","category","label","description","_hoisted_14","hasSearchResults","_hoisted_15","_hoisted_16","filteredApps","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_22","_hoisted_23","props","windowId","String","required","USERID","Number","default","inject","data","appsList","USERApps","USER","computed","this","trim","query","toLowerCase","filter","includes","resultObj","forEach","element","push","sort","a","b","localeCompare","isSearching","mounted","defAppsList","appsConfig","getAllApps","findUserApps","usersTable","getApps","findUser","methods","getbyId","error","console","$toast","appId","updateAppSetting","reloadDesk","__exports__","render"],"ignoreList":[],"sourceRoot":""}