"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[590],{8590:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var n=s(6768),i=s(5130),a=s(4232);const l={class:"appmanager-app"},o={class:"row"},c={class:"search-area"},r={key:0,class:"warning-text-area"},p={key:1},d={key:2,class:"appslist-area"},h={class:"row"},u=["onClick"],k={class:"appslist-elem-info"},w={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center",title:"Отображать на рабочем столе."},y=["id","onUpdate:modelValue","checked","onChange"],m={class:"appslist-elem-showStart d-flex justify-content-center align-items-center",title:"Отображать в меню запуска."},g=["id","checked","onUpdate:modelValue","onChange"],C={class:"appslist-elem-category"},S={key:3,class:"appslist-area"},f={key:0},I={class:"row"},L=["onClick"],v={class:"appslist-elem-info"},E={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center"},b=["id","onUpdate:modelValue","checked","onChange"],U={class:"appslist-elem-showStart d-flex justify-content-center align-items-center"},D=["id","checked","onUpdate:modelValue","onChange"],R={class:"appslist-elem-category"},x={key:1,class:"no-results"};function A(e,t){return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",o,[(0,n.Lk)("div",c,[t[2]||(t[2]=(0,n.Lk)("label",{for:"search_input"},"Поиск:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"search_input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInputTxt=t)},null,512),[[i.Jo,e.searchInputTxt]])]),e.isNeedReload?((0,n.uX)(),(0,n.CE)("div",r,[t[3]||(t[3]=(0,n.Lk)("h3",null,"Для того, чтобы изменения вступили в силу, необходимо перезагрузить систему.",-1)),(0,n.Lk)("div",{onClick:t[1]||(t[1]=t=>e.reloadPage())},"Перезагрузить")])):((0,n.uX)(),(0,n.CE)("div",p)),0===e.searchInputTxt.length?((0,n.uX)(),(0,n.CE)("div",d,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Object.keys(e.sortedAppsByCategory),s=>((0,n.uX)(),(0,n.CE)("div",{key:s},[(0,n.Lk)("h3",null,(0,a.v_)(s),1),(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sortedAppsByCategory[s],s=>((0,n.uX)(),(0,n.CE)("div",{key:s.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,a.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",s.iconclass||""]),style:(0,a.Tr)(s.iconclass?"color: white":""),onClick:t=>e.launchApp(s)},null,14,u),(0,n.Lk)("div",k,[(0,n.Lk)("div",w,[t[4]||(t[4]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showOnDesktop","onUpdate:modelValue":e=>s.showOnDesktop=e,checked:s.showOnDesktop,onChange:t=>e.Chng_showOnDesktop(s)},null,40,y),[[i.lH,s.showOnDesktop]])]),(0,n.Lk)("div",m,[t[5]||(t[5]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showInStartMenu",checked:s.showInStartMenu,"onUpdate:modelValue":e=>s.showInStartMenu=e,onChange:t=>e.Chng_showInStartMenu(s)},null,40,g),[[i.lH,s.showInStartMenu]])]),(0,n.Lk)("i",C,(0,a.v_)(s.category),1),(0,n.Lk)("h3",null,(0,a.v_)(s.label),1),(0,n.Lk)("i",null,(0,a.v_)(s.description),1)])]))),128))])]))),128))])):((0,n.uX)(),(0,n.CE)("div",S,[e.hasSearchResults?((0,n.uX)(),(0,n.CE)("div",f,[t[8]||(t[8]=(0,n.Lk)("h3",null,"Результаты поиска",-1)),(0,n.Lk)("div",I,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.filteredApps,s=>((0,n.uX)(),(0,n.CE)("div",{key:s.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,a.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",s.iconclass||""]),style:(0,a.Tr)(s.iconclass?"color: white":""),onClick:t=>e.launchApp(s)},null,14,L),(0,n.Lk)("div",v,[(0,n.Lk)("div",E,[t[6]||(t[6]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showOnDesktop","onUpdate:modelValue":e=>s.showOnDesktop=e,checked:s.showOnDesktop,onChange:t=>e.Chng_showOnDesktop(s)},null,40,b),[[i.lH,s.showOnDesktop]])]),(0,n.Lk)("div",U,[t[7]||(t[7]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showInStartMenu",checked:s.showInStartMenu,"onUpdate:modelValue":e=>s.showInStartMenu=e,onChange:t=>e.Chng_showInStartMenu(s)},null,40,D),[[i.lH,s.showInStartMenu]])]),(0,n.Lk)("i",R,(0,a.v_)(s.category),1),(0,n.Lk)("h3",null,(0,a.v_)(s.label),1),(0,n.Lk)("i",null,(0,a.v_)(s.description),1)])]))),128))])])):((0,n.uX)(),(0,n.CE)("div",x,'Ничего не найдено по запросу "'+(0,a.v_)(e.searchInputTxt)+'"',1))]))])])}s(4114),s(8111),s(2489),s(7588);var _=s(8047),V=s(8027),M={name:"OSIAppManager",props:{windowId:{type:String,required:!0},USERID:{type:Number,default:0}},inject:["reloadDesk"],data(){return{appsList:[],searchInputTxt:"",USERApps:[],USER:null,isNeedReload:!1}},computed:{filteredApps(){if(this.searchInputTxt.trim()){const e=this.searchInputTxt.toLowerCase().trim();return this.USERApps.filter(t=>t.label.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}return this.USERApps},sortedAppsByCategory(){const e={};return this.USERApps.forEach(t=>{const s=t.category;e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e.label.localeCompare(t.label))}),e},hasSearchResults(){return this.filteredApps.length>0},isSearching(){return this.searchInputTxt.trim().length>0}},async mounted(){const e=_.F.getAllApps(),t=await V.Vy.getApps(this.USERID);await this.findUser(),this.appsList=e,this.USERApps=t||e},methods:{reloadPage(){document.location.reload()},async findUser(){try{this.USER=await V.Vy.getbyId(this.USERID)}catch(e){console.error("Ошибка поиска пользователя:",e),this.$toast.error("Не удалось загрузить данные пользователя")}},async Chng_showOnDesktop(e){try{const t=e.id;await V.Vy.updateAppSetting(this.USERID,t,"showOnDesktop",e.showOnDesktop),this.reloadDesk()}catch(t){console.error("Ошибка обновления данных:",t)}},async Chng_showInStartMenu(e){try{const t=e.id;await V.Vy.updateAppSetting(this.USERID,t,"showInStartMenu",e.showInStartMenu),this.isNeedReload=!0}catch(t){console.error("Ошибка обновления данных:",t)}},async launchApp(e){if(this.USERID)try{const t=await V.Vy.windows.getWindow_byConfig(this.USERID,e);t&&t.isMinimized?(console.log("point-2 - Window exists and is minimized, restoring..."),await V.Vy.windows.activate(this.USERID,t.id)):t?await V.Vy.windows.activate(this.USERID,t.id):await V.Vy.windows.create(this.USERID,{...e,isMinimized:!1}),await V.Vy.windows.reupdate(this.USERID),console.log("Launch app completed")}catch(t){console.error("Error in launchApp:",t)}else console.error("USERID not set")}}},O=s(1241);const X=(0,O.A)(M,[["render",A]]);var T=X}}]);
//# sourceMappingURL=590.d7219f95.js.map