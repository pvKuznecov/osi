"use strict";(self["webpackChunkosi"]=self["webpackChunkosi"]||[]).push([[792],{1792:function(e,t,s){s.r(t),s.d(t,{default:function(){return j}});var n=s(6768),l=s(5130),o=s(4232);const a={class:"appmanager-app"},i={class:"row"},c={class:"search-area"},p={key:0,class:"warning-text-area"},r={key:1},d={key:2,class:"appslist-area"},h={class:"row"},u=["onClick"],k={class:"appslist-elem-info"},w={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center",title:"Отображать на рабочем столе."},y=["id","onUpdate:modelValue","checked","onChange"],m={class:"appslist-elem-showStart d-flex justify-content-center align-items-center",title:"Отображать в меню запуска."},g=["id","checked","onUpdate:modelValue","onChange"],f={class:"appslist-elem-category"},C={key:3,class:"appslist-area"},S={key:0},L={class:"row"},v=["onClick"],I={class:"appslist-elem-info"},b={class:"appslist-elem-showDesk d-flex justify-content-center align-items-center"},E=["id","onUpdate:modelValue","checked","onChange"],x={class:"appslist-elem-showStart d-flex justify-content-center align-items-center"},A=["id","checked","onUpdate:modelValue","onChange"],D={class:"appslist-elem-category"},U={key:1,class:"no-results"};function _(e,t){return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",i,[(0,n.Lk)("div",c,[t[1]||(t[1]=(0,n.Lk)("label",{for:"search_input"},"Поиск:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"search_input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInputTxt=t)},null,512),[[l.Jo,e.searchInputTxt]])]),e.isNeedReload?((0,n.uX)(),(0,n.CE)("div",p,[...t[2]||(t[2]=[(0,n.Lk)("h3",null,"Для того, чтобы изменения вступили в силу, необходимо перезагрузить систему.",-1)])])):((0,n.uX)(),(0,n.CE)("div",r)),0===e.searchInputTxt.length?((0,n.uX)(),(0,n.CE)("div",d,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Object.keys(e.sortedAppsByCategory),s=>((0,n.uX)(),(0,n.CE)("div",{key:s},[(0,n.Lk)("h3",null,(0,o.v_)(s),1),(0,n.Lk)("div",h,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.sortedAppsByCategory[s],s=>((0,n.uX)(),(0,n.CE)("div",{key:s.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,o.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",s.iconclass||""]),style:(0,o.Tr)(s.iconclass?"color: white":""),onClick:t=>e.launchApp(s)},null,14,u),(0,n.Lk)("div",k,[(0,n.Lk)("div",w,[t[3]||(t[3]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showOnDesktop","onUpdate:modelValue":e=>s.showOnDesktop=e,checked:s.showOnDesktop,onChange:t=>e.Chng_showOnDesktop(s)},null,40,y),[[l.lH,s.showOnDesktop]])]),(0,n.Lk)("div",m,[t[4]||(t[4]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showInStartMenu",checked:s.showInStartMenu,"onUpdate:modelValue":e=>s.showInStartMenu=e,onChange:t=>e.Chng_showInStartMenu(s)},null,40,g),[[l.lH,s.showInStartMenu]])]),(0,n.Lk)("i",f,(0,o.v_)(s.category),1),(0,n.Lk)("h3",null,(0,o.v_)(s.label),1),(0,n.Lk)("i",null,(0,o.v_)(s.description),1)])]))),128))])]))),128))])):((0,n.uX)(),(0,n.CE)("div",C,[e.hasSearchResults?((0,n.uX)(),(0,n.CE)("div",S,[t[7]||(t[7]=(0,n.Lk)("h3",null,"Результаты поиска",-1)),(0,n.Lk)("div",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.filteredApps,s=>((0,n.uX)(),(0,n.CE)("div",{key:s.id,class:"appslist-elem col-4 d-flex"},[(0,n.Lk)("div",{class:(0,o.C4)(["appslist-elem-ico d-flex justify-content-center align-items-center",s.iconclass||""]),style:(0,o.Tr)(s.iconclass?"color: white":""),onClick:t=>e.launchApp(s)},null,14,v),(0,n.Lk)("div",I,[(0,n.Lk)("div",b,[t[5]||(t[5]=(0,n.Lk)("i",{class:"bi bi-display-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showOnDesktop","onUpdate:modelValue":e=>s.showOnDesktop=e,checked:s.showOnDesktop,onChange:t=>e.Chng_showOnDesktop(s)},null,40,E),[[l.lH,s.showOnDesktop]])]),(0,n.Lk)("div",x,[t[6]||(t[6]=(0,n.Lk)("i",{class:"bi bi-house-fill me-1"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"checkbox",name:"",id:s.id+"_showInStartMenu",checked:s.showInStartMenu,"onUpdate:modelValue":e=>s.showInStartMenu=e,onChange:t=>e.Chng_showInStartMenu(s)},null,40,A),[[l.lH,s.showInStartMenu]])]),(0,n.Lk)("i",D,(0,o.v_)(s.category),1),(0,n.Lk)("h3",null,(0,o.v_)(s.label),1),(0,n.Lk)("i",null,(0,o.v_)(s.description),1)])]))),128))])])):((0,n.uX)(),(0,n.CE)("div",U,'Ничего не найдено по запросу "'+(0,o.v_)(e.searchInputTxt)+'"',1))]))])])}s(4114),s(8111),s(2489),s(116),s(7588);var R=s(8047),O=s(8027),M=s(7365),V={name:"OSIAppManager",props:{windowId:{type:String,required:!0},USERID:{type:Number,default:0}},inject:["reloadDesk"],data(){return{appsList:[],searchInputTxt:"",USERApps:[],USER:null,isNeedReload:!1}},computed:{osStore(){return(0,M.x)()},filteredApps(){if(this.searchInputTxt.trim()){const e=this.searchInputTxt.toLowerCase().trim();return this.USERApps.filter(t=>t.label.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}return this.USERApps},sortedAppsByCategory(){const e={};return this.USERApps.forEach(t=>{const s=t.category;e[s]||(e[s]=[]),e[s].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e.label.localeCompare(t.label))}),e},hasSearchResults(){return this.filteredApps.length>0},isSearching(){return this.searchInputTxt.trim().length>0}},async mounted(){const e=R.F.getAllApps(),t=await O.Vy.getApps(this.USERID);await this.findUser(),this.appsList=e,this.USERApps=t||e},methods:{async findUser(){try{this.USER=await O.Vy.getbyId(this.USERID)}catch(e){console.error("Ошибка поиска пользователя:",e),this.$toast.error("Не удалось загрузить данные пользователя")}},async Chng_showOnDesktop(e){try{const t=e.id;await O.Vy.updateAppSetting(this.USERID,t,"showOnDesktop",e.showOnDesktop),this.reloadDesk()}catch(t){console.error("Ошибка обновления данных:",t)}},async Chng_showInStartMenu(e){try{const t=e.id;await O.Vy.updateAppSetting(this.USERID,t,"showInStartMenu",e.showInStartMenu),this.isNeedReload=!0}catch(t){console.error("Ошибка обновления данных:",t)}},launchApp(e){const t={...e};console.log("appData",t);const s=t.name,n=t.contentapp;console.log("appName",s),console.log("contentApp",n);const l=this.osStore.windows.find(e=>e.appName===s&&e.contentApp===n);l?l.isMinimized?this.osStore.restoreWindow(l.id):this.osStore.activateWindow(l.id):this.osStore.openWindow({...t,defWidth:t.defWidth||800,defHeight:t.defHeight||600})}}},X=s(1241);const T=(0,X.A)(V,[["render",_]]);var j=T}}]);
//# sourceMappingURL=792.dcee5ce6.js.map