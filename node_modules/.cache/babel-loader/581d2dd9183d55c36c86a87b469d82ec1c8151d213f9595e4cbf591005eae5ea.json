{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\n\n// import { OSIHelper } from '@/apps/system/OSIHelper/OSIHelper.vue';\n\nexport const useOsStore = defineStore('os', () => {\n  const windows = ref([]);\n  const activeWindowId = ref(null);\n  let nextZIndex = 100;\n  const activateWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      activeWindowId.value = windowId;\n      windows.value.forEach(w => {\n        if (w.id === windowId) {\n          w.zIndex = nextZIndex++;\n        }\n      });\n    }\n  };\n  const openWindow = appData => {\n    const appName = appData.name;\n    const appTitle = appData.label;\n    const contentApp = appData.contentapp;\n    const newWindow = {\n      ...appData,\n      id: Date.now().toString(),\n      appName: appName,\n      contentApp: contentApp,\n      title: appTitle,\n      isMinimized: appData.isMinimized ? appData.isMinimized : false,\n      isMaximized: appData.isMaximized ? appData.isMaximized : false,\n      zIndex: nextZIndex++\n    };\n    windows.value.push(newWindow);\n    activateWindow(newWindow.id);\n    return newWindow.id;\n  };\n  const closeWindow = windowId => {\n    const index = windows.value.findIndex(w => w.id === windowId);\n    if (index !== -1) {\n      windows.value.splice(index, 1);\n    }\n  };\n  const minimizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = true;\n    }\n  };\n  const restoreWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = false;\n      activateWindow(windowId);\n    }\n  };\n  const toggleMaximizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMaximized = !window.isMaximized;\n      activateWindow(windowId);\n    }\n  };\n  return {\n    windows,\n    activeWindowId,\n    openWindow,\n    closeWindow,\n    minimizeWindow,\n    restoreWindow,\n    toggleMaximizeWindow,\n    activateWindow\n  };\n});","map":{"version":3,"names":["defineStore","ref","useOsStore","windows","activeWindowId","nextZIndex","activateWindow","windowId","window","value","find","w","id","forEach","zIndex","openWindow","appData","appName","name","appTitle","label","contentApp","contentapp","newWindow","Date","now","toString","title","isMinimized","isMaximized","push","closeWindow","index","findIndex","splice","minimizeWindow","restoreWindow","toggleMaximizeWindow"],"sources":["C:/projects/My projects/Vue/osi/src/stores/os.store.js"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { ref } from 'vue'\r\n\r\n// import { OSIHelper } from '@/apps/system/OSIHelper/OSIHelper.vue';\r\n\r\nexport const useOsStore = defineStore('os', () => {\r\n    const windows = ref([]);\r\n    const activeWindowId = ref(null);\r\n    \r\n    let nextZIndex = 100;\r\n  \r\n    const activateWindow = (windowId) => {\r\n        const window = windows.value.find(w => w.id === windowId);\r\n        \r\n        if (window) {\r\n            activeWindowId.value = windowId;\r\n            windows.value.forEach(w => {\r\n                if (w.id === windowId) {\r\n                    w.zIndex = nextZIndex++;\r\n                }\r\n            });\r\n        }\r\n    };\r\n  \r\n    const openWindow = (appData) => {\r\n        const appName = appData.name;\r\n        const appTitle = appData.label;\r\n        const contentApp = appData.contentapp;\r\n\r\n        const newWindow = {\r\n            ...appData,\r\n            id: Date.now().toString(),\r\n            appName: appName,\r\n            contentApp: contentApp,\r\n            title: appTitle,\r\n            isMinimized: (appData.isMinimized) ? appData.isMinimized : false,\r\n            isMaximized: (appData.isMaximized) ? appData.isMaximized : false,            \r\n            zIndex: nextZIndex++            \r\n        };\r\n    \r\n        windows.value.push(newWindow);\r\n        activateWindow(newWindow.id);\r\n    \r\n        return newWindow.id;\r\n    };\r\n  \r\n    const closeWindow = (windowId) => {\r\n        const index = windows.value.findIndex(w => w.id === windowId);\r\n        \r\n        if (index !== -1) {\r\n            windows.value.splice(index, 1);\r\n        }\r\n    };\r\n  \r\n    const minimizeWindow = (windowId) => {\r\n        const window = windows.value.find(w => w.id === windowId);\r\n        \r\n        if (window) {\r\n            window.isMinimized = true;\r\n        }\r\n    };\r\n  \r\n    const restoreWindow = (windowId) => {\r\n        const window = windows.value.find(w => w.id === windowId);\r\n    \r\n        if (window) {\r\n            window.isMinimized = false;\r\n            activateWindow(windowId);\r\n        }\r\n    };\r\n  \r\n    const toggleMaximizeWindow = (windowId) => {\r\n        const window = windows.value.find(w => w.id === windowId);\r\n\r\n        if (window) {\r\n            window.isMaximized = !window.isMaximized;\r\n            activateWindow(windowId);\r\n        }\r\n    }\r\n  \r\n    return {\r\n        windows,\r\n        activeWindowId,\r\n        openWindow,\r\n        closeWindow,\r\n        minimizeWindow,\r\n        restoreWindow,\r\n        toggleMaximizeWindow,\r\n        activateWindow\r\n    }\r\n})"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}