{"ast":null,"code":"import initDebug from 'debug';\nimport { IdentificationHeader } from './Theora.js';\nconst debug = initDebug('music-metadata:parser:ogg:theora');\n/**\r\n * Ref:\r\n * - https://theora.org/doc/Theora.pdf\r\n */\nexport class TheoraStream {\n  constructor(metadata, _options, _tokenizer) {\n    this.durationOnLastPage = false;\n    this.metadata = metadata;\n  }\n  /**\r\n   * Vorbis 1 parser\r\n   * @param header Ogg Page Header\r\n   * @param pageData Page data\r\n   */\n  async parsePage(header, pageData) {\n    if (header.headerType.firstPage) {\n      await this.parseFirstPage(header, pageData);\n    }\n  }\n  calculateDuration() {\n    debug('duration calculation not implemented');\n  }\n  /**\r\n   * Parse first Theora Ogg page. the initial identification header packet\r\n   */\n  async parseFirstPage(_header, pageData) {\n    debug('First Ogg/Theora page');\n    this.metadata.setFormat('codec', 'Theora');\n    const idHeader = IdentificationHeader.get(pageData, 0);\n    this.metadata.setFormat('bitrate', idHeader.nombr);\n    this.metadata.setFormat('hasVideo', true);\n  }\n  flush() {\n    return Promise.resolve();\n  }\n}","map":{"version":3,"names":["initDebug","IdentificationHeader","debug","TheoraStream","constructor","metadata","_options","_tokenizer","durationOnLastPage","parsePage","header","pageData","headerType","firstPage","parseFirstPage","calculateDuration","_header","setFormat","idHeader","get","nombr","flush","Promise","resolve"],"sources":["C:/projects/My projects/Vue/osi/node_modules/music-metadata/lib/ogg/theora/TheoraStream.js"],"sourcesContent":["import initDebug from 'debug';\r\nimport { IdentificationHeader } from './Theora.js';\r\nconst debug = initDebug('music-metadata:parser:ogg:theora');\r\n/**\r\n * Ref:\r\n * - https://theora.org/doc/Theora.pdf\r\n */\r\nexport class TheoraStream {\r\n    constructor(metadata, _options, _tokenizer) {\r\n        this.durationOnLastPage = false;\r\n        this.metadata = metadata;\r\n    }\r\n    /**\r\n     * Vorbis 1 parser\r\n     * @param header Ogg Page Header\r\n     * @param pageData Page data\r\n     */\r\n    async parsePage(header, pageData) {\r\n        if (header.headerType.firstPage) {\r\n            await this.parseFirstPage(header, pageData);\r\n        }\r\n    }\r\n    calculateDuration() {\r\n        debug('duration calculation not implemented');\r\n    }\r\n    /**\r\n     * Parse first Theora Ogg page. the initial identification header packet\r\n     */\r\n    async parseFirstPage(_header, pageData) {\r\n        debug('First Ogg/Theora page');\r\n        this.metadata.setFormat('codec', 'Theora');\r\n        const idHeader = IdentificationHeader.get(pageData, 0);\r\n        this.metadata.setFormat('bitrate', idHeader.nombr);\r\n        this.metadata.setFormat('hasVideo', true);\r\n    }\r\n    flush() {\r\n        return Promise.resolve();\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,OAAO;AAC7B,SAASC,oBAAoB,QAAQ,aAAa;AAClD,MAAMC,KAAK,GAAGF,SAAS,CAAC,kCAAkC,CAAC;AAC3D;AACA;AACA;AACA;AACA,OAAO,MAAMG,YAAY,CAAC;EACtBC,WAAWA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,EAAE;IACxC,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B,IAAI,CAACH,QAAQ,GAAGA,QAAQ;EAC5B;EACA;AACJ;AACA;AACA;AACA;EACI,MAAMI,SAASA,CAACC,MAAM,EAAEC,QAAQ,EAAE;IAC9B,IAAID,MAAM,CAACE,UAAU,CAACC,SAAS,EAAE;MAC7B,MAAM,IAAI,CAACC,cAAc,CAACJ,MAAM,EAAEC,QAAQ,CAAC;IAC/C;EACJ;EACAI,iBAAiBA,CAAA,EAAG;IAChBb,KAAK,CAAC,sCAAsC,CAAC;EACjD;EACA;AACJ;AACA;EACI,MAAMY,cAAcA,CAACE,OAAO,EAAEL,QAAQ,EAAE;IACpCT,KAAK,CAAC,uBAAuB,CAAC;IAC9B,IAAI,CAACG,QAAQ,CAACY,SAAS,CAAC,OAAO,EAAE,QAAQ,CAAC;IAC1C,MAAMC,QAAQ,GAAGjB,oBAAoB,CAACkB,GAAG,CAACR,QAAQ,EAAE,CAAC,CAAC;IACtD,IAAI,CAACN,QAAQ,CAACY,SAAS,CAAC,SAAS,EAAEC,QAAQ,CAACE,KAAK,CAAC;IAClD,IAAI,CAACf,QAAQ,CAACY,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC;EAC7C;EACAI,KAAKA,CAAA,EAAG;IACJ,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC;EAC5B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}