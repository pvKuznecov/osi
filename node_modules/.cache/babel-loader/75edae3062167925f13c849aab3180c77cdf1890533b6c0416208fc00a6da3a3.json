{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = {\n  class: \"window-title\"\n};\nconst _hoisted_2 = {\n  class: \"window-controls\"\n};\nconst _hoisted_3 = {\n  class: \"window-content\"\n};\nconst _hoisted_4 = {\n  class: \"default-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return !$props.isMinimized ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: _normalizeClass([\"simple-window\", {\n      'active': $props.isActive,\n      'maximized': $props.isMaximized\n    }]),\n    style: _normalizeStyle($options.windowStyles),\n    onMousedown: _cache[13] || (_cache[13] = (...args) => $options.activateWindow && $options.activateWindow(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"window-header\",\n    onMousedown: _cache[3] || (_cache[3] = (...args) => $options.startDrag && $options.startDrag(...args)),\n    onDblclick: _cache[4] || (_cache[4] = (...args) => $options.toggleMaximize && $options.toggleMaximize(...args))\n  }, [_createElementVNode(\"span\", _hoisted_1, _toDisplayString($props.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    class: \"window-btn minimize\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.minimize && $options.minimize(...args))\n  }, \"_\"), _createElementVNode(\"button\", {\n    class: \"window-btn maximize\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.toggleMaximize && $options.toggleMaximize(...args))\n  }, _toDisplayString($props.isMaximized ? '❐' : '□'), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"window-btn close\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.close && $options.close(...args))\n  }, \"✕\")])], 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", _hoisted_3, [_renderSlot(_ctx.$slots, \"default\", {}, () => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", null, \"Содержимое приложения \" + _toDisplayString($props.appName), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Это окно \" + _toDisplayString($props.isMaximized ? 'развернуто' : 'не развернуто'), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Размер: \" + _toDisplayString($data.windowWidth) + \" × \" + _toDisplayString($data.windowHeight), 1 /* TEXT */)])], true)]), !$props.isMaximized ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 0\n  }, [_createElementVNode(\"div\", {\n    class: \"resize-handle resize-top\",\n    onMousedown: _cache[5] || (_cache[5] = $event => $options.startResize('n'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-right\",\n    onMousedown: _cache[6] || (_cache[6] = $event => $options.startResize('e'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-bottom\",\n    onMousedown: _cache[7] || (_cache[7] = $event => $options.startResize('s'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-left\",\n    onMousedown: _cache[8] || (_cache[8] = $event => $options.startResize('w'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-top-right\",\n    onMousedown: _cache[9] || (_cache[9] = $event => $options.startResize('ne'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-bottom-right\",\n    onMousedown: _cache[10] || (_cache[10] = $event => $options.startResize('se'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-bottom-left\",\n    onMousedown: _cache[11] || (_cache[11] = $event => $options.startResize('sw'))\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", {\n    class: \"resize-handle resize-top-left\",\n    onMousedown: _cache[12] || (_cache[12] = $event => $options.startResize('nw'))\n  }, null, 32 /* NEED_HYDRATION */)], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)], 38 /* CLASS, STYLE, NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["class","$props","isMinimized","_createElementBlock","_normalizeClass","isActive","isMaximized","style","_normalizeStyle","$options","windowStyles","onMousedown","_cache","args","activateWindow","_createElementVNode","startDrag","onDblclick","toggleMaximize","_hoisted_1","_toDisplayString","title","_hoisted_2","onClick","minimize","close","_hoisted_3","_renderSlot","_ctx","$slots","_hoisted_4","appName","$data","windowWidth","windowHeight","_Fragment","key","$event","startResize"],"sources":["/home/kup/my_projects/vue/osi/src/components/os/SimpleWindow/SimpleWindow.vue"],"sourcesContent":["<template>\n  <div \n    v-if=\"!isMinimized\"\n    class=\"simple-window\"\n    :class=\"{ 'active': isActive, 'maximized': isMaximized }\"\n    :style=\"windowStyles\"\n    @mousedown=\"activateWindow\"\n  >\n    <div \n      class=\"window-header\" \n      @mousedown=\"startDrag\"\n      @dblclick=\"toggleMaximize\"\n    >\n      <span class=\"window-title\">{{ title }}</span>\n      <div class=\"window-controls\">\n        <button class=\"window-btn minimize\" @click=\"minimize\">_</button>\n        <button class=\"window-btn maximize\" @click=\"toggleMaximize\">\n          {{ isMaximized ? '❐' : '□' }}\n        </button>\n        <button class=\"window-btn close\" @click=\"close\">✕</button>\n      </div>\n    </div>\n    \n    <div class=\"window-content\">\n      <slot>\n        <div class=\"default-content\">\n          <p>Содержимое приложения {{ appName }}</p>\n          <p>Это окно {{ isMaximized ? 'развернуто' : 'не развернуто' }}</p>\n          <p>Размер: {{ windowWidth }} × {{ windowHeight }}</p>\n        </div>\n      </slot>\n    </div>\n    \n    \n    <template v-if=\"!isMaximized\">\n      <div class=\"resize-handle resize-top\" @mousedown=\"startResize('n')\"></div>\n      <div class=\"resize-handle resize-right\" @mousedown=\"startResize('e')\"></div>\n      <div class=\"resize-handle resize-bottom\" @mousedown=\"startResize('s')\"></div>\n      <div class=\"resize-handle resize-left\" @mousedown=\"startResize('w')\"></div>\n      <div class=\"resize-handle resize-top-right\" @mousedown=\"startResize('ne')\"></div>\n      <div class=\"resize-handle resize-bottom-right\" @mousedown=\"startResize('se')\"></div>\n      <div class=\"resize-handle resize-bottom-left\" @mousedown=\"startResize('sw')\"></div>\n      <div class=\"resize-handle resize-top-left\" @mousedown=\"startResize('nw')\"></div>\n    </template>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"SimpleWindow\",\n  \n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    },\n    isMinimized: {\n      type: Boolean,\n      default: false\n    },\n    isActive: {\n      type: Boolean,\n      default: false\n    },\n    isMaximized: {\n      type: Boolean,\n      default: false\n    },\n    zIndex: {\n      type: Number,\n      default: 100\n    }\n  },\n  \n  emits: ['close', 'minimize', 'focus', 'toggleMaximize'],\n  \n  data() {\n    return {\n      posX: 100,\n      posY: 100,\n      windowWidth: 400,\n      windowHeight: 300,\n      isDragging: false,\n      isResizing: false,\n      dragOffset: { x: 0, y: 0 },\n      resizeDirection: '',\n      resizeStart: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        mouseX: 0,\n        mouseY: 0\n      }\n    }\n  },\n  \n  computed: {\n    windowStyles() {\n      const baseStyles = {\n        zIndex: this.zIndex\n      }\n      \n      if (this.isMaximized) {\n        return {\n          ...baseStyles,\n          left: '0',\n          top: '0',\n          width: '100vw',\n          height: '100vh',\n          borderRadius: '0'\n        }\n      } else {\n        return {\n          ...baseStyles,\n          left: `${this.posX}px`,\n          top: `${this.posY}px`,\n          width: `${this.windowWidth}px`,\n          height: `${this.windowHeight}px`\n        }\n      }\n    }\n  },\n  \n  mounted() {\n    document.addEventListener('mousemove', this.handleMouseMove)\n    document.addEventListener('mouseup', this.handleMouseUp)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('mouseup', this.handleMouseUp)\n  },\n  \n  methods: {\n    activateWindow() {\n      this.$emit('focus', this.windowId)\n    },\n    \n    startDrag(e) {\n      this.$emit('focus', this.windowId)\n      \n      if (this.isMaximized) return\n      \n      this.isDragging = true\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      }\n      \n      e.stopPropagation()\n    },\n    \n    startResize(direction) {\n      if (this.isMaximized) return\n      \n      this.$emit('focus', this.windowId)\n      \n      this.isResizing = true\n      this.resizeDirection = direction\n      \n      this.resizeStart.x = this.posX\n      this.resizeStart.y = this.posY\n      this.resizeStart.width = this.windowWidth\n      this.resizeStart.height = this.windowHeight\n      this.resizeStart.mouseX = event.clientX\n      this.resizeStart.mouseY = event.clientY\n    },\n    \n    handleMouseMove(e) {\n      if (this.isDragging && !this.isMaximized) {\n        let newX = e.clientX - this.dragOffset.x\n        let newY = e.clientY - this.dragOffset.y\n        \n        const maxX = window.innerWidth - this.windowWidth\n        const maxY = window.innerHeight - this.windowHeight\n        \n        this.posX = Math.max(0, Math.min(newX, maxX))\n        this.posY = Math.max(0, Math.min(newY, maxY))\n        \n      } else if (this.isResizing && !this.isMaximized) {\n        this.handleResize(e)\n      }\n    },\n    \n    handleResize(e) {\n      const deltaX = e.clientX - this.resizeStart.mouseX\n      const deltaY = e.clientY - this.resizeStart.mouseY\n      \n      const minWidth = 200\n      const minHeight = 150\n      \n      let newX = this.resizeStart.x\n      let newY = this.resizeStart.y\n      let newWidth = this.resizeStart.width\n      let newHeight = this.resizeStart.height\n      \n      if (this.resizeDirection.includes('e')) {\n        newWidth = Math.max(minWidth, this.resizeStart.width + deltaX)\n      }\n      \n      if (this.resizeDirection.includes('w')) {\n        newWidth = Math.max(minWidth, this.resizeStart.width - deltaX)\n        newX = this.resizeStart.x + (this.resizeStart.width - newWidth)\n      }\n      \n      if (this.resizeDirection.includes('s')) {\n        newHeight = Math.max(minHeight, this.resizeStart.height + deltaY)\n      }\n      \n      if (this.resizeDirection.includes('n')) {\n        newHeight = Math.max(minHeight, this.resizeStart.height - deltaY)\n        newY = this.resizeStart.y + (this.resizeStart.height - newHeight)\n      }\n      \n      this.posX = newX\n      this.posY = newY\n      this.windowWidth = newWidth\n      this.windowHeight = newHeight\n      \n      this.keepWindowInBounds()\n    },\n    \n    keepWindowInBounds() {\n      const minWidth = 200\n      const minHeight = 150\n      const screenWidth = window.innerWidth\n      const screenHeight = window.innerHeight\n      \n      this.windowWidth = Math.max(minWidth, this.windowWidth)\n      this.windowHeight = Math.max(minHeight, this.windowHeight)\n      \n      if (this.posX + this.windowWidth > screenWidth) {\n        this.windowWidth = screenWidth - this.posX\n      }\n      \n      if (this.posY + this.windowHeight > screenHeight) {\n        this.windowHeight = screenHeight - this.posY\n      }\n      \n      this.posX = Math.max(0, this.posX)\n      this.posY = Math.max(0, this.posY)\n      \n      this.windowWidth = Math.max(minWidth, this.windowWidth)\n      this.windowHeight = Math.max(minHeight, this.windowHeight)\n    },\n    \n    handleMouseUp() {\n      if (this.isDragging || this.isResizing) {\n        this.keepWindowInBounds()\n      }\n      \n      this.isDragging = false\n      this.isResizing = false\n    },\n    \n    minimize() {\n      this.$emit('minimize', this.windowId)\n    },\n    \n    toggleMaximize() {\n      this.$emit('toggleMaximize', this.windowId)\n    },\n    \n    close() {\n      this.$emit('close', this.windowId)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.simple-window {\n  position: absolute;\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  display: flex;\n  flex-direction: column;\n  transition: all 0.2s ease;\n  border: 1px solid #ccc;\n}\n\n.simple-window.active {\n  border-color: #0078d4;\n  box-shadow: 0 6px 20px rgba(0, 120, 212, 0.25);\n}\n\n.simple-window.maximized {\n  border-radius: 0;\n  box-shadow: none;\n  border: none;\n}\n\n.window-header {\n  background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);\n  padding: 8px 12px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #ccc;\n  cursor: move;\n  user-select: none;\n}\n\n.simple-window.maximized .window-header {\n  cursor: default;\n  padding-top: 12px;\n}\n\n.window-title {\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.window-controls {\n  display: flex;\n  gap: 4px;\n}\n\n.window-btn {\n  width: 24px;\n  height: 24px;\n  border: 1px solid #aaa;\n  background: #f9f9f9;\n  border-radius: 3px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  transition: all 0.2s;\n}\n\n.window-btn:hover {\n  background: #e9e9e9;\n}\n\n.window-btn.maximize:hover {\n  background: #e0e0e0;\n}\n\n.window-btn.close:hover {\n  background: #e81123;\n  color: white;\n  border-color: #e81123;\n}\n\n.window-content {\n  flex: 1;\n  padding: 16px;\n  overflow: auto;\n  background: white;\n  cursor: default;\n}\n\n.default-content {\n  color: #666;\n}\n\n.default-content p {\n  margin: 4px 0;\n}\n\n/* Ручки изменения размера */\n.resize-handle {\n  position: absolute;\n  background: transparent;\n  z-index: 10;\n}\n\n.resize-top {\n  top: 0;\n  left: 5px;\n  right: 5px;\n  height: 5px;\n  cursor: n-resize;\n}\n\n.resize-right {\n  top: 5px;\n  right: 0;\n  bottom: 5px;\n  width: 5px;\n  cursor: e-resize;\n}\n\n.resize-bottom {\n  bottom: 0;\n  left: 5px;\n  right: 5px;\n  height: 5px;\n  cursor: s-resize;\n}\n\n.resize-left {\n  top: 5px;\n  left: 0;\n  bottom: 5px;\n  width: 5px;\n  cursor: w-resize;\n}\n\n.resize-top-right {\n  top: 0;\n  right: 0;\n  width: 10px;\n  height: 10px;\n  cursor: ne-resize;\n}\n\n.resize-bottom-right {\n  bottom: 0;\n  right: 0;\n  width: 10px;\n  height: 10px;\n  cursor: se-resize;\n}\n\n.resize-bottom-left {\n  bottom: 0;\n  left: 0;\n  width: 10px;\n  height: 10px;\n  cursor: sw-resize;\n}\n\n.resize-top-left {\n  top: 0;\n  left: 0;\n  width: 10px;\n  height: 10px;\n  cursor: nw-resize;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}