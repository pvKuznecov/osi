{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, withKeys as _withKeys, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"webos\"\n};\nconst _hoisted_2 = {\n  class: \"alt-tab-windows\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  class: \"alt-tab-icon\"\n};\nconst _hoisted_5 = {\n  class: \"alt-tab-title\"\n};\nconst _hoisted_6 = {\n  class: \"alt-tab-hint\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SimpleWindow = _resolveComponent(\"SimpleWindow\");\n  const _component_DesktopArea = _resolveComponent(\"DesktopArea\");\n  const _component_TaskBar = _resolveComponent(\"TaskBar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" –û–≤–µ—Ä–ª–µ–π –¥–ª—è Alt+Tab (–±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) \"), $data.showAltTabOverlay ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"alt-tab-overlay\",\n    onKeydown: _cache[0] || (_cache[0] = _withKeys((...args) => $options.closeAltTabOverlay && $options.closeAltTabOverlay(...args), [\"esc\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.altTabWindows, (window, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: window.id,\n      class: _normalizeClass([\"alt-tab-item\", {\n        'active': index === $data.altTabSelectedIndex\n      }]),\n      onClick: $event => $options.selectAltTabWindow(window.id)\n    }, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString($options.getAppIcon(window.appName)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, _toDisplayString(window.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, _toDisplayString(index + 1), 1 /* TEXT */)], 10 /* CLASS, PROPS */, _hoisted_3);\n  }), 128 /* KEYED_FRAGMENT */))]), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"alt-tab-hint-text\"\n  }, \" –ù–∞–∂–º–∏ Tab –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è, Enter –¥–ª—è –≤—ã–±–æ—Ä–∞, Esc –¥–ª—è –æ—Ç–º–µ–Ω—ã \", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_DesktopArea, null, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.osStore.windows, window => {\n      return _openBlock(), _createBlock(_component_SimpleWindow, {\n        key: window.id,\n        windowId: window.id,\n        title: window.title,\n        appName: window.appName,\n        isMinimized: window.isMinimized,\n        isActive: $data.osStore.activeWindowId === window.id,\n        isMaximized: window.isMaximized,\n        onClose: $options.closeWindow,\n        onMinimize: $options.minimizeWindow,\n        onToggleMaximize: $options.toggleMaximizeWindow,\n        onFocus: $options.focusWindow\n      }, null, 8 /* PROPS */, [\"windowId\", \"title\", \"appName\", \"isMinimized\", \"isActive\", \"isMaximized\", \"onClose\", \"onMinimize\", \"onToggleMaximize\", \"onFocus\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_TaskBar)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","$data","showAltTabOverlay","onKeydown","_cache","_withKeys","args","$options","closeAltTabOverlay","_createElementVNode","_hoisted_2","_Fragment","_renderList","altTabWindows","window","index","key","id","_normalizeClass","altTabSelectedIndex","onClick","$event","selectAltTabWindow","_hoisted_4","_toDisplayString","getAppIcon","appName","_hoisted_5","title","_hoisted_6","_createVNode","_component_DesktopArea","osStore","windows","_createBlock","_component_SimpleWindow","windowId","isMinimized","isActive","activeWindowId","isMaximized","onClose","closeWindow","onMinimize","minimizeWindow","onToggleMaximize","toggleMaximizeWindow","onFocus","focusWindow","_component_TaskBar"],"sources":["/home/kup/my_projects/vue/osi/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"webos\">\n    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è Alt+Tab (–±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->\n    <div \n      v-if=\"showAltTabOverlay\" \n      class=\"alt-tab-overlay\"\n      @keydown.esc=\"closeAltTabOverlay\"\n    >\n      <div class=\"alt-tab-windows\">\n        <div \n          v-for=\"(window, index) in altTabWindows\"\n          :key=\"window.id\"\n          class=\"alt-tab-item\"\n          :class=\"{ 'active': index === altTabSelectedIndex }\"\n          @click=\"selectAltTabWindow(window.id)\"\n        >\n          <div class=\"alt-tab-icon\">{{ getAppIcon(window.appName) }}</div>\n          <div class=\"alt-tab-title\">{{ window.title }}</div>\n          <div class=\"alt-tab-hint\">{{ index + 1 }}</div>\n        </div>\n      </div>\n      <div class=\"alt-tab-hint-text\">\n        –ù–∞–∂–º–∏ Tab –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è, Enter –¥–ª—è –≤—ã–±–æ—Ä–∞, Esc –¥–ª—è –æ—Ç–º–µ–Ω—ã\n      </div>\n    </div>\n    \n    <DesktopArea>\n      <SimpleWindow\n        v-for=\"window in osStore.windows\"\n        :key=\"window.id\"\n        :windowId=\"window.id\"\n        :title=\"window.title\"\n        :appName=\"window.appName\"\n        :isMinimized=\"window.isMinimized\"\n        :isActive=\"osStore.activeWindowId === window.id\"\n        :isMaximized=\"window.isMaximized\"\n        @close=\"closeWindow\"\n        @minimize=\"minimizeWindow\"\n        @toggleMaximize=\"toggleMaximizeWindow\"\n        @focus=\"focusWindow\"\n      />\n    </DesktopArea>\n    <TaskBar />\n  </div>\n</template>\n\n<script>\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue'\nimport TaskBar from './components/os/TaskBar/TaskBar.vue'\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue'\nimport { useOsStore } from './stores/os.store'\n\nexport default {\n  name: 'App',\n  \n  components: {\n    DesktopArea,\n    TaskBar,\n    SimpleWindow\n  },\n  \n  data() {\n    return {\n      osStore: null,\n      \n      // –î–∞–Ω–Ω—ã–µ –¥–ª—è Alt+Tab\n      showAltTabOverlay: false,\n      altTabWindows: [],\n      altTabSelectedIndex: 0,\n      altTabPressed: false\n    }\n  },\n  \n  methods: {\n    closeWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.closeWindow(windowId)\n      }\n    },\n    \n    minimizeWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.minimizeWindow(windowId)\n      }\n    },\n    \n    toggleMaximizeWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.toggleMaximizeWindow(windowId)\n      }\n    },\n    \n    focusWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.activeWindowId = windowId\n      }\n    },\n    \n    // –ú–µ—Ç–æ–¥—ã –¥–ª—è Alt+Tab\n    getAppIcon(appName) {\n      const icons = {\n        notepad: 'üìù',\n        explorer: 'üìÅ',\n        calculator: 'üßÆ',\n        settings: '‚öôÔ∏è'\n      }\n      return icons[appName] || 'üìÑ'\n    },\n    \n    openAltTabOverlay() {\n      if (!this.osStore || this.osStore.windows.length <= 1) {\n        return // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ—Å–ª–∏ –æ–∫–æ–Ω –º–µ–Ω—å—à–µ 2\n      }\n      \n      // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–µ —Å–≤–µ—Ä–Ω—É—Ç—ã–µ –æ–∫–Ω–∞\n      this.altTabWindows = this.osStore.windows.filter(w => !w.isMinimized)\n      \n      if (this.altTabWindows.length === 0) {\n        return\n      }\n      \n      // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫–Ω–∞\n      const currentActiveId = this.osStore.activeWindowId\n      this.altTabSelectedIndex = this.altTabWindows.findIndex(w => w.id === currentActiveId)\n      \n      // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –∏–ª–∏ —Å–≤–µ—Ä–Ω—É—Ç–æ, –Ω–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ\n      if (this.altTabSelectedIndex === -1) {\n        this.altTabSelectedIndex = 0\n      }\n      \n      this.showAltTabOverlay = true\n      \n      // –§–æ–∫—É—Å –Ω–∞ –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∞–≤–∏—à\n      this.$nextTick(() => {\n        const overlay = this.$el.querySelector('.alt-tab-overlay')\n        if (overlay) {\n          overlay.focus()\n        }\n      })\n    },\n    \n    closeAltTabOverlay() {\n      this.showAltTabOverlay = false\n      this.altTabPressed = false\n    },\n    \n    selectAltTabWindow(windowId) {\n      this.focusWindow(windowId)\n      this.closeAltTabOverlay()\n    },\n    \n    handleAltTabKeyDown(e) {\n      // Alt+Tab\n      if (e.key === 'Tab' && e.altKey && !e.repeat) {\n        e.preventDefault()\n        this.altTabPressed = true\n        \n        if (!this.showAltTabOverlay) {\n          this.openAltTabOverlay()\n        } else {\n          // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–µ –æ–∫–Ω–æ\n          this.altTabSelectedIndex = (this.altTabSelectedIndex + 1) % this.altTabWindows.length\n        }\n      }\n      \n      // Alt+Shift+Tab (–æ–±—Ä–∞—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ)\n      if (e.key === 'Tab' && e.altKey && e.shiftKey && !e.repeat) {\n        e.preventDefault()\n        this.altTabPressed = true\n        \n        if (!this.showAltTabOverlay) {\n          this.openAltTabOverlay()\n        } else {\n          // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–∫–Ω–æ\n          this.altTabSelectedIndex = (this.altTabSelectedIndex - 1 + this.altTabWindows.length) % this.altTabWindows.length\n        }\n      }\n      \n      // Enter –¥–ª—è –≤—ã–±–æ—Ä–∞\n      if (e.key === 'Enter' && this.showAltTabOverlay) {\n        e.preventDefault()\n        if (this.altTabWindows[this.altTabSelectedIndex]) {\n          this.selectAltTabWindow(this.altTabWindows[this.altTabSelectedIndex].id)\n        }\n      }\n      \n      // Esc –¥–ª—è –æ—Ç–º–µ–Ω—ã\n      if (e.key === 'Escape' && this.showAltTabOverlay) {\n        e.preventDefault()\n        this.closeAltTabOverlay()\n      }\n      \n      // –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ Alt\n      if (e.key === 'Alt' && this.altTabPressed) {\n        this.altTabPressed = false\n        if (this.showAltTabOverlay && this.altTabWindows[this.altTabSelectedIndex]) {\n          this.selectAltTabWindow(this.altTabWindows[this.altTabSelectedIndex].id)\n        }\n      }\n    },\n    \n    handleKeyUp(e) {\n      // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ Alt\n      if (e.key === 'Alt') {\n        this.altTabPressed = false\n        if (this.showAltTabOverlay && this.altTabWindows[this.altTabSelectedIndex]) {\n          this.selectAltTabWindow(this.altTabWindows[this.altTabSelectedIndex].id)\n        }\n      }\n    }\n  },\n  \n  created() {\n    this.osStore = useOsStore()\n  },\n  \n  mounted() {\n    // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏—à\n    window.addEventListener('keydown', this.handleAltTabKeyDown)\n    window.addEventListener('keyup', this.handleKeyUp)\n    \n    setTimeout(() => {\n      if (this.osStore) {\n        this.osStore.openWindow('notepad')\n        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –µ—â–µ –æ–¥–Ω–æ –æ–∫–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ Alt+Tab\n        setTimeout(() => {\n          this.osStore.openWindow('explorer')\n        }, 300)\n      }\n    }, 500)\n  },\n  \n  beforeUnmount() {\n    // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏—à\n    window.removeEventListener('keydown', this.handleAltTabKeyDown)\n    window.removeEventListener('keyup', this.handleKeyUp)\n  }\n}\n</script>\n\n<style scoped>\n.webos {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n}\n\n/* –°—Ç–∏–ª–∏ –¥–ª—è –æ–≤–µ—Ä–ª–µ—è Alt+Tab */\n.alt-tab-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(5px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 10000;\n  outline: none;\n}\n\n.alt-tab-windows {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  justify-content: center;\n  max-width: 90%;\n  max-height: 70%;\n  overflow-y: auto;\n  padding: 20px;\n}\n\n.alt-tab-item {\n  width: 150px;\n  height: 120px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  padding: 15px;\n  border: 2px solid transparent;\n}\n\n.alt-tab-item:hover {\n  transform: translateY(-5px);\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n}\n\n.alt-tab-item.active {\n  border-color: #0078d4;\n  background: white;\n  transform: translateY(-5px) scale(1.05);\n  box-shadow: 0 10px 25px rgba(0, 120, 212, 0.3);\n}\n\n.alt-tab-icon {\n  font-size: 36px;\n  margin-bottom: 10px;\n}\n\n.alt-tab-title {\n  font-size: 12px;\n  text-align: center;\n  font-weight: 500;\n  color: #333;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n\n.alt-tab-hint {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  background: #0078d4;\n  color: white;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 11px;\n  font-weight: bold;\n}\n\n.alt-tab-hint-text {\n  color: white;\n  font-size: 14px;\n  margin-top: 30px;\n  opacity: 0.8;\n  text-align: center;\n  padding: 10px 20px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 20px;\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAO;;EAOTA,KAAK,EAAC;AAAiB;;;EAQnBA,KAAK,EAAC;AAAc;;EACpBA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAc;;;;;uBAjBjCC,mBAAA,CA0CM,OA1CNC,UA0CM,GAzCJC,mBAAA,oDAAuD,EAE/CC,KAAA,CAAAC,iBAAiB,I,cADzBJ,mBAAA,CAqBM;;IAnBJD,KAAK,EAAC,iBAAiB;IACtBM,SAAO,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAMC,QAAA,CAAAC,kBAAA,IAAAD,QAAA,CAAAC,kBAAA,IAAAF,IAAA,CAAkB;MAEhCG,mBAAA,CAYM,OAZNC,UAYM,I,kBAXJZ,mBAAA,CAUMa,SAAA,QAAAC,WAAA,CATsBX,KAAA,CAAAY,aAAa,GAA/BC,MAAM,EAAEC,KAAK;yBADvBjB,mBAAA,CAUM;MARHkB,GAAG,EAAEF,MAAM,CAACG,EAAE;MACfpB,KAAK,EAAAqB,eAAA,EAAC,cAAc;QAAA,UACAH,KAAK,KAAKd,KAAA,CAAAkB;MAAmB;MAChDC,OAAK,EAAAC,MAAA,IAAEd,QAAA,CAAAe,kBAAkB,CAACR,MAAM,CAACG,EAAE;QAEpCR,mBAAA,CAAgE,OAAhEc,UAAgE,EAAAC,gBAAA,CAAnCjB,QAAA,CAAAkB,UAAU,CAACX,MAAM,CAACY,OAAO,mBACtDjB,mBAAA,CAAmD,OAAnDkB,UAAmD,EAAAH,gBAAA,CAArBV,MAAM,CAACc,KAAK,kBAC1CnB,mBAAA,CAA+C,OAA/CoB,UAA+C,EAAAL,gBAAA,CAAlBT,KAAK,qB;8DAGtCN,mBAAA,CAEM;IAFDZ,KAAK,EAAC;EAAmB,GAAC,gEAE/B,oB,iEAGFiC,YAAA,CAecC,sBAAA;sBAbV,MAAiC,E,kBADnCjC,mBAAA,CAaEa,SAAA,QAAAC,WAAA,CAZiBX,KAAA,CAAA+B,OAAO,CAACC,OAAO,EAAzBnB,MAAM;2BADfoB,YAAA,CAaEC,uBAAA;QAXCnB,GAAG,EAAEF,MAAM,CAACG,EAAE;QACdmB,QAAQ,EAAEtB,MAAM,CAACG,EAAE;QACnBW,KAAK,EAAEd,MAAM,CAACc,KAAK;QACnBF,OAAO,EAAEZ,MAAM,CAACY,OAAO;QACvBW,WAAW,EAAEvB,MAAM,CAACuB,WAAW;QAC/BC,QAAQ,EAAErC,KAAA,CAAA+B,OAAO,CAACO,cAAc,KAAKzB,MAAM,CAACG,EAAE;QAC9CuB,WAAW,EAAE1B,MAAM,CAAC0B,WAAW;QAC/BC,OAAK,EAAElC,QAAA,CAAAmC,WAAW;QAClBC,UAAQ,EAAEpC,QAAA,CAAAqC,cAAc;QACxBC,gBAAc,EAAEtC,QAAA,CAAAuC,oBAAoB;QACpCC,OAAK,EAAExC,QAAA,CAAAyC;;;;MAGZlB,YAAA,CAAWmB,kBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}