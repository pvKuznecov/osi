{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useOsStore } from './stores/os.store';\nimport { useAppsStore } from './stores/apps.store';\nimport { usersTable, IDBWindows, activeWindowId } from './idb/db';\nimport AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\nimport TaskBar from './components/os/TaskBar/TaskBar.vue';\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\nexport default {\n  name: 'App',\n  components: {\n    AutorizationArea,\n    DesktopArea,\n    TaskBar,\n    SimpleWindow\n  },\n  setup() {\n    console.log('App setup started');\n\n    // –°–æ—Å—Ç–æ—è–Ω–∏–µ\n    const isAutorized = ref(false);\n    const USERID = ref(null);\n    const USER = ref({});\n\n    // –°—Ç–æ—Ä—ã\n    const osStore = useOsStore();\n    const appsStore = useAppsStore();\n\n    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–∫–Ω–∞ –ø–æ zIndex –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–ª–æ–∂–µ–Ω–∏—è\n    // –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π zIndex –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–µ—Ä—Ö—É, –ø–æ—ç—Ç–æ–º—É —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é\n    const sortedWindows = computed(() => {\n      const windows = IDBWindows.value || [];\n      console.log('Computing sortedWindows:', windows.map(w => ({\n        id: w.id,\n        zIndex: w.zIndex\n      })));\n\n      // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é zIndex (–±–æ–ª—å—à–∏–π zIndex - —Å–≤–µ—Ä—Ö—É)\n      return [...windows].sort((a, b) => (b.zIndex || 0) - (a.zIndex || 0));\n    });\n\n    // –ê–∫—Ç–∏–≤–Ω—ã–π windowId –∏–∑ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ ref\n    const currentActiveWindowId = computed(() => activeWindowId.value);\n\n    // –ú–µ—Ç–æ–¥—ã\n    const selectUser = async userId => {\n      console.log('selectUser called with userId:', userId);\n      USERID.value = userId;\n      if (usersTable) {\n        try {\n          // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n          const user = await usersTable.getbyId(userId);\n          USER.value = user;\n\n          // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n          await usersTable.windows.reupdate(userId);\n          console.log('Windows reupdated after user selection');\n        } catch (error) {\n          console.error('Error loading user data:', error);\n        }\n      }\n      isAutorized.value = true;\n      console.log('User authorized');\n    };\n    const closeWindow = async windowId => {\n      console.log('closeWindow called with windowId:', windowId);\n      if (USERID.value && usersTable) {\n        try {\n          // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –≤ –ë–î\n          await usersTable.windows.close(USERID.value, windowId);\n\n          // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n          await usersTable.windows.reupdate(USERID.value);\n          console.log('Window closed successfully');\n        } catch (error) {\n          console.error('Error closing window:', error);\n        }\n      }\n\n      // –£–¥–∞–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ store\n      if (appsStore) {\n        appsStore.deleteWindowState(windowId);\n      }\n    };\n    const minimizeWindow = async windowId => {\n      console.log('minimizeWindow called with windowId:', windowId);\n      if (USERID.value && usersTable) {\n        try {\n          // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–∫–Ω–∞\n          const windows = IDBWindows.value || [];\n          const windowIndex = windows.findIndex(w => w.id === windowId);\n          if (windowIndex !== -1) {\n            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å isMinimized\n            windows[windowIndex].isMinimized = true;\n\n            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n            const user = await usersTable.getbyId(USERID.value);\n            const uSystemconfig = {\n              ...user.systemconfig,\n              windows: windows\n            };\n            await DB.users.where('id').equals(USERID.value).modify(user => {\n              user.systemconfig = uSystemconfig;\n              user.updatedAt = new Date();\n            });\n\n            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é\n            IDBWindows.value = [...windows];\n            console.log('Window minimized');\n          }\n        } catch (error) {\n          console.error('Error minimizing window:', error);\n        }\n      }\n    };\n    const toggleMaximizeWindow = async windowId => {\n      console.log('toggleMaximizeWindow called with windowId:', windowId);\n      if (USERID.value && usersTable) {\n        try {\n          // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–∫–Ω–∞\n          const windows = IDBWindows.value || [];\n          const windowIndex = windows.findIndex(w => w.id === windowId);\n          if (windowIndex !== -1) {\n            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ç—É—Å isMaximized\n            windows[windowIndex].isMaximized = !windows[windowIndex].isMaximized;\n\n            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n            const user = await usersTable.getbyId(USERID.value);\n            const uSystemconfig = {\n              ...user.systemconfig,\n              windows: windows\n            };\n            await DB.users.where('id').equals(USERID.value).modify(user => {\n              user.systemconfig = uSystemconfig;\n              user.updatedAt = new Date();\n            });\n\n            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é\n            IDBWindows.value = [...windows];\n            console.log('Window maximized toggled');\n          }\n        } catch (error) {\n          console.error('Error toggling maximize window:', error);\n        }\n      }\n    };\n    const activateWindow = async windowId => {\n      console.log('üéØ activateWindow called in App.vue with windowId:', windowId);\n      console.log('Current USERID:', USERID.value);\n      if (USERID.value && usersTable) {\n        try {\n          // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫–Ω–æ (–æ–±–Ω–æ–≤–ª—è–µ–º zIndex)\n          await usersTable.windows.activate(USERID.value, windowId);\n\n          // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n          await usersTable.windows.reupdate(USERID.value);\n          console.log('Window activated successfully');\n        } catch (error) {\n          console.error('Error activating window:', error);\n        }\n      } else {\n        console.log('Cannot activate: USERID or usersTable missing');\n      }\n    };\n\n    // –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ IDBWindows –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n    watch(() => IDBWindows.value, (newVal, oldVal) => {\n      console.log('IDBWindows changed:', {\n        new: newVal?.map(w => ({\n          id: w.id,\n          zIndex: w.zIndex\n        })),\n        old: oldVal?.map(w => ({\n          id: w.id,\n          zIndex: w.zIndex\n        }))\n      });\n    }, {\n      deep: true,\n      immediate: true\n    });\n\n    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n    onMounted(() => {\n      console.log('App mounted');\n    });\n    return {\n      // –°–æ—Å—Ç–æ—è–Ω–∏–µ\n      isAutorized,\n      USERID,\n      USER,\n      // –°—Ç–æ—Ä—ã\n      osStore,\n      appsStore,\n      // Computed\n      sortedWindows,\n      activeWindowId: currentActiveWindowId,\n      // –ú–µ—Ç–æ–¥—ã\n      selectUser,\n      closeWindow,\n      minimizeWindow,\n      toggleMaximizeWindow,\n      activateWindow\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","useOsStore","useAppsStore","usersTable","IDBWindows","activeWindowId","AutorizationArea","DesktopArea","TaskBar","SimpleWindow","name","components","setup","console","log","isAutorized","USERID","USER","osStore","appsStore","sortedWindows","windows","value","map","w","id","zIndex","sort","a","b","currentActiveWindowId","selectUser","userId","user","getbyId","reupdate","error","closeWindow","windowId","close","deleteWindowState","minimizeWindow","windowIndex","findIndex","isMinimized","uSystemconfig","systemconfig","DB","users","where","equals","modify","updatedAt","Date","toggleMaximizeWindow","isMaximized","activateWindow","activate","newVal","oldVal","new","old","deep","immediate"],"sources":["/home/kup/my_projects/vue/osi/src/App.vue"],"sourcesContent":["<template>\n    <AutorizationArea v-if=\"!isAutorized\" @selectUser=\"selectUser\" />\n    <div v-if=\"isAutorized\" class=\"webos\">\n        <DesktopArea :USERID=\"USERID\">\n            <SimpleWindow \n                v-for=\"window in sortedWindows\"\n                :key=\"window.id\"\n                :windowId=\"window.id\"\n                :title=\"window.label\"\n                :appName=\"window.name\"\n                :icon=\"window.icon\"\n                :iconclass=\"window.iconclass\"\n                :defWidth=\"window.defWidth\"\n                :defHeight=\"window.defHeight\"\n                :isMinimized=\"window.isMinimized\"\n                :isActive=\"activeWindowId === window.id\"\n                :isMaximized=\"window.isMaximized\"\n                :zIndex=\"window.zIndex\"\n                :resizable=\"window.resizable\"\n                :canMinimize=\"window.canMinimize\"\n                :USERID=\"USERID\"\n                @close=\"closeWindow\"\n                @minimize=\"minimizeWindow\"\n                @toggleMaximize=\"toggleMaximizeWindow\"\n                @focus=\"activateWindow\"\n            />\n        </DesktopArea>\n        <TaskBar :USERID=\"USERID\" />\n    </div>\n</template>\n\n<style src=\"./styles/global.css\"></style>\n\n<script>\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useOsStore } from './stores/os.store';\nimport { useAppsStore } from './stores/apps.store';\nimport { usersTable, IDBWindows, activeWindowId } from './idb/db';\n\nimport AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\nimport TaskBar from './components/os/TaskBar/TaskBar.vue';\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\n\nexport default {\n    name: 'App',\n  \n    components: {\n        AutorizationArea,\n        DesktopArea,\n        TaskBar,\n        SimpleWindow\n    },\n  \n    setup() {\n        console.log('App setup started');\n        \n        // –°–æ—Å—Ç–æ—è–Ω–∏–µ\n        const isAutorized = ref(false);\n        const USERID = ref(null);\n        const USER = ref({});\n        \n        // –°—Ç–æ—Ä—ã\n        const osStore = useOsStore();\n        const appsStore = useAppsStore();\n        \n        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–∫–Ω–∞ –ø–æ zIndex –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–ª–æ–∂–µ–Ω–∏—è\n        // –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π zIndex –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–µ—Ä—Ö—É, –ø–æ—ç—Ç–æ–º—É —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é\n        const sortedWindows = computed(() => {\n            const windows = IDBWindows.value || [];\n            console.log('Computing sortedWindows:', windows.map(w => ({id: w.id, zIndex: w.zIndex})));\n            \n            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é zIndex (–±–æ–ª—å—à–∏–π zIndex - —Å–≤–µ—Ä—Ö—É)\n            return [...windows].sort((a, b) => (b.zIndex || 0) - (a.zIndex || 0));\n        });\n        \n        // –ê–∫—Ç–∏–≤–Ω—ã–π windowId –∏–∑ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ ref\n        const currentActiveWindowId = computed(() => activeWindowId.value);\n        \n        // –ú–µ—Ç–æ–¥—ã\n        const selectUser = async (userId) => {\n            console.log('selectUser called with userId:', userId);\n            USERID.value = userId;\n            \n            if (usersTable) {\n                try {\n                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n                    const user = await usersTable.getbyId(userId);\n                    USER.value = user;\n                    \n                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n                    await usersTable.windows.reupdate(userId);\n                    console.log('Windows reupdated after user selection');\n                } catch (error) {\n                    console.error('Error loading user data:', error);\n                }\n            }\n            \n            isAutorized.value = true;\n            console.log('User authorized');\n        };\n        \n        const closeWindow = async (windowId) => {\n            console.log('closeWindow called with windowId:', windowId);\n            \n            if (USERID.value && usersTable) {\n                try {\n                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –≤ –ë–î\n                    await usersTable.windows.close(USERID.value, windowId);\n                    \n                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n                    await usersTable.windows.reupdate(USERID.value);\n                    \n                    console.log('Window closed successfully');\n                } catch (error) {\n                    console.error('Error closing window:', error);\n                }\n            }\n\n            // –£–¥–∞–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ store\n            if (appsStore) {\n                appsStore.deleteWindowState(windowId);\n            }\n        };\n    \n        const minimizeWindow = async (windowId) => {\n            console.log('minimizeWindow called with windowId:', windowId);\n            \n            if (USERID.value && usersTable) {\n                try {\n                    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–∫–Ω–∞\n                    const windows = IDBWindows.value || [];\n                    const windowIndex = windows.findIndex(w => w.id === windowId);\n                    \n                    if (windowIndex !== -1) {\n                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å isMinimized\n                        windows[windowIndex].isMinimized = true;\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n                        const user = await usersTable.getbyId(USERID.value);\n                        const uSystemconfig = {\n                            ...user.systemconfig,\n                            windows: windows\n                        };\n                        \n                        await DB.users.where('id').equals(USERID.value)\n                            .modify(user => {\n                                user.systemconfig = uSystemconfig;\n                                user.updatedAt = new Date();\n                            });\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é\n                        IDBWindows.value = [...windows];\n                        \n                        console.log('Window minimized');\n                    }\n                } catch (error) {\n                    console.error('Error minimizing window:', error);\n                }\n            }\n        };\n    \n        const toggleMaximizeWindow = async (windowId) => {\n            console.log('toggleMaximizeWindow called with windowId:', windowId);\n            \n            if (USERID.value && usersTable) {\n                try {\n                    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–∫–Ω–∞\n                    const windows = IDBWindows.value || [];\n                    const windowIndex = windows.findIndex(w => w.id === windowId);\n                    \n                    if (windowIndex !== -1) {\n                        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ç—É—Å isMaximized\n                        windows[windowIndex].isMaximized = !windows[windowIndex].isMaximized;\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n                        const user = await usersTable.getbyId(USERID.value);\n                        const uSystemconfig = {\n                            ...user.systemconfig,\n                            windows: windows\n                        };\n                        \n                        await DB.users.where('id').equals(USERID.value)\n                            .modify(user => {\n                                user.systemconfig = uSystemconfig;\n                                user.updatedAt = new Date();\n                            });\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é\n                        IDBWindows.value = [...windows];\n                        \n                        console.log('Window maximized toggled');\n                    }\n                } catch (error) {\n                    console.error('Error toggling maximize window:', error);\n                }\n            }\n        };\n    \n        const activateWindow = async (windowId) => {\n            console.log('üéØ activateWindow called in App.vue with windowId:', windowId);\n            console.log('Current USERID:', USERID.value);\n            \n            if (USERID.value && usersTable) {\n                try {\n                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫–Ω–æ (–æ–±–Ω–æ–≤–ª—è–µ–º zIndex)\n                    await usersTable.windows.activate(USERID.value, windowId);\n                    \n                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n                    await usersTable.windows.reupdate(USERID.value);\n                    \n                    console.log('Window activated successfully');\n                } catch (error) {\n                    console.error('Error activating window:', error);\n                }\n            } else {\n                console.log('Cannot activate: USERID or usersTable missing');\n            }\n        };\n        \n        // –°–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ IDBWindows –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n        watch(() => IDBWindows.value, (newVal, oldVal) => {\n            console.log('IDBWindows changed:', {\n                new: newVal?.map(w => ({id: w.id, zIndex: w.zIndex})),\n                old: oldVal?.map(w => ({id: w.id, zIndex: w.zIndex}))\n            });\n        }, { deep: true, immediate: true });\n        \n        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n        onMounted(() => {\n            console.log('App mounted');\n        });\n        \n        return {\n            // –°–æ—Å—Ç–æ—è–Ω–∏–µ\n            isAutorized,\n            USERID,\n            USER,\n            \n            // –°—Ç–æ—Ä—ã\n            osStore,\n            appsStore,\n            \n            // Computed\n            sortedWindows,\n            activeWindowId: currentActiveWindowId,\n            \n            // –ú–µ—Ç–æ–¥—ã\n            selectUser,\n            closeWindow,\n            minimizeWindow,\n            toggleMaximizeWindow,\n            activateWindow\n        };\n    }\n}\n</script>\n\n<style>\n.webos {\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    position: relative;\n}\n</style>"],"mappings":";;AAkCA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,KAAI,QAAS,KAAK;AACrD,SAASC,UAAS,QAAS,mBAAmB;AAC9C,SAASC,YAAW,QAAS,qBAAqB;AAClD,SAASC,UAAU,EAAEC,UAAU,EAAEC,cAAa,QAAS,UAAU;AAEjE,OAAOC,gBAAe,MAAO,uDAAuD;AACpF,OAAOC,WAAU,MAAO,6CAA6C;AACrE,OAAOC,OAAM,MAAO,qCAAqC;AACzD,OAAOC,YAAW,MAAO,+CAA+C;AAExE,eAAe;EACXC,IAAI,EAAE,KAAK;EAEXC,UAAU,EAAE;IACRL,gBAAgB;IAChBC,WAAW;IACXC,OAAO;IACPC;EACJ,CAAC;EAEDG,KAAKA,CAAA,EAAG;IACJC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;;IAEhC;IACA,MAAMC,WAAU,GAAIlB,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMmB,MAAK,GAAInB,GAAG,CAAC,IAAI,CAAC;IACxB,MAAMoB,IAAG,GAAIpB,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEpB;IACA,MAAMqB,OAAM,GAAIjB,UAAU,CAAC,CAAC;IAC5B,MAAMkB,SAAQ,GAAIjB,YAAY,CAAC,CAAC;;IAEhC;IACA;IACA,MAAMkB,aAAY,GAAItB,QAAQ,CAAC,MAAM;MACjC,MAAMuB,OAAM,GAAIjB,UAAU,CAACkB,KAAI,IAAK,EAAE;MACtCT,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEO,OAAO,CAACE,GAAG,CAACC,CAAA,KAAM;QAACC,EAAE,EAAED,CAAC,CAACC,EAAE;QAAEC,MAAM,EAAEF,CAAC,CAACE;MAAM,CAAC,CAAC,CAAC,CAAC;;MAEzF;MACA,OAAO,CAAC,GAAGL,OAAO,CAAC,CAACM,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACA,CAAC,CAACH,MAAK,IAAK,CAAC,KAAKE,CAAC,CAACF,MAAK,IAAK,CAAC,CAAC,CAAC;IACzE,CAAC,CAAC;;IAEF;IACA,MAAMI,qBAAoB,GAAIhC,QAAQ,CAAC,MAAMO,cAAc,CAACiB,KAAK,CAAC;;IAElE;IACA,MAAMS,UAAS,GAAI,MAAOC,MAAM,IAAK;MACjCnB,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEkB,MAAM,CAAC;MACrDhB,MAAM,CAACM,KAAI,GAAIU,MAAM;MAErB,IAAI7B,UAAU,EAAE;QACZ,IAAI;UACA;UACA,MAAM8B,IAAG,GAAI,MAAM9B,UAAU,CAAC+B,OAAO,CAACF,MAAM,CAAC;UAC7Cf,IAAI,CAACK,KAAI,GAAIW,IAAI;;UAEjB;UACA,MAAM9B,UAAU,CAACkB,OAAO,CAACc,QAAQ,CAACH,MAAM,CAAC;UACzCnB,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;QACzD,EAAE,OAAOsB,KAAK,EAAE;UACZvB,OAAO,CAACuB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QACpD;MACJ;MAEArB,WAAW,CAACO,KAAI,GAAI,IAAI;MACxBT,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAClC,CAAC;IAED,MAAMuB,WAAU,GAAI,MAAOC,QAAQ,IAAK;MACpCzB,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEwB,QAAQ,CAAC;MAE1D,IAAItB,MAAM,CAACM,KAAI,IAAKnB,UAAU,EAAE;QAC5B,IAAI;UACA;UACA,MAAMA,UAAU,CAACkB,OAAO,CAACkB,KAAK,CAACvB,MAAM,CAACM,KAAK,EAAEgB,QAAQ,CAAC;;UAEtD;UACA,MAAMnC,UAAU,CAACkB,OAAO,CAACc,QAAQ,CAACnB,MAAM,CAACM,KAAK,CAAC;UAE/CT,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;QAC7C,EAAE,OAAOsB,KAAK,EAAE;UACZvB,OAAO,CAACuB,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QACjD;MACJ;;MAEA;MACA,IAAIjB,SAAS,EAAE;QACXA,SAAS,CAACqB,iBAAiB,CAACF,QAAQ,CAAC;MACzC;IACJ,CAAC;IAED,MAAMG,cAAa,GAAI,MAAOH,QAAQ,IAAK;MACvCzB,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEwB,QAAQ,CAAC;MAE7D,IAAItB,MAAM,CAACM,KAAI,IAAKnB,UAAU,EAAE;QAC5B,IAAI;UACA;UACA,MAAMkB,OAAM,GAAIjB,UAAU,CAACkB,KAAI,IAAK,EAAE;UACtC,MAAMoB,WAAU,GAAIrB,OAAO,CAACsB,SAAS,CAACnB,CAAA,IAAKA,CAAC,CAACC,EAAC,KAAMa,QAAQ,CAAC;UAE7D,IAAII,WAAU,KAAM,CAAC,CAAC,EAAE;YACpB;YACArB,OAAO,CAACqB,WAAW,CAAC,CAACE,WAAU,GAAI,IAAI;;YAEvC;YACA,MAAMX,IAAG,GAAI,MAAM9B,UAAU,CAAC+B,OAAO,CAAClB,MAAM,CAACM,KAAK,CAAC;YACnD,MAAMuB,aAAY,GAAI;cAClB,GAAGZ,IAAI,CAACa,YAAY;cACpBzB,OAAO,EAAEA;YACb,CAAC;YAED,MAAM0B,EAAE,CAACC,KAAK,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,MAAM,CAAClC,MAAM,CAACM,KAAK,EACzC6B,MAAM,CAAClB,IAAG,IAAK;cACZA,IAAI,CAACa,YAAW,GAAID,aAAa;cACjCZ,IAAI,CAACmB,SAAQ,GAAI,IAAIC,IAAI,CAAC,CAAC;YAC/B,CAAC,CAAC;;YAEN;YACAjD,UAAU,CAACkB,KAAI,GAAI,CAAC,GAAGD,OAAO,CAAC;YAE/BR,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;UACnC;QACJ,EAAE,OAAOsB,KAAK,EAAE;UACZvB,OAAO,CAACuB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QACpD;MACJ;IACJ,CAAC;IAED,MAAMkB,oBAAmB,GAAI,MAAOhB,QAAQ,IAAK;MAC7CzB,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEwB,QAAQ,CAAC;MAEnE,IAAItB,MAAM,CAACM,KAAI,IAAKnB,UAAU,EAAE;QAC5B,IAAI;UACA;UACA,MAAMkB,OAAM,GAAIjB,UAAU,CAACkB,KAAI,IAAK,EAAE;UACtC,MAAMoB,WAAU,GAAIrB,OAAO,CAACsB,SAAS,CAACnB,CAAA,IAAKA,CAAC,CAACC,EAAC,KAAMa,QAAQ,CAAC;UAE7D,IAAII,WAAU,KAAM,CAAC,CAAC,EAAE;YACpB;YACArB,OAAO,CAACqB,WAAW,CAAC,CAACa,WAAU,GAAI,CAAClC,OAAO,CAACqB,WAAW,CAAC,CAACa,WAAW;;YAEpE;YACA,MAAMtB,IAAG,GAAI,MAAM9B,UAAU,CAAC+B,OAAO,CAAClB,MAAM,CAACM,KAAK,CAAC;YACnD,MAAMuB,aAAY,GAAI;cAClB,GAAGZ,IAAI,CAACa,YAAY;cACpBzB,OAAO,EAAEA;YACb,CAAC;YAED,MAAM0B,EAAE,CAACC,KAAK,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,MAAM,CAAClC,MAAM,CAACM,KAAK,EACzC6B,MAAM,CAAClB,IAAG,IAAK;cACZA,IAAI,CAACa,YAAW,GAAID,aAAa;cACjCZ,IAAI,CAACmB,SAAQ,GAAI,IAAIC,IAAI,CAAC,CAAC;YAC/B,CAAC,CAAC;;YAEN;YACAjD,UAAU,CAACkB,KAAI,GAAI,CAAC,GAAGD,OAAO,CAAC;YAE/BR,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;UAC3C;QACJ,EAAE,OAAOsB,KAAK,EAAE;UACZvB,OAAO,CAACuB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;QAC3D;MACJ;IACJ,CAAC;IAED,MAAMoB,cAAa,GAAI,MAAOlB,QAAQ,IAAK;MACvCzB,OAAO,CAACC,GAAG,CAAC,oDAAoD,EAAEwB,QAAQ,CAAC;MAC3EzB,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEE,MAAM,CAACM,KAAK,CAAC;MAE5C,IAAIN,MAAM,CAACM,KAAI,IAAKnB,UAAU,EAAE;QAC5B,IAAI;UACA;UACA,MAAMA,UAAU,CAACkB,OAAO,CAACoC,QAAQ,CAACzC,MAAM,CAACM,KAAK,EAAEgB,QAAQ,CAAC;;UAEzD;UACA,MAAMnC,UAAU,CAACkB,OAAO,CAACc,QAAQ,CAACnB,MAAM,CAACM,KAAK,CAAC;UAE/CT,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAChD,EAAE,OAAOsB,KAAK,EAAE;UACZvB,OAAO,CAACuB,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QACpD;MACJ,OAAO;QACHvB,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;MAChE;IACJ,CAAC;;IAED;IACAd,KAAK,CAAC,MAAMI,UAAU,CAACkB,KAAK,EAAE,CAACoC,MAAM,EAAEC,MAAM,KAAK;MAC9C9C,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;QAC/B8C,GAAG,EAAEF,MAAM,EAAEnC,GAAG,CAACC,CAAA,KAAM;UAACC,EAAE,EAAED,CAAC,CAACC,EAAE;UAAEC,MAAM,EAAEF,CAAC,CAACE;QAAM,CAAC,CAAC,CAAC;QACrDmC,GAAG,EAAEF,MAAM,EAAEpC,GAAG,CAACC,CAAA,KAAM;UAACC,EAAE,EAAED,CAAC,CAACC,EAAE;UAAEC,MAAM,EAAEF,CAAC,CAACE;QAAM,CAAC,CAAC;MACxD,CAAC,CAAC;IACN,CAAC,EAAE;MAAEoC,IAAI,EAAE,IAAI;MAAEC,SAAS,EAAE;IAAK,CAAC,CAAC;;IAEnC;IACAhE,SAAS,CAAC,MAAM;MACZc,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC9B,CAAC,CAAC;IAEF,OAAO;MACH;MACAC,WAAW;MACXC,MAAM;MACNC,IAAI;MAEJ;MACAC,OAAO;MACPC,SAAS;MAET;MACAC,aAAa;MACbf,cAAc,EAAEyB,qBAAqB;MAErC;MACAC,UAAU;MACVM,WAAW;MACXI,cAAc;MACda,oBAAoB;MACpBE;IACJ,CAAC;EACL;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}