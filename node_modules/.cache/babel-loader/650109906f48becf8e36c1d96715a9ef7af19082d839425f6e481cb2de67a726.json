{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport { appConfig } from '@/config/applications';\n\n// import { OSIHelper } from '@/apps/system/OSIHelper/OSIHelper.vue';\n\nexport const useOsStore = defineStore('os', () => {\n  const windows = ref([]);\n  const activeWindowId = ref(null);\n  let nextZIndex = 100;\n  const activateWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      activeWindowId.value = windowId;\n      windows.value.forEach(w => {\n        if (w.id === windowId) {\n          w.zIndex = nextZIndex++;\n        }\n      });\n    }\n  };\n\n  // const openWindow = (appData) => {\n  //     const appName = appData.name;\n  //     const appTitle = appData.label;\n  //     const contentApp = appData.contentapp;\n\n  //     const newWindow = {\n  //         ...appData,\n  //         id: Date.now().toString(),\n  //         appName: appName,\n  //         contentApp: contentApp,\n  //         title: appTitle,\n  //         isMinimized: (appData.isMinimized) ? appData.isMinimized : false,\n  //         isMaximized: (appData.isMaximized) ? appData.isMaximized : false,            \n  //         zIndex: nextZIndex++            \n  //     };\n\n  //     windows.value.push(newWindow);\n  //     activateWindow(newWindow.id);\n\n  //     return newWindow.id;\n  // };\n  const openWindow = appData => {\n    // Получаем полную конфигурацию приложения\n    const app = appConfig.getAppByName(appData.name);\n    const newWindow = {\n      ...appData,\n      id: Date.now().toString(),\n      appName: appData.name,\n      contentApp: appData.contentapp,\n      title: appData.label,\n      isMinimized: appData.isMinimized || false,\n      isMaximized: appData.isMaximized || false,\n      zIndex: nextZIndex++,\n      // Добавляем конфигурацию приложения для удобства\n      appConfig: app\n    };\n    windows.value.push(newWindow);\n    activateWindow(newWindow.id);\n    return newWindow.id;\n  };\n  const closeWindow = windowId => {\n    const index = windows.value.findIndex(w => w.id === windowId);\n    if (index !== -1) {\n      windows.value.splice(index, 1);\n    }\n  };\n  const minimizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = true;\n    }\n  };\n  const restoreWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = false;\n      activateWindow(windowId);\n    }\n  };\n  const toggleMaximizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMaximized = !window.isMaximized;\n      activateWindow(windowId);\n    }\n  };\n  return {\n    windows,\n    activeWindowId,\n    openWindow,\n    closeWindow,\n    minimizeWindow,\n    restoreWindow,\n    toggleMaximizeWindow,\n    activateWindow\n  };\n});","map":{"version":3,"names":["defineStore","ref","appConfig","useOsStore","windows","activeWindowId","nextZIndex","activateWindow","windowId","window","value","find","w","id","forEach","zIndex","openWindow","appData","app","getAppByName","name","newWindow","Date","now","toString","appName","contentApp","contentapp","title","label","isMinimized","isMaximized","push","closeWindow","index","findIndex","splice","minimizeWindow","restoreWindow","toggleMaximizeWindow"],"sources":["/home/kup/my_projects/vue/osi/src/stores/os.store.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport { appConfig } from '@/config/applications';\n\n// import { OSIHelper } from '@/apps/system/OSIHelper/OSIHelper.vue';\n\nexport const useOsStore = defineStore('os', () => {\n    const windows = ref([]);\n    const activeWindowId = ref(null);\n    \n    let nextZIndex = 100;\n  \n    const activateWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n        \n        if (window) {\n            activeWindowId.value = windowId;\n            windows.value.forEach(w => {\n                if (w.id === windowId) {\n                    w.zIndex = nextZIndex++;\n                }\n            });\n        }\n    };\n  \n    // const openWindow = (appData) => {\n    //     const appName = appData.name;\n    //     const appTitle = appData.label;\n    //     const contentApp = appData.contentapp;\n\n    //     const newWindow = {\n    //         ...appData,\n    //         id: Date.now().toString(),\n    //         appName: appName,\n    //         contentApp: contentApp,\n    //         title: appTitle,\n    //         isMinimized: (appData.isMinimized) ? appData.isMinimized : false,\n    //         isMaximized: (appData.isMaximized) ? appData.isMaximized : false,            \n    //         zIndex: nextZIndex++            \n    //     };\n    \n    //     windows.value.push(newWindow);\n    //     activateWindow(newWindow.id);\n    \n    //     return newWindow.id;\n    // };\n    const openWindow = (appData) => {\n        // Получаем полную конфигурацию приложения\n        const app = appConfig.getAppByName(appData.name);\n        \n        const newWindow = {\n            ...appData,\n            id: Date.now().toString(),\n            appName: appData.name,\n            contentApp: appData.contentapp,\n            title: appData.label,\n            isMinimized: appData.isMinimized || false,\n            isMaximized: appData.isMaximized || false,            \n            zIndex: nextZIndex++,\n            // Добавляем конфигурацию приложения для удобства\n            appConfig: app\n        };\n    \n        windows.value.push(newWindow);\n        activateWindow(newWindow.id);\n    \n        return newWindow.id;\n    };\n  \n    const closeWindow = (windowId) => {\n        const index = windows.value.findIndex(w => w.id === windowId);\n        \n        if (index !== -1) {\n            windows.value.splice(index, 1);\n        }\n    };\n  \n    const minimizeWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n        \n        if (window) {\n            window.isMinimized = true;\n        }\n    };\n  \n    const restoreWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n    \n        if (window) {\n            window.isMinimized = false;\n            activateWindow(windowId);\n        }\n    };\n  \n    const toggleMaximizeWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n\n        if (window) {\n            window.isMaximized = !window.isMaximized;\n            activateWindow(windowId);\n        }\n    }\n  \n    return {\n        windows,\n        activeWindowId,\n        openWindow,\n        closeWindow,\n        minimizeWindow,\n        restoreWindow,\n        toggleMaximizeWindow,\n        activateWindow\n    }\n})"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}