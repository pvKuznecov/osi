{"ast":null,"code":"export default {\n  name: \"SimpleWindow\",\n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    },\n    isMinimized: {\n      type: Boolean,\n      default: false\n    },\n    isActive: {\n      type: Boolean,\n      default: false\n    },\n    isMaximized: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'minimize', 'focus', 'toggleMaximize'],\n  data() {\n    return {\n      posX: 100,\n      posY: 100,\n      windowWidth: 400,\n      windowHeight: 300,\n      isDragging: false,\n      dragOffset: {\n        x: 0,\n        y: 0\n      }\n    };\n  },\n  computed: {\n    windowStyles() {\n      if (this.isMaximized) {\n        return {\n          left: '0',\n          top: '0',\n          width: '100vw',\n          height: '100vh',\n          borderRadius: '0'\n        };\n      } else {\n        return {\n          left: `${this.posX}px`,\n          top: `${this.posY}px`,\n          width: `${this.windowWidth}px`,\n          height: `${this.windowHeight}px`\n        };\n      }\n    }\n  },\n  mounted() {\n    document.addEventListener('mousemove', this.handleMouseMove);\n    document.addEventListener('mouseup', this.handleMouseUp);\n  },\n  beforeUnmount() {\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n  },\n  methods: {\n    // Активация окна при клике\n    activateWindow() {\n      this.$emit('focus', this.windowId);\n    },\n    // Начало перетаскивания\n    startDrag(e) {\n      // Сначала активируем окно\n      this.$emit('focus', this.windowId);\n\n      // Если окно максимизировано - не перетаскиваем\n      if (this.isMaximized) return;\n\n      // Начинаем перетаскивание\n      this.isDragging = true;\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      };\n      e.stopPropagation();\n    },\n    // Перетаскивание окна\n    handleMouseMove(e) {\n      if (this.isDragging && !this.isMaximized) {\n        // Рассчитываем новую позицию\n        let newX = e.clientX - this.dragOffset.x;\n        let newY = e.clientY - this.dragOffset.y;\n\n        // Ограничиваем позицию экраном\n        const maxX = window.innerWidth - this.windowWidth;\n        const maxY = window.innerHeight - this.windowHeight;\n        this.posX = Math.max(0, Math.min(newX, maxX));\n        this.posY = Math.max(0, Math.min(newY, maxY));\n      }\n    },\n    // Окончание перетаскивания\n    handleMouseUp() {\n      this.isDragging = false;\n    },\n    // Сворачивание окна\n    minimize() {\n      this.$emit('minimize', this.windowId);\n    },\n    // Переключение максимизации\n    toggleMaximize() {\n      this.$emit('toggleMaximize', this.windowId);\n    },\n    // Закрытие окна\n    close() {\n      this.$emit('close', this.windowId);\n    }\n  }\n};","map":{"version":3,"names":["name","props","windowId","String","title","type","default","appName","isMinimized","Boolean","isActive","isMaximized","emits","data","posX","posY","windowWidth","windowHeight","isDragging","dragOffset","x","y","computed","windowStyles","left","top","width","height","borderRadius","mounted","document","addEventListener","handleMouseMove","handleMouseUp","beforeUnmount","removeEventListener","methods","activateWindow","$emit","startDrag","e","clientX","clientY","stopPropagation","newX","newY","maxX","window","innerWidth","maxY","innerHeight","Math","max","min","minimize","toggleMaximize","close"],"sources":["/home/kup/my_projects/vue/osi/src/components/os/SimpleWindow/SimpleWindow.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\n<style src=\"./style.css\"></style>\n<script>\n    export default {\n  name: \"SimpleWindow\",\n  \n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    },\n    isMinimized: {\n      type: Boolean,\n      default: false\n    },\n    isActive: {\n      type: Boolean,\n      default: false\n    },\n    isMaximized: {\n      type: Boolean,\n      default: false\n    }\n  },\n  \n  emits: ['close', 'minimize', 'focus', 'toggleMaximize'],\n  \n  data() {\n    return {\n      posX: 100,\n      posY: 100,\n      windowWidth: 400,\n      windowHeight: 300,\n      isDragging: false,\n      dragOffset: { x: 0, y: 0 }\n    }\n  },\n  \n  computed: {\n    windowStyles() {\n      if (this.isMaximized) {\n        return {\n          left: '0',\n          top: '0',\n          width: '100vw',\n          height: '100vh',\n          borderRadius: '0'\n        }\n      } else {\n        return {\n          left: `${this.posX}px`,\n          top: `${this.posY}px`,\n          width: `${this.windowWidth}px`,\n          height: `${this.windowHeight}px`\n        }\n      }\n    }\n  },\n  \n  mounted() {\n    document.addEventListener('mousemove', this.handleMouseMove)\n    document.addEventListener('mouseup', this.handleMouseUp)\n  },\n  \n  beforeUnmount() {\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('mouseup', this.handleMouseUp)\n  },\n  \n  methods: {\n    // Активация окна при клике\n    activateWindow() {\n      this.$emit('focus', this.windowId)\n    },\n    \n    // Начало перетаскивания\n    startDrag(e) {\n      // Сначала активируем окно\n      this.$emit('focus', this.windowId)\n      \n      // Если окно максимизировано - не перетаскиваем\n      if (this.isMaximized) return\n      \n      // Начинаем перетаскивание\n      this.isDragging = true\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      }\n      \n      e.stopPropagation()\n    },\n    \n    // Перетаскивание окна\n    handleMouseMove(e) {\n      if (this.isDragging && !this.isMaximized) {\n        // Рассчитываем новую позицию\n        let newX = e.clientX - this.dragOffset.x\n        let newY = e.clientY - this.dragOffset.y\n        \n        // Ограничиваем позицию экраном\n        const maxX = window.innerWidth - this.windowWidth\n        const maxY = window.innerHeight - this.windowHeight\n        \n        this.posX = Math.max(0, Math.min(newX, maxX))\n        this.posY = Math.max(0, Math.min(newY, maxY))\n      }\n    },\n    \n    // Окончание перетаскивания\n    handleMouseUp() {\n      this.isDragging = false\n    },\n    \n    // Сворачивание окна\n    minimize() {\n      this.$emit('minimize', this.windowId)\n    },\n    \n    // Переключение максимизации\n    toggleMaximize() {\n      this.$emit('toggleMaximize', this.windowId)\n    },\n    \n    // Закрытие окна\n    close() {\n      this.$emit('close', this.windowId)\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}