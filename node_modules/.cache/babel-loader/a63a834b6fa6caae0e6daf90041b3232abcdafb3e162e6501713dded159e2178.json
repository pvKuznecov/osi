{"ast":null,"code":"export class CommonTagMapper {\n  static toIntOrNull(str) {\n    const cleaned = Number.parseInt(str, 10);\n    return Number.isNaN(cleaned) ? null : cleaned;\n  }\n  // TODO: a string of 1of1 would fail to be converted\n  // converts 1/10 to no : 1, of : 10\n  // or 1 to no : 1, of : 0\n  static normalizeTrack(origVal) {\n    const split = origVal.toString().split('/');\n    return {\n      no: Number.parseInt(split[0], 10) || null,\n      of: Number.parseInt(split[1], 10) || null\n    };\n  }\n  constructor(tagTypes, tagMap) {\n    this.tagTypes = tagTypes;\n    this.tagMap = tagMap;\n  }\n  /**\n   * Process and set common tags\n   * write common tags to\n   * @param tag Native tag\n   * @param warnings Register warnings\n   * @return common name\n   */\n  mapGenericTag(tag, warnings) {\n    tag = {\n      id: tag.id,\n      value: tag.value\n    }; // clone object\n    this.postMap(tag, warnings);\n    // Convert native tag event to generic 'alias' tag\n    const id = this.getCommonName(tag.id);\n    return id ? {\n      id,\n      value: tag.value\n    } : null;\n  }\n  /**\n   * Convert native tag key to common tag key\n   * @param tag Native header tag\n   * @return common tag name (alias)\n   */\n  getCommonName(tag) {\n    return this.tagMap[tag];\n  }\n  /**\n   * Handle post mapping exceptions / correction\n   * @param tag Tag e.g. {\"©alb\", \"Buena Vista Social Club\")\n   * @param warnings Used to register warnings\n   */\n  postMap(_tag, _warnings) {\n    return;\n  }\n}\nCommonTagMapper.maxRatingScore = 1;","map":{"version":3,"names":["CommonTagMapper","toIntOrNull","str","cleaned","Number","parseInt","isNaN","normalizeTrack","origVal","split","toString","no","of","constructor","tagTypes","tagMap","mapGenericTag","tag","warnings","id","value","postMap","getCommonName","_tag","_warnings","maxRatingScore"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/common/GenericTagMapper.js"],"sourcesContent":["export class CommonTagMapper {\n    static toIntOrNull(str) {\n        const cleaned = Number.parseInt(str, 10);\n        return Number.isNaN(cleaned) ? null : cleaned;\n    }\n    // TODO: a string of 1of1 would fail to be converted\n    // converts 1/10 to no : 1, of : 10\n    // or 1 to no : 1, of : 0\n    static normalizeTrack(origVal) {\n        const split = origVal.toString().split('/');\n        return {\n            no: Number.parseInt(split[0], 10) || null,\n            of: Number.parseInt(split[1], 10) || null\n        };\n    }\n    constructor(tagTypes, tagMap) {\n        this.tagTypes = tagTypes;\n        this.tagMap = tagMap;\n    }\n    /**\n     * Process and set common tags\n     * write common tags to\n     * @param tag Native tag\n     * @param warnings Register warnings\n     * @return common name\n     */\n    mapGenericTag(tag, warnings) {\n        tag = { id: tag.id, value: tag.value }; // clone object\n        this.postMap(tag, warnings);\n        // Convert native tag event to generic 'alias' tag\n        const id = this.getCommonName(tag.id);\n        return id ? { id, value: tag.value } : null;\n    }\n    /**\n     * Convert native tag key to common tag key\n     * @param tag Native header tag\n     * @return common tag name (alias)\n     */\n    getCommonName(tag) {\n        return this.tagMap[tag];\n    }\n    /**\n     * Handle post mapping exceptions / correction\n     * @param tag Tag e.g. {\"©alb\", \"Buena Vista Social Club\")\n     * @param warnings Used to register warnings\n     */\n    postMap(_tag, _warnings) {\n        return;\n    }\n}\nCommonTagMapper.maxRatingScore = 1;\n"],"mappings":"AAAA,OAAO,MAAMA,eAAe,CAAC;EACzB,OAAOC,WAAWA,CAACC,GAAG,EAAE;IACpB,MAAMC,OAAO,GAAGC,MAAM,CAACC,QAAQ,CAACH,GAAG,EAAE,EAAE,CAAC;IACxC,OAAOE,MAAM,CAACE,KAAK,CAACH,OAAO,CAAC,GAAG,IAAI,GAAGA,OAAO;EACjD;EACA;EACA;EACA;EACA,OAAOI,cAAcA,CAACC,OAAO,EAAE;IAC3B,MAAMC,KAAK,GAAGD,OAAO,CAACE,QAAQ,CAAC,CAAC,CAACD,KAAK,CAAC,GAAG,CAAC;IAC3C,OAAO;MACHE,EAAE,EAAEP,MAAM,CAACC,QAAQ,CAACI,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,IAAI;MACzCG,EAAE,EAAER,MAAM,CAACC,QAAQ,CAACI,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI;IACzC,CAAC;EACL;EACAI,WAAWA,CAACC,QAAQ,EAAEC,MAAM,EAAE;IAC1B,IAAI,CAACD,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,MAAM,GAAGA,MAAM;EACxB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,aAAaA,CAACC,GAAG,EAAEC,QAAQ,EAAE;IACzBD,GAAG,GAAG;MAAEE,EAAE,EAAEF,GAAG,CAACE,EAAE;MAAEC,KAAK,EAAEH,GAAG,CAACG;IAAM,CAAC,CAAC,CAAC;IACxC,IAAI,CAACC,OAAO,CAACJ,GAAG,EAAEC,QAAQ,CAAC;IAC3B;IACA,MAAMC,EAAE,GAAG,IAAI,CAACG,aAAa,CAACL,GAAG,CAACE,EAAE,CAAC;IACrC,OAAOA,EAAE,GAAG;MAAEA,EAAE;MAAEC,KAAK,EAAEH,GAAG,CAACG;IAAM,CAAC,GAAG,IAAI;EAC/C;EACA;AACJ;AACA;AACA;AACA;EACIE,aAAaA,CAACL,GAAG,EAAE;IACf,OAAO,IAAI,CAACF,MAAM,CAACE,GAAG,CAAC;EAC3B;EACA;AACJ;AACA;AACA;AACA;EACII,OAAOA,CAACE,IAAI,EAAEC,SAAS,EAAE;IACrB;EACJ;AACJ;AACAxB,eAAe,CAACyB,cAAc,GAAG,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}