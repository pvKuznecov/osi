{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\nimport TaskBar from './components/os/TaskBar/TaskBar.vue';\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\nimport { useOsStore } from './stores/os.store';\nimport { useAppsStore } from './stores/apps.store';\n// import { usersTable } from './idb/db';\nimport { IDBWindows } from './idb/db';\n// import { ref } from 'vue';\n\nexport default {\n  name: 'App',\n  components: {\n    AutorizationArea,\n    DesktopArea,\n    TaskBar,\n    SimpleWindow\n  },\n  data() {\n    return {\n      isAutorized: false,\n      // osStore: null,\n      appsStore: null,\n      USERID: null,\n      USER: {}\n      // useAppsStore: null\n      // usersTable: null,\n      // IDBWindows: ref(IDBWindows),\n    };\n  },\n  computed: {\n    IDBWindows() {\n      return IDBWindows.value;\n    },\n    osStore() {\n      return useOsStore();\n    },\n    appsStore() {\n      return useAppsStore();\n    }\n  },\n  // created() {\n  //     this.osStore = useOsStore();\n  //     this.appsStore = useAppsStore();\n  //     // this.useAppsStore = useAppsStore();\n  //     this.usersTable = usersTable;\n  //     // this.IDBWindows = IDBWindows;\n  // },\n\n  methods: {\n    closeWindow(windowId) {\n      // if (this.osStore) { this.osStore.closeWindow(windowId); }\n      if (this.usersTable) {\n        this.usersTable.windows.close(this.USERID, windowId);\n        this.usersTable.windows.reupdate(this.USERID);\n        // this.IDBWindows = IDBWindows;\n      }\n      if (this.appsStore) {\n        this.appsStore.deleteWindowState(windowId);\n      }\n    },\n    minimizeWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.minimizeWindow(windowId);\n      }\n    },\n    toggleMaximizeWindow(windowId) {\n      if (this.osStore) {\n        this.osStore.toggleMaximizeWindow(windowId);\n      }\n    },\n    activateWindow(windowId) {\n      // if (this.osStore) { this.osStore.activateWindow(windowId); }\n      if (this.usersTable) {\n        this.usersTable.windows.activate(this.USERID, windowId);\n      }\n    },\n    selectUser(userId) {\n      this.USERID = userId;\n      if (this.usersTable) this.usersTable.windows.reupdate(this.USERID);\n      this.isAutorized = true;\n    }\n  }\n};","map":{"version":3,"names":["AutorizationArea","DesktopArea","TaskBar","SimpleWindow","useOsStore","useAppsStore","IDBWindows","name","components","data","isAutorized","appsStore","USERID","USER","computed","value","osStore","methods","closeWindow","windowId","usersTable","windows","close","reupdate","deleteWindowState","minimizeWindow","toggleMaximizeWindow","activateWindow","activate","selectUser","userId"],"sources":["/home/kup/my_projects/vue/osi/src/App.vue"],"sourcesContent":["<template>\n    <AutorizationArea v-if=\"!isAutorized\" @selectUser=\"selectUser\" />\n    <div v-if=\"isAutorized\" class=\"webos\">\n        <DesktopArea :USERID=\"USERID\">\n            <SimpleWindow v-for=\"window in IDBWindows\"\n                :key=\"window.id\"\n                :windowId=\"window.id\"\n                :title=\"window.label\"\n                :appName=\"window.name\"\n        \n                :contentApp=\"window.contentApp\"\n                :icon=\"window.icon\"\n                :iconclass=\"window.iconclass\"\n                :defWidth=\"window.defWidth\"\n                :defHeight=\"window.defHeight\"\n                :isMinimized=\"window.isMinimized\"\n                :isActive=\"osStore.activeWindowId === window.id\"\n                :isMaximized=\"window.isMaximized\"\n                :zIndex=\"window.zIndex\"\n                :resizable=\"window.resizable\"\n                :canMinimize=\"window.canMinimize\"\n\n                :USERID=\"USERID\"\n                \n                @close=\"closeWindow\"\n                @minimize=\"minimizeWindow\"\n                @toggleMaximize=\"toggleMaximizeWindow\"\n                @focus=\"activateWindow\"                \n            />\n        </DesktopArea>\n        <TaskBar :USERID=\"USERID\" />\n    </div>\n</template>\n<style src=\"./styles/global.css\"></style>\n<script>\n    import AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\n    import DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\n    import TaskBar from './components/os/TaskBar/TaskBar.vue';\n    import SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\n    import { useOsStore } from './stores/os.store';\n    import { useAppsStore } from './stores/apps.store';\n    // import { usersTable } from './idb/db';\n    import { IDBWindows } from './idb/db';\n    // import { ref } from 'vue';\n\n    export default {\n        name: 'App',\n  \n        components: {\n            AutorizationArea,\n            DesktopArea,\n            TaskBar,\n            SimpleWindow\n        },\n  \n        data() {\n            return {\n                isAutorized: false,\n                // osStore: null,\n                appsStore: null,\n                USERID: null,\n                USER: {},\n                // useAppsStore: null\n                // usersTable: null,\n                // IDBWindows: ref(IDBWindows),\n            }\n        },\n\n        computed: {\n            IDBWindows() { return IDBWindows.value; },\n            osStore() { return useOsStore(); },\n            appsStore() { return useAppsStore(); },\n        },\n\n        // created() {\n        //     this.osStore = useOsStore();\n        //     this.appsStore = useAppsStore();\n        //     // this.useAppsStore = useAppsStore();\n        //     this.usersTable = usersTable;\n        //     // this.IDBWindows = IDBWindows;\n        // },\n  \n        methods: {\n            closeWindow(windowId) {\n                // if (this.osStore) { this.osStore.closeWindow(windowId); }\n                if (this.usersTable) {\n                    this.usersTable.windows.close(this.USERID, windowId);\n                    this.usersTable.windows.reupdate(this.USERID);\n                    // this.IDBWindows = IDBWindows;\n                }\n\n                if (this.appsStore) { this.appsStore.deleteWindowState(windowId); }\n            },\n    \n            minimizeWindow(windowId) {\n                if (this.osStore) { this.osStore.minimizeWindow(windowId); }\n            },\n    \n            toggleMaximizeWindow(windowId) {\n                if (this.osStore) { this.osStore.toggleMaximizeWindow(windowId); }\n            },\n    \n            activateWindow(windowId) {\n                // if (this.osStore) { this.osStore.activateWindow(windowId); }\n                if (this.usersTable) { this.usersTable.windows.activate(this.USERID, windowId); }\n            },\n\n            selectUser(userId) {\n                this.USERID = userId;\n\n                if (this.usersTable) this.usersTable.windows.reupdate(this.USERID);\n                \n                this.isAutorized = true;\n            }\n        },\n    }\n</script>"],"mappings":";AAmCI,OAAOA,gBAAe,MAAO,uDAAuD;AACpF,OAAOC,WAAU,MAAO,6CAA6C;AACrE,OAAOC,OAAM,MAAO,qCAAqC;AACzD,OAAOC,YAAW,MAAO,+CAA+C;AACxE,SAASC,UAAS,QAAS,mBAAmB;AAC9C,SAASC,YAAW,QAAS,qBAAqB;AAClD;AACA,SAASC,UAAS,QAAS,UAAU;AACrC;;AAEA,eAAe;EACXC,IAAI,EAAE,KAAK;EAEXC,UAAU,EAAE;IACRR,gBAAgB;IAChBC,WAAW;IACXC,OAAO;IACPC;EACJ,CAAC;EAEDM,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,WAAW,EAAE,KAAK;MAClB;MACAC,SAAS,EAAE,IAAI;MACfC,MAAM,EAAE,IAAI;MACZC,IAAI,EAAE,CAAC;MACP;MACA;MACA;IACJ;EACJ,CAAC;EAEDC,QAAQ,EAAE;IACNR,UAAUA,CAAA,EAAG;MAAE,OAAOA,UAAU,CAACS,KAAK;IAAE,CAAC;IACzCC,OAAOA,CAAA,EAAG;MAAE,OAAOZ,UAAU,CAAC,CAAC;IAAE,CAAC;IAClCO,SAASA,CAAA,EAAG;MAAE,OAAON,YAAY,CAAC,CAAC;IAAE;EACzC,CAAC;EAED;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAY,OAAO,EAAE;IACLC,WAAWA,CAACC,QAAQ,EAAE;MAClB;MACA,IAAI,IAAI,CAACC,UAAU,EAAE;QACjB,IAAI,CAACA,UAAU,CAACC,OAAO,CAACC,KAAK,CAAC,IAAI,CAACV,MAAM,EAAEO,QAAQ,CAAC;QACpD,IAAI,CAACC,UAAU,CAACC,OAAO,CAACE,QAAQ,CAAC,IAAI,CAACX,MAAM,CAAC;QAC7C;MACJ;MAEA,IAAI,IAAI,CAACD,SAAS,EAAE;QAAE,IAAI,CAACA,SAAS,CAACa,iBAAiB,CAACL,QAAQ,CAAC;MAAE;IACtE,CAAC;IAEDM,cAAcA,CAACN,QAAQ,EAAE;MACrB,IAAI,IAAI,CAACH,OAAO,EAAE;QAAE,IAAI,CAACA,OAAO,CAACS,cAAc,CAACN,QAAQ,CAAC;MAAE;IAC/D,CAAC;IAEDO,oBAAoBA,CAACP,QAAQ,EAAE;MAC3B,IAAI,IAAI,CAACH,OAAO,EAAE;QAAE,IAAI,CAACA,OAAO,CAACU,oBAAoB,CAACP,QAAQ,CAAC;MAAE;IACrE,CAAC;IAEDQ,cAAcA,CAACR,QAAQ,EAAE;MACrB;MACA,IAAI,IAAI,CAACC,UAAU,EAAE;QAAE,IAAI,CAACA,UAAU,CAACC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAChB,MAAM,EAAEO,QAAQ,CAAC;MAAE;IACpF,CAAC;IAEDU,UAAUA,CAACC,MAAM,EAAE;MACf,IAAI,CAAClB,MAAK,GAAIkB,MAAM;MAEpB,IAAI,IAAI,CAACV,UAAU,EAAE,IAAI,CAACA,UAAU,CAACC,OAAO,CAACE,QAAQ,CAAC,IAAI,CAACX,MAAM,CAAC;MAElE,IAAI,CAACF,WAAU,GAAI,IAAI;IAC3B;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}