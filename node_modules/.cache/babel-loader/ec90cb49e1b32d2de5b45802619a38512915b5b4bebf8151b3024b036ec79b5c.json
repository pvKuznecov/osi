{"ast":null,"code":"import * as Token from 'token-types';\nimport * as util from '../common/Util.js';\n/**\n * The picture type according to the ID3v2 APIC frame\n * Ref: http://id3.org/id3v2.3.0#Attached_picture\n */\nexport const AttachedPictureType = {\n  0: 'Other',\n  1: \"32x32 pixels 'file icon' (PNG only)\",\n  2: 'Other file icon',\n  3: 'Cover (front)',\n  4: 'Cover (back)',\n  5: 'Leaflet page',\n  6: 'Media (e.g. label side of CD)',\n  7: 'Lead artist/lead performer/soloist',\n  8: 'Artist/performer',\n  9: 'Conductor',\n  10: 'Band/Orchestra',\n  11: 'Composer',\n  12: 'Lyricist/text writer',\n  13: 'Recording Location',\n  14: 'During recording',\n  15: 'During performance',\n  16: 'Movie/video screen capture',\n  17: 'A bright coloured fish',\n  18: 'Illustration',\n  19: 'Band/artist logotype',\n  20: 'Publisher/Studio logotype'\n};\n/**\n * https://id3.org/id3v2.3.0#Synchronised_lyrics.2Ftext\n */\nexport const LyricsContentType = {\n  other: 0,\n  lyrics: 1,\n  text: 2,\n  movement_part: 3,\n  events: 4,\n  chord: 5,\n  trivia_pop: 6\n};\nexport const TimestampFormat = {\n  notSynchronized: 0,\n  mpegFrameNumber: 1,\n  milliseconds: 2\n};\n/**\n * 28 bits (representing up to 256MB) integer, the msb is 0 to avoid 'false syncsignals'.\n * 4 * %0xxxxxxx\n */\nexport const UINT32SYNCSAFE = {\n  get: (buf, off) => {\n    return buf[off + 3] & 0x7f | buf[off + 2] << 7 | buf[off + 1] << 14 | buf[off] << 21;\n  },\n  len: 4\n};\n/**\n * ID3v2 header\n * Ref: http://id3.org/id3v2.3.0#ID3v2_header\n * ToDo\n */\nexport const ID3v2Header = {\n  len: 10,\n  get: (buf, off) => {\n    return {\n      // ID3v2/file identifier   \"ID3\"\n      fileIdentifier: new Token.StringType(3, 'ascii').get(buf, off),\n      // ID3v2 versionIndex\n      version: {\n        major: Token.INT8.get(buf, off + 3),\n        revision: Token.INT8.get(buf, off + 4)\n      },\n      // ID3v2 flags\n      flags: {\n        // Unsynchronisation\n        unsynchronisation: util.getBit(buf, off + 5, 7),\n        // Extended header\n        isExtendedHeader: util.getBit(buf, off + 5, 6),\n        // Experimental indicator\n        expIndicator: util.getBit(buf, off + 5, 5),\n        footer: util.getBit(buf, off + 5, 4)\n      },\n      size: UINT32SYNCSAFE.get(buf, off + 6)\n    };\n  }\n};\nexport const ExtendedHeader = {\n  len: 10,\n  get: (buf, off) => {\n    return {\n      // Extended header size\n      size: Token.UINT32_BE.get(buf, off),\n      // Extended Flags\n      extendedFlags: Token.UINT16_BE.get(buf, off + 4),\n      // Size of padding\n      sizeOfPadding: Token.UINT32_BE.get(buf, off + 6),\n      // CRC data present\n      crcDataPresent: util.getBit(buf, off + 4, 31)\n    };\n  }\n};\nexport const TextEncodingToken = {\n  len: 1,\n  get: (uint8Array, off) => {\n    switch (uint8Array[off]) {\n      case 0x00:\n        return {\n          encoding: 'latin1'\n        };\n      // binary\n      case 0x01:\n        return {\n          encoding: 'utf-16le',\n          bom: true\n        };\n      case 0x02:\n        return {\n          encoding: 'utf-16le',\n          bom: false\n        };\n      case 0x03:\n        return {\n          encoding: 'utf8',\n          bom: false\n        };\n      default:\n        return {\n          encoding: 'utf8',\n          bom: false\n        };\n    }\n  }\n};\n/**\n * Used to read first portion of `SYLT` frame\n */\nexport const TextHeader = {\n  len: 4,\n  get: (uint8Array, off) => {\n    return {\n      encoding: TextEncodingToken.get(uint8Array, off),\n      language: new Token.StringType(3, 'latin1').get(uint8Array, off + 1)\n    };\n  }\n};\n/**\n * Used to read first portion of `SYLT` frame\n */\nexport const SyncTextHeader = {\n  len: 6,\n  get: (uint8Array, off) => {\n    const text = TextHeader.get(uint8Array, off);\n    return {\n      encoding: text.encoding,\n      language: text.language,\n      timeStampFormat: Token.UINT8.get(uint8Array, off + 4),\n      contentType: Token.UINT8.get(uint8Array, off + 5)\n    };\n  }\n};","map":{"version":3,"names":["Token","util","AttachedPictureType","LyricsContentType","other","lyrics","text","movement_part","events","chord","trivia_pop","TimestampFormat","notSynchronized","mpegFrameNumber","milliseconds","UINT32SYNCSAFE","get","buf","off","len","ID3v2Header","fileIdentifier","StringType","version","major","INT8","revision","flags","unsynchronisation","getBit","isExtendedHeader","expIndicator","footer","size","ExtendedHeader","UINT32_BE","extendedFlags","UINT16_BE","sizeOfPadding","crcDataPresent","TextEncodingToken","uint8Array","encoding","bom","TextHeader","language","SyncTextHeader","timeStampFormat","UINT8","contentType"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/id3v2/ID3v2Token.js"],"sourcesContent":["import * as Token from 'token-types';\nimport * as util from '../common/Util.js';\n/**\n * The picture type according to the ID3v2 APIC frame\n * Ref: http://id3.org/id3v2.3.0#Attached_picture\n */\nexport const AttachedPictureType = {\n    0: 'Other',\n    1: \"32x32 pixels 'file icon' (PNG only)\",\n    2: 'Other file icon',\n    3: 'Cover (front)',\n    4: 'Cover (back)',\n    5: 'Leaflet page',\n    6: 'Media (e.g. label side of CD)',\n    7: 'Lead artist/lead performer/soloist',\n    8: 'Artist/performer',\n    9: 'Conductor',\n    10: 'Band/Orchestra',\n    11: 'Composer',\n    12: 'Lyricist/text writer',\n    13: 'Recording Location',\n    14: 'During recording',\n    15: 'During performance',\n    16: 'Movie/video screen capture',\n    17: 'A bright coloured fish',\n    18: 'Illustration',\n    19: 'Band/artist logotype',\n    20: 'Publisher/Studio logotype'\n};\n/**\n * https://id3.org/id3v2.3.0#Synchronised_lyrics.2Ftext\n */\nexport const LyricsContentType = {\n    other: 0,\n    lyrics: 1,\n    text: 2,\n    movement_part: 3,\n    events: 4,\n    chord: 5,\n    trivia_pop: 6,\n};\nexport const TimestampFormat = {\n    notSynchronized: 0,\n    mpegFrameNumber: 1,\n    milliseconds: 2\n};\n/**\n * 28 bits (representing up to 256MB) integer, the msb is 0 to avoid 'false syncsignals'.\n * 4 * %0xxxxxxx\n */\nexport const UINT32SYNCSAFE = {\n    get: (buf, off) => {\n        return buf[off + 3] & 0x7f | ((buf[off + 2]) << 7) |\n            ((buf[off + 1]) << 14) | ((buf[off]) << 21);\n    },\n    len: 4\n};\n/**\n * ID3v2 header\n * Ref: http://id3.org/id3v2.3.0#ID3v2_header\n * ToDo\n */\nexport const ID3v2Header = {\n    len: 10,\n    get: (buf, off) => {\n        return {\n            // ID3v2/file identifier   \"ID3\"\n            fileIdentifier: new Token.StringType(3, 'ascii').get(buf, off),\n            // ID3v2 versionIndex\n            version: {\n                major: Token.INT8.get(buf, off + 3),\n                revision: Token.INT8.get(buf, off + 4)\n            },\n            // ID3v2 flags\n            flags: {\n                // Unsynchronisation\n                unsynchronisation: util.getBit(buf, off + 5, 7),\n                // Extended header\n                isExtendedHeader: util.getBit(buf, off + 5, 6),\n                // Experimental indicator\n                expIndicator: util.getBit(buf, off + 5, 5),\n                footer: util.getBit(buf, off + 5, 4)\n            },\n            size: UINT32SYNCSAFE.get(buf, off + 6)\n        };\n    }\n};\nexport const ExtendedHeader = {\n    len: 10,\n    get: (buf, off) => {\n        return {\n            // Extended header size\n            size: Token.UINT32_BE.get(buf, off),\n            // Extended Flags\n            extendedFlags: Token.UINT16_BE.get(buf, off + 4),\n            // Size of padding\n            sizeOfPadding: Token.UINT32_BE.get(buf, off + 6),\n            // CRC data present\n            crcDataPresent: util.getBit(buf, off + 4, 31)\n        };\n    }\n};\nexport const TextEncodingToken = {\n    len: 1,\n    get: (uint8Array, off) => {\n        switch (uint8Array[off]) {\n            case 0x00:\n                return { encoding: 'latin1' }; // binary\n            case 0x01:\n                return { encoding: 'utf-16le', bom: true };\n            case 0x02:\n                return { encoding: 'utf-16le', bom: false };\n            case 0x03:\n                return { encoding: 'utf8', bom: false };\n            default:\n                return { encoding: 'utf8', bom: false };\n        }\n    }\n};\n/**\n * Used to read first portion of `SYLT` frame\n */\nexport const TextHeader = {\n    len: 4,\n    get: (uint8Array, off) => {\n        return {\n            encoding: TextEncodingToken.get(uint8Array, off),\n            language: new Token.StringType(3, 'latin1').get(uint8Array, off + 1)\n        };\n    }\n};\n/**\n * Used to read first portion of `SYLT` frame\n */\nexport const SyncTextHeader = {\n    len: 6,\n    get: (uint8Array, off) => {\n        const text = TextHeader.get(uint8Array, off);\n        return {\n            encoding: text.encoding,\n            language: text.language,\n            timeStampFormat: Token.UINT8.get(uint8Array, off + 4),\n            contentType: Token.UINT8.get(uint8Array, off + 5)\n        };\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}