{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\n// os.store.js - обновленная версия\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport const useNotifStore = defineStore('os', () => {\n  const LOCALSTORAGE_KEY = \"osi_notifs\";\n  const notifs = ref([]);\n\n  // Загружаем сохраненные уведомления из localStorage при инициализации\n  const loadNotifsFromStorage = () => {\n    try {\n      const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        if (parsed && Array.isArray(parsed)) {\n          notifs.value = parsed;\n          console.log('Loaded notifs from storage:', windows.value.length);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load notifs from storage:', error);\n    }\n  };\n\n  // Сохраняем уведомления в localStorage\n  const saveNotifsToStorage = () => {\n    try {\n      const state = notifs.value.map(w => ({\n        appId: w.appId,\n        content: w.content,\n        header: w.header\n      }));\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(state));\n    } catch (error) {\n      console.error('Failed to save notifs to storage:', error);\n    }\n  };\n\n  // Инициализация\n  loadNotifsFromStorage();\n\n  // Метод для очистки всех уведомлений\n  const clearAllNotifs = () => {\n    notifs.value = [];\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n  };\n  return {\n    notifs,\n    clearAllNotifs,\n    saveNotifsToStorage\n  };\n});","map":{"version":3,"names":["defineStore","ref","useNotifStore","LOCALSTORAGE_KEY","notifs","loadNotifsFromStorage","saved","localStorage","getItem","parsed","JSON","parse","Array","isArray","value","console","log","windows","length","error","saveNotifsToStorage","state","map","w","appId","content","header","setItem","stringify","clearAllNotifs","removeItem"],"sources":["/home/kup/my_projects/vue/osi/src/stores/notif.store.js"],"sourcesContent":["// os.store.js - обновленная версия\nimport { defineStore } from 'pinia'\nimport { ref } from 'vue'\n\nexport const useNotifStore = defineStore('os', () => {\n    const LOCALSTORAGE_KEY = \"osi_notifs\";\n    const notifs = ref([]);\n\n    // Загружаем сохраненные уведомления из localStorage при инициализации\n    const loadNotifsFromStorage = () => {\n        try {\n            const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n\n            if (saved) {\n                const parsed = JSON.parse(saved);\n\n                if (parsed && Array.isArray(parsed)) {\n                    notifs.value = parsed;\n                    console.log('Loaded notifs from storage:', windows.value.length);\n                }\n            }\n        } catch (error) {\n            console.error('Failed to load notifs from storage:', error);\n        }\n    };\n    \n    // Сохраняем уведомления в localStorage\n    const saveNotifsToStorage = () => {\n        try {\n            const state = notifs.value.map(w => ({\n                    appId: w.appId,\n                    content: w.content,\n                    header: w.header,\n                }));\n            \n            localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(state));\n        } catch (error) {\n            console.error('Failed to save notifs to storage:', error);\n        }\n    };\n\n    // Инициализация\n    loadNotifsFromStorage();\n\n    // Метод для очистки всех уведомлений\n    const clearAllNotifs = () => {\n        notifs.value = [];\n        localStorage.removeItem(LOCALSTORAGE_KEY);\n    };\n\n    return {\n        notifs,\n        clearAllNotifs,\n        saveNotifsToStorage\n    };\n});"],"mappings":";;;;AAAA;AACA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,GAAG,QAAQ,KAAK;AAEzB,OAAO,MAAMC,aAAa,GAAGF,WAAW,CAAC,IAAI,EAAE,MAAM;EACjD,MAAMG,gBAAgB,GAAG,YAAY;EACrC,MAAMC,MAAM,GAAGH,GAAG,CAAC,EAAE,CAAC;;EAEtB;EACA,MAAMI,qBAAqB,GAAGA,CAAA,KAAM;IAChC,IAAI;MACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACL,gBAAgB,CAAC;MAEpD,IAAIG,KAAK,EAAE;QACP,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC;QAEhC,IAAIG,MAAM,IAAIG,KAAK,CAACC,OAAO,CAACJ,MAAM,CAAC,EAAE;UACjCL,MAAM,CAACU,KAAK,GAAGL,MAAM;UACrBM,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEC,OAAO,CAACH,KAAK,CAACI,MAAM,CAAC;QACpE;MACJ;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZJ,OAAO,CAACI,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC/D;EACJ,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,IAAI;MACA,MAAMC,KAAK,GAAGjB,MAAM,CAACU,KAAK,CAACQ,GAAG,CAACC,CAAC,KAAK;QAC7BC,KAAK,EAAED,CAAC,CAACC,KAAK;QACdC,OAAO,EAAEF,CAAC,CAACE,OAAO;QAClBC,MAAM,EAAEH,CAAC,CAACG;MACd,CAAC,CAAC,CAAC;MAEPnB,YAAY,CAACoB,OAAO,CAACxB,gBAAgB,EAAEO,IAAI,CAACkB,SAAS,CAACP,KAAK,CAAC,CAAC;IACjE,CAAC,CAAC,OAAOF,KAAK,EAAE;MACZJ,OAAO,CAACI,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC7D;EACJ,CAAC;;EAED;EACAd,qBAAqB,CAAC,CAAC;;EAEvB;EACA,MAAMwB,cAAc,GAAGA,CAAA,KAAM;IACzBzB,MAAM,CAACU,KAAK,GAAG,EAAE;IACjBP,YAAY,CAACuB,UAAU,CAAC3B,gBAAgB,CAAC;EAC7C,CAAC;EAED,OAAO;IACHC,MAAM;IACNyB,cAAc;IACdT;EACJ,CAAC;AACL,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}