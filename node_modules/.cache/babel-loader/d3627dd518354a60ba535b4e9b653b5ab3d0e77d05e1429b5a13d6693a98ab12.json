{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { LyricsContentType, TimestampFormat } from '../type.js';\n// Shared timestamp regex for LRC format\nconst TIMESTAMP_REGEX = /\\[(\\d{2}):(\\d{2})\\.(\\d{2,3})]/;\nexport function parseLyrics(input) {\n  if (TIMESTAMP_REGEX.test(input)) {\n    return parseLrc(input);\n  }\n  return toUnsyncedLyrics(input);\n}\nexport function toUnsyncedLyrics(lyrics) {\n  return {\n    contentType: LyricsContentType.lyrics,\n    timeStampFormat: TimestampFormat.notSynchronized,\n    text: lyrics.trim(),\n    syncText: []\n  };\n}\n/**\n * Parse LRC (Lyrics) formatted text\n * Ref: https://en.wikipedia.org/wiki/LRC_(file_format)\n * @param lrcString\n */\nexport function parseLrc(lrcString) {\n  const lines = lrcString.split('\\n');\n  const syncText = [];\n  for (const line of lines) {\n    const match = line.match(TIMESTAMP_REGEX);\n    if (match) {\n      const minutes = Number.parseInt(match[1], 10);\n      const seconds = Number.parseInt(match[2], 10);\n      const ms = match[3].length === 3 ? Number.parseInt(match[3], 10) : Number.parseInt(match[3], 10) * 10;\n      const timestamp = (minutes * 60 + seconds) * 1000 + ms;\n      const text = line.replace(TIMESTAMP_REGEX, '').trim();\n      syncText.push({\n        timestamp,\n        text\n      });\n    }\n  }\n  return {\n    contentType: LyricsContentType.lyrics,\n    timeStampFormat: TimestampFormat.milliseconds,\n    text: syncText.map(line => line.text).join('\\n'),\n    syncText\n  };\n}","map":{"version":3,"names":["LyricsContentType","TimestampFormat","TIMESTAMP_REGEX","parseLyrics","input","test","parseLrc","toUnsyncedLyrics","lyrics","contentType","timeStampFormat","notSynchronized","text","trim","syncText","lrcString","lines","split","line","match","minutes","Number","parseInt","seconds","ms","length","timestamp","replace","push","milliseconds","map","join"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/lrc/LyricsParser.js"],"sourcesContent":["import { LyricsContentType, TimestampFormat } from '../type.js';\n// Shared timestamp regex for LRC format\nconst TIMESTAMP_REGEX = /\\[(\\d{2}):(\\d{2})\\.(\\d{2,3})]/;\nexport function parseLyrics(input) {\n    if (TIMESTAMP_REGEX.test(input)) {\n        return parseLrc(input);\n    }\n    return toUnsyncedLyrics(input);\n}\nexport function toUnsyncedLyrics(lyrics) {\n    return {\n        contentType: LyricsContentType.lyrics,\n        timeStampFormat: TimestampFormat.notSynchronized,\n        text: lyrics.trim(),\n        syncText: [],\n    };\n}\n/**\n * Parse LRC (Lyrics) formatted text\n * Ref: https://en.wikipedia.org/wiki/LRC_(file_format)\n * @param lrcString\n */\nexport function parseLrc(lrcString) {\n    const lines = lrcString.split('\\n');\n    const syncText = [];\n    for (const line of lines) {\n        const match = line.match(TIMESTAMP_REGEX);\n        if (match) {\n            const minutes = Number.parseInt(match[1], 10);\n            const seconds = Number.parseInt(match[2], 10);\n            const ms = match[3].length === 3\n                ? Number.parseInt(match[3], 10)\n                : Number.parseInt(match[3], 10) * 10;\n            const timestamp = (minutes * 60 + seconds) * 1000 + ms;\n            const text = line.replace(TIMESTAMP_REGEX, '').trim();\n            syncText.push({ timestamp, text });\n        }\n    }\n    return {\n        contentType: LyricsContentType.lyrics,\n        timeStampFormat: TimestampFormat.milliseconds,\n        text: syncText.map(line => line.text).join('\\n'),\n        syncText,\n    };\n}\n"],"mappings":";AAAA,SAASA,iBAAiB,EAAEC,eAAe,QAAQ,YAAY;AAC/D;AACA,MAAMC,eAAe,GAAG,+BAA+B;AACvD,OAAO,SAASC,WAAWA,CAACC,KAAK,EAAE;EAC/B,IAAIF,eAAe,CAACG,IAAI,CAACD,KAAK,CAAC,EAAE;IAC7B,OAAOE,QAAQ,CAACF,KAAK,CAAC;EAC1B;EACA,OAAOG,gBAAgB,CAACH,KAAK,CAAC;AAClC;AACA,OAAO,SAASG,gBAAgBA,CAACC,MAAM,EAAE;EACrC,OAAO;IACHC,WAAW,EAAET,iBAAiB,CAACQ,MAAM;IACrCE,eAAe,EAAET,eAAe,CAACU,eAAe;IAChDC,IAAI,EAAEJ,MAAM,CAACK,IAAI,CAAC,CAAC;IACnBC,QAAQ,EAAE;EACd,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASR,QAAQA,CAACS,SAAS,EAAE;EAChC,MAAMC,KAAK,GAAGD,SAAS,CAACE,KAAK,CAAC,IAAI,CAAC;EACnC,MAAMH,QAAQ,GAAG,EAAE;EACnB,KAAK,MAAMI,IAAI,IAAIF,KAAK,EAAE;IACtB,MAAMG,KAAK,GAAGD,IAAI,CAACC,KAAK,CAACjB,eAAe,CAAC;IACzC,IAAIiB,KAAK,EAAE;MACP,MAAMC,OAAO,GAAGC,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7C,MAAMI,OAAO,GAAGF,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7C,MAAMK,EAAE,GAAGL,KAAK,CAAC,CAAC,CAAC,CAACM,MAAM,KAAK,CAAC,GAC1BJ,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAC7BE,MAAM,CAACC,QAAQ,CAACH,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE;MACxC,MAAMO,SAAS,GAAG,CAACN,OAAO,GAAG,EAAE,GAAGG,OAAO,IAAI,IAAI,GAAGC,EAAE;MACtD,MAAMZ,IAAI,GAAGM,IAAI,CAACS,OAAO,CAACzB,eAAe,EAAE,EAAE,CAAC,CAACW,IAAI,CAAC,CAAC;MACrDC,QAAQ,CAACc,IAAI,CAAC;QAAEF,SAAS;QAAEd;MAAK,CAAC,CAAC;IACtC;EACJ;EACA,OAAO;IACHH,WAAW,EAAET,iBAAiB,CAACQ,MAAM;IACrCE,eAAe,EAAET,eAAe,CAAC4B,YAAY;IAC7CjB,IAAI,EAAEE,QAAQ,CAACgB,GAAG,CAACZ,IAAI,IAAIA,IAAI,CAACN,IAAI,CAAC,CAACmB,IAAI,CAAC,IAAI,CAAC;IAChDjB;EACJ,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}