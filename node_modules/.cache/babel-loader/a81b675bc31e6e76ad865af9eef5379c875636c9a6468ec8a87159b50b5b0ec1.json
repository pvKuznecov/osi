{"ast":null,"code":"export default {\n  name: \"SimpleWindow\",\n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    },\n    isMinimized: {\n      type: Boolean,\n      default: false\n    },\n    isMaximized: {\n      type: Boolean,\n      default: false\n    },\n    isActive: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'minimize', 'focus', 'restore', 'toggleMaximize'],\n  data() {\n    return {\n      posX: 100,\n      posY: 100,\n      windowWidth: 400,\n      windowHeight: 300,\n      isDragging: false,\n      isResizing: false,\n      dragOffset: {\n        x: 0,\n        y: 0\n      },\n      resizeDirection: '',\n      originalState: null // Для сохранения состояния перед максимизацией\n    };\n  },\n  computed: {\n    isVisible() {\n      return !this.isMinimized;\n    },\n    windowStyles() {\n      if (this.isMaximized) {\n        // В максимизированном состоянии занимаем весь экран\n        return {\n          left: '0',\n          top: '0',\n          width: '100vw',\n          height: '100vh',\n          borderRadius: '0',\n          zIndex: this.isActive ? 9999 : 100\n        };\n      } else {\n        // В обычном состоянии используем сохраненные позиции\n        return {\n          left: `${this.posX}px`,\n          top: `${this.posY}px`,\n          width: `${this.windowWidth}px`,\n          height: `${this.windowHeight}px`,\n          zIndex: this.isActive ? 1000 : 100\n        };\n      }\n    }\n  },\n  watch: {\n    // При изменении пропса isMaximized извне (например, из хранилища)\n    isMaximized(newVal) {\n      if (newVal && !this.originalState) {\n        // Сохраняем текущее состояние перед максимизацией\n        this.saveOriginalState();\n      } else if (!newVal && this.originalState) {\n        // Восстанавливаем сохраненное состояние\n        this.restoreOriginalState();\n      }\n    }\n  },\n  mounted() {\n    // Добавляем глобальные обработчики для перетаскивания и изменения размера\n    document.addEventListener('mousemove', this.handleMouseMove);\n    document.addEventListener('mouseup', this.handleMouseUp);\n  },\n  beforeUnmount() {\n    // Убираем глобальные обработчики при уничтожении компонента\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n  },\n  methods: {\n    saveOriginalState() {\n      this.originalState = {\n        posX: this.posX,\n        posY: this.posY,\n        windowWidth: this.windowWidth,\n        windowHeight: this.windowHeight\n      };\n    },\n    restoreOriginalState() {\n      if (this.originalState) {\n        this.posX = this.originalState.posX;\n        this.posY = this.originalState.posY;\n        this.windowWidth = this.originalState.windowWidth;\n        this.windowHeight = this.originalState.windowHeight;\n      }\n    },\n    focusWindow(e) {\n      this.$emit('focus', this.windowId);\n\n      // Не начинаем перетаскивание если максимизировано или кликнули не на заголовок\n      if (this.isMaximized || !e.target.closest('.window-header')) {\n        return;\n      }\n      this.startDrag(e);\n    },\n    startDrag(e) {\n      this.isDragging = true;\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      };\n    },\n    onDrag(e) {\n      if (!this.isDragging) return;\n      this.posX = e.clientX - this.dragOffset.x;\n      this.posY = e.clientY - this.dragOffset.y;\n\n      // Ограничиваем перемещение в пределах экрана\n      const maxX = window.innerWidth - 300;\n      const maxY = window.innerHeight - 200;\n      this.posX = Math.max(0, Math.min(this.posX, maxX));\n      this.posY = Math.max(0, Math.min(this.posY, maxY));\n    },\n    stopDrag() {\n      this.isDragging = false;\n    },\n    minimize() {\n      this.$emit('minimize', this.windowId);\n    },\n    maximize() {\n      console.log('Максимизировать окно', this.windowId);\n    },\n    close() {\n      this.$emit('close', this.windowId);\n    }\n  }\n};","map":{"version":3,"names":["name","props","windowId","String","title","type","default","appName","isMinimized","Boolean","isMaximized","isActive","emits","data","posX","posY","windowWidth","windowHeight","isDragging","isResizing","dragOffset","x","y","resizeDirection","originalState","computed","isVisible","windowStyles","left","top","width","height","borderRadius","zIndex","watch","newVal","saveOriginalState","restoreOriginalState","mounted","document","addEventListener","handleMouseMove","handleMouseUp","beforeUnmount","removeEventListener","methods","focusWindow","e","$emit","target","closest","startDrag","clientX","clientY","onDrag","maxX","window","innerWidth","maxY","innerHeight","Math","max","min","stopDrag","minimize","maximize","console","log","close"],"sources":["/home/kup/my_projects/vue/osi/src/components/os/SimpleWindow/SimpleWindow.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\n<style src=\"./style.css\"></style>\n<script>\n    export default {\n        name: \"SimpleWindow\",\n        props: {\n            windowId: String,\n            title: { type: String, default: 'Окно' },\n            appName: { type: String, default: 'app' },\n            isMinimized: { type: Boolean, default: false },\n            isMaximized: { type: Boolean, default: false },\n            isActive: { type: Boolean, default: false }\n        },\n        emits: ['close', 'minimize', 'focus', 'restore', 'toggleMaximize'],\n        data() {\n            return {\n                posX: 100,\n                posY: 100,\n                windowWidth: 400,\n                windowHeight: 300,\n                isDragging: false,\n                isResizing: false,\n                dragOffset: { x: 0, y: 0 },\n                resizeDirection: '',\n                originalState: null // Для сохранения состояния перед максимизацией\n            }\n        },\n        computed: {\n            isVisible() {\n                return !this.isMinimized\n                },\n                \n                windowStyles() {\n                if (this.isMaximized) {\n                    // В максимизированном состоянии занимаем весь экран\n                    return {\n                    left: '0',\n                    top: '0',\n                    width: '100vw',\n                    height: '100vh',\n                    borderRadius: '0',\n                    zIndex: this.isActive ? 9999 : 100\n                    }\n                } else {\n                    // В обычном состоянии используем сохраненные позиции\n                    return {\n                    left: `${this.posX}px`,\n                    top: `${this.posY}px`,\n                    width: `${this.windowWidth}px`,\n                    height: `${this.windowHeight}px`,\n                    zIndex: this.isActive ? 1000 : 100\n                    }\n                }\n                }\n        },\n         watch: {\n    // При изменении пропса isMaximized извне (например, из хранилища)\n    isMaximized(newVal) {\n      if (newVal && !this.originalState) {\n        // Сохраняем текущее состояние перед максимизацией\n        this.saveOriginalState()\n      } else if (!newVal && this.originalState) {\n        // Восстанавливаем сохраненное состояние\n        this.restoreOriginalState()\n      }\n    }\n  },\n        mounted() {\n            // Добавляем глобальные обработчики для перетаскивания и изменения размера\n            document.addEventListener('mousemove', this.handleMouseMove)\n            document.addEventListener('mouseup', this.handleMouseUp)\n        },\n        beforeUnmount() {\n    // Убираем глобальные обработчики при уничтожении компонента\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('mouseup', this.handleMouseUp)\n        },\n        methods: {\n    saveOriginalState() {\n      this.originalState = {\n        posX: this.posX,\n        posY: this.posY,\n        windowWidth: this.windowWidth,\n        windowHeight: this.windowHeight\n      }\n    },\n    \n    restoreOriginalState() {\n      if (this.originalState) {\n        this.posX = this.originalState.posX\n        this.posY = this.originalState.posY\n        this.windowWidth = this.originalState.windowWidth\n        this.windowHeight = this.originalState.windowHeight\n      }\n    },\n            focusWindow(e) {\n      this.$emit('focus', this.windowId)\n      \n      // Не начинаем перетаскивание если максимизировано или кликнули не на заголовок\n      if (this.isMaximized || !e.target.closest('.window-header')) {\n        return\n      }\n      \n      this.startDrag(e)\n    },\n    \n    startDrag(e) {\n      this.isDragging = true\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      }\n    },\n            \n            onDrag(e) {\n                if (!this.isDragging) return;\n      \n                this.posX = e.clientX - this.dragOffset.x;\n                this.posY = e.clientY - this.dragOffset.y;\n      \n                // Ограничиваем перемещение в пределах экрана\n                const maxX = window.innerWidth - 300;\n                const maxY = window.innerHeight - 200;\n      \n                this.posX = Math.max(0, Math.min(this.posX, maxX));\n                this.posY = Math.max(0, Math.min(this.posY, maxY));\n            },\n    \n            stopDrag() { this.isDragging = false; },\n    \n            minimize() { this.$emit('minimize', this.windowId); },\n\n            maximize() { console.log('Максимизировать окно', this.windowId); },\n    \n            close() { this.$emit('close', this.windowId); },\n        }\n    }\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}