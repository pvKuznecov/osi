{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport const useOsStore = defineStore('os', () => {\n  const windows = ref([]);\n  const activeWindowId = ref(null);\n  let nextZIndex = 100;\n\n  // ОБЪЯВЛЯЕМ ФУНКЦИЮ ДО ТОГО КАК ОНА ИСПОЛЬЗУЕТСЯ\n  const activateWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      // Устанавливаем активное окно\n      activeWindowId.value = windowId;\n\n      // Обновляем z-index для всех окон\n      windows.value.forEach(w => {\n        if (w.id === windowId) {\n          // Активному окну даем самый высокий z-index\n          w.zIndex = nextZIndex++;\n        }\n        // Остальным окнам оставляем их z-index\n      });\n    }\n  };\n  console.log(\"windows\", windows);\n  const openWindow = appName => {\n    const newWindow = {\n      id: Date.now().toString(),\n      appName: appName,\n      title: `${appName} - Приложение`,\n      isMinimized: false,\n      isMaximized: false,\n      zIndex: nextZIndex++\n    };\n    windows.value.push(newWindow);\n    activateWindow(newWindow.id); // ИСПОЛЬЗУЕМ ФУНКЦИЮ, А НЕ this.activateWindow\n\n    return newWindow.id;\n  };\n  const closeWindow = windowId => {\n    const index = windows.value.findIndex(w => w.id === windowId);\n    if (index !== -1) {\n      windows.value.splice(index, 1);\n    }\n  };\n  const minimizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = true;\n    }\n  };\n  const restoreWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = false;\n      activateWindow(windowId); // ИСПОЛЬЗУЕМ ФУНКЦИЮ\n    }\n  };\n  const toggleMaximizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMaximized = !window.isMaximized;\n      activateWindow(windowId); // ИСПОЛЬЗУЕМ ФУНКЦИЮ\n    }\n  };\n  return {\n    windows,\n    activeWindowId,\n    openWindow,\n    closeWindow,\n    minimizeWindow,\n    restoreWindow,\n    toggleMaximizeWindow,\n    activateWindow // Экспортируем\n  };\n});","map":{"version":3,"names":["defineStore","ref","useOsStore","windows","activeWindowId","nextZIndex","activateWindow","windowId","window","value","find","w","id","forEach","zIndex","console","log","openWindow","appName","newWindow","Date","now","toString","title","isMinimized","isMaximized","push","closeWindow","index","findIndex","splice","minimizeWindow","restoreWindow","toggleMaximizeWindow"],"sources":["/home/kup/my_projects/vue/osi/src/stores/os.store.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref } from 'vue'\n\nexport const useOsStore = defineStore('os', () => {\n  const windows = ref([])\n  const activeWindowId = ref(null)\n  let nextZIndex = 100\n  \n  // ОБЪЯВЛЯЕМ ФУНКЦИЮ ДО ТОГО КАК ОНА ИСПОЛЬЗУЕТСЯ\n  const activateWindow = (windowId) => {\n    const window = windows.value.find(w => w.id === windowId)\n    if (window) {\n      // Устанавливаем активное окно\n      activeWindowId.value = windowId\n      \n      // Обновляем z-index для всех окон\n      windows.value.forEach(w => {\n        if (w.id === windowId) {\n          // Активному окну даем самый высокий z-index\n          w.zIndex = nextZIndex++\n        }\n        // Остальным окнам оставляем их z-index\n      })\n    }\n  }\n  \n  console.log(\"windows\", windows);\n\n  const openWindow = (appName) => {\n    const newWindow = {\n      id: Date.now().toString(),\n      appName: appName,\n      title: `${appName} - Приложение`,\n      isMinimized: false,\n      isMaximized: false,\n      zIndex: nextZIndex++\n    }\n    \n    windows.value.push(newWindow)\n    activateWindow(newWindow.id) // ИСПОЛЬЗУЕМ ФУНКЦИЮ, А НЕ this.activateWindow\n    \n    return newWindow.id\n  }\n  \n  const closeWindow = (windowId) => {\n    const index = windows.value.findIndex(w => w.id === windowId)\n    if (index !== -1) {\n      windows.value.splice(index, 1)\n    }\n  }\n  \n  const minimizeWindow = (windowId) => {\n    const window = windows.value.find(w => w.id === windowId)\n    if (window) {\n      window.isMinimized = true\n    }\n  }\n  \n  const restoreWindow = (windowId) => {\n    const window = windows.value.find(w => w.id === windowId)\n    if (window) {\n      window.isMinimized = false\n      activateWindow(windowId) // ИСПОЛЬЗУЕМ ФУНКЦИЮ\n    }\n  }\n  \n  const toggleMaximizeWindow = (windowId) => {\n    const window = windows.value.find(w => w.id === windowId)\n    if (window) {\n      window.isMaximized = !window.isMaximized\n      activateWindow(windowId) // ИСПОЛЬЗУЕМ ФУНКЦИЮ\n    }\n  }\n  \n  return {\n    windows,\n    activeWindowId,\n    openWindow,\n    closeWindow,\n    minimizeWindow,\n    restoreWindow,\n    toggleMaximizeWindow,\n    activateWindow // Экспортируем\n  }\n})"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}