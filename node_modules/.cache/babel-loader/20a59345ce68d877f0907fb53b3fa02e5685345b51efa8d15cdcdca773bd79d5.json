{"ast":null,"code":"import initDebug from 'debug';\nimport { IdentificationHeader } from './Theora.js';\nconst debug = initDebug('music-metadata:parser:ogg:theora');\n/**\n * Ref:\n * - https://theora.org/doc/Theora.pdf\n */\nexport class TheoraStream {\n  constructor(metadata, _options, _tokenizer) {\n    this.durationOnLastPage = false;\n    this.metadata = metadata;\n  }\n  /**\n   * Vorbis 1 parser\n   * @param header Ogg Page Header\n   * @param pageData Page data\n   */\n  async parsePage(header, pageData) {\n    if (header.headerType.firstPage) {\n      await this.parseFirstPage(header, pageData);\n    }\n  }\n  calculateDuration() {\n    debug('duration calculation not implemented');\n  }\n  /**\n   * Parse first Theora Ogg page. the initial identification header packet\n   */\n  async parseFirstPage(_header, pageData) {\n    debug('First Ogg/Theora page');\n    this.metadata.setFormat('codec', 'Theora');\n    const idHeader = IdentificationHeader.get(pageData, 0);\n    this.metadata.setFormat('bitrate', idHeader.nombr);\n    this.metadata.setFormat('hasVideo', true);\n  }\n  flush() {\n    return Promise.resolve();\n  }\n}","map":{"version":3,"names":["initDebug","IdentificationHeader","debug","TheoraStream","constructor","metadata","_options","_tokenizer","durationOnLastPage","parsePage","header","pageData","headerType","firstPage","parseFirstPage","calculateDuration","_header","setFormat","idHeader","get","nombr","flush","Promise","resolve"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/ogg/theora/TheoraStream.js"],"sourcesContent":["import initDebug from 'debug';\nimport { IdentificationHeader } from './Theora.js';\nconst debug = initDebug('music-metadata:parser:ogg:theora');\n/**\n * Ref:\n * - https://theora.org/doc/Theora.pdf\n */\nexport class TheoraStream {\n    constructor(metadata, _options, _tokenizer) {\n        this.durationOnLastPage = false;\n        this.metadata = metadata;\n    }\n    /**\n     * Vorbis 1 parser\n     * @param header Ogg Page Header\n     * @param pageData Page data\n     */\n    async parsePage(header, pageData) {\n        if (header.headerType.firstPage) {\n            await this.parseFirstPage(header, pageData);\n        }\n    }\n    calculateDuration() {\n        debug('duration calculation not implemented');\n    }\n    /**\n     * Parse first Theora Ogg page. the initial identification header packet\n     */\n    async parseFirstPage(_header, pageData) {\n        debug('First Ogg/Theora page');\n        this.metadata.setFormat('codec', 'Theora');\n        const idHeader = IdentificationHeader.get(pageData, 0);\n        this.metadata.setFormat('bitrate', idHeader.nombr);\n        this.metadata.setFormat('hasVideo', true);\n    }\n    flush() {\n        return Promise.resolve();\n    }\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,OAAO;AAC7B,SAASC,oBAAoB,QAAQ,aAAa;AAClD,MAAMC,KAAK,GAAGF,SAAS,CAAC,kCAAkC,CAAC;AAC3D;AACA;AACA;AACA;AACA,OAAO,MAAMG,YAAY,CAAC;EACtBC,WAAWA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,EAAE;IACxC,IAAI,CAACC,kBAAkB,GAAG,KAAK;IAC/B,IAAI,CAACH,QAAQ,GAAGA,QAAQ;EAC5B;EACA;AACJ;AACA;AACA;AACA;EACI,MAAMI,SAASA,CAACC,MAAM,EAAEC,QAAQ,EAAE;IAC9B,IAAID,MAAM,CAACE,UAAU,CAACC,SAAS,EAAE;MAC7B,MAAM,IAAI,CAACC,cAAc,CAACJ,MAAM,EAAEC,QAAQ,CAAC;IAC/C;EACJ;EACAI,iBAAiBA,CAAA,EAAG;IAChBb,KAAK,CAAC,sCAAsC,CAAC;EACjD;EACA;AACJ;AACA;EACI,MAAMY,cAAcA,CAACE,OAAO,EAAEL,QAAQ,EAAE;IACpCT,KAAK,CAAC,uBAAuB,CAAC;IAC9B,IAAI,CAACG,QAAQ,CAACY,SAAS,CAAC,OAAO,EAAE,QAAQ,CAAC;IAC1C,MAAMC,QAAQ,GAAGjB,oBAAoB,CAACkB,GAAG,CAACR,QAAQ,EAAE,CAAC,CAAC;IACtD,IAAI,CAACN,QAAQ,CAACY,SAAS,CAAC,SAAS,EAAEC,QAAQ,CAACE,KAAK,CAAC;IAClD,IAAI,CAACf,QAAQ,CAACY,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC;EAC7C;EACAI,KAAKA,CAAA,EAAG;IACJ,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC;EAC5B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}