{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n// import { resolve } from 'core-js/fn/promise';\nimport { LangPack } from './lang';\nimport { parseBlob } from 'music-metadata';\nexport default {\n  name: 'OSIMPlayer',\n  props: {\n    windowId: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      LangData: {},\n      PlayList: [],\n      isPlaying: false,\n      durationAll: 0,\n      TargetTrack: null,\n      ShowConfig: {\n        playlist: {\n          artist: true,\n          album: true,\n          genre: true,\n          duration: true\n        }\n      },\n      isLoading: false,\n      totalFiles: 0,\n      MAX_FILE_SIZE: 100 * 1024 * 1024,\n      // 100MB,\n      MAX_PLAYLIST_SIZE: 1000 * 1024 * 1024,\n      // 1000MB,\n      curFilesSize: 0,\n      audioDurations: {},\n      // Объект для \"длительностей\"\n      VolumeLvl: 0.5,\n      VolumeLvl_save: 0.5,\n      currentIndex: 0\n    };\n  },\n  mounted() {\n    console.log('MPlayer app mounted with windowId:', this.windowId);\n    const userLang = navigator.language || navigator.userLanguage;\n    const userLangS = userLang.split('-')[0];\n    this.UserLang = userLangS;\n    const LangPackData = LangPack;\n    this.LangData = userLangS && LangPackData && LangPackData[userLangS] ? LangPackData[userLangS] : LangPackData.en;\n  },\n  computed: {\n    currentTrack() {\n      const curindex = this.currentIndex + '';\n      const preplist = this.PlayList;\n      if (preplist && preplist.length > 0 && curindex) {\n        let tr = preplist[curindex];\n        return tr;\n      } else {\n        return null;\n      }\n    }\n  },\n  watch: {\n    // PlayList: {\n    //     handler(newPlayList) {\n\n    //     },\n    //     immediate: true,\n    // },\n  },\n  methods: {\n    // Сброс input (открывает возможность повторно загружать те-же файлы)\n    resetInput(inputElement) {\n      inputElement.value = '';\n    },\n    showError(message) {\n      alert(message);\n      console.error(message);\n    },\n    getAudioDurationSimple(track) {\n      return new Promise((resolve, reject) => {\n        const audio = new Audio();\n        const objectURL = URL.createObjectURL(track);\n        audio.src = objectURL;\n        const mkClean = () => {\n          audio.removeEventListener('loadedmetadata', onLoaded);\n          audio.removeEventListener('error', onError);\n          URL.revokeObjectURL(objectURL); // Освобождаем ссылку в памяти \"URL\" - сразу\n        };\n        const onLoaded = () => {\n          mkClean();\n          resolve(audio.duration);\n        };\n        // чистим ссылки, возвращаем ошибку\n        const onError = e => {\n          mkClean();\n          reject(e);\n        };\n        audio.addEventListener('loadedmetadata', onLoaded); //подписка на событие \"загрузка мета-данных\"\n        audio.addEventListener('error', onError); //подписка на событие \"ошибка\"\n\n        // Таймаут\n        setTimeout(() => {\n          mkClean();\n          reject(new Error('Timeout loading audio metadata'));\n        }, 3000);\n      });\n    },\n    async handleFileSelect(event) {\n      const files = Array.from(event.target.files);\n      const audioFiles = files.filter(file => this.isAudio(file));\n      if (audioFiles.length === 0) {\n        this.showError('Не было выбрано ни одного файла!');\n        this.resetInput(event.target);\n        return;\n      }\n      let cSize = 0;\n      files.forEach(function (item) {\n        cSize += item.size;\n      });\n      if (cSize > this.MAX_PLAYLIST_SIZE) {\n        this.showError('Превышен лимит доступной памяти! Максимальный размер - ' + this.MAX_PLAYLIST_SIZE / 1024 / 1024 + \"MB.\");\n        this.resetInput(event.target);\n        return;\n      }\n      this.isLoading = true;\n      this.totalFiles = audioFiles.length;\n      let validFiles = [];\n      for (let afile of audioFiles) {\n        try {\n          const afile_size = afile.size;\n          const afile_name = afile.name;\n          const blob = afile.slice(0, afile_size);\n          let parseData = await parseBlob(blob);\n          let trackDKey = `${afile_name}-${afile_size}`;\n          afile.common = parseData.common;\n          if (!this.audioDurations[trackDKey]) {\n            try {\n              let tduration = await this.getAudioDurationSimple(afile);\n              this.audioDurations[trackDKey] = tduration;\n              afile.common.duration = tduration;\n              this.durationAll += tduration;\n            } catch (error) {\n              console.warn(`Не удалось получить длительность для ${afile.name}:`, error);\n              this.audioDurations[trackDKey] = 0;\n            }\n          }\n          validFiles.push(afile);\n        } catch (error) {\n          console.error('Ошибка при разборе файла: ', error);\n        }\n      }\n      this.isLoading = false;\n      if (validFiles.length > 0) {\n        this.PlayList = validFiles;\n      } else {\n        alert('Не было выбрано ни одного аудиофайла!');\n      }\n    },\n    // проверка \"на аудиофайл\"\n    isAudio(file) {\n      if (file.size > this.MAX_FILE_SIZE) {\n        console.warn(`Файл ${file.name} слишком большой: ${file.size} bytes`);\n        return false;\n      }\n      const audioTypes = ['audio/mpeg', 'audio/wav', 'audio/flac', 'audio/ogg', 'audio/aac', 'audio/x-m4a'];\n      const extension = file.name.toLowerCase().split('.').pop();\n      const audioExtensions = ['mp3', 'wav', 'flac', 'ogg', 'aac', 'm4a'];\n      return audioTypes.includes(file.type) || audioExtensions.includes(extension);\n    },\n    formatDuration(seconds) {\n      if (!seconds || isNaN(seconds)) {\n        return '00:00';\n      } else {\n        return `${Math.floor(seconds / 60).toString().padStart(2, '0')}:${Math.floor(seconds % 60).toString().padStart(2, '0')}`;\n      }\n    },\n    VolimePlus() {\n      const AudioElement = document.querySelector('#main_audio');\n      if (AudioElement) {\n        if (this.VolumeLvl < 1) {\n          this.VolumeLvl = parseFloat((this.VolumeLvl + 0.1).toFixed(1));\n        }\n        AudioElement.volume = this.VolumeLvl;\n      }\n    },\n    VolumeMinus() {\n      const AudioElement = document.querySelector('#main_audio');\n      if (this.VolumeLvl > 0) {\n        this.VolumeLvl = parseFloat((this.VolumeLvl - 0.1).toFixed(1));\n      }\n      AudioElement.volume = this.VolumeLvl;\n    }\n  }\n};","map":{"version":3,"names":["LangPack","parseBlob","name","props","windowId","type","String","required","data","LangData","PlayList","isPlaying","durationAll","TargetTrack","ShowConfig","playlist","artist","album","genre","duration","isLoading","totalFiles","MAX_FILE_SIZE","MAX_PLAYLIST_SIZE","curFilesSize","audioDurations","VolumeLvl","VolumeLvl_save","currentIndex","mounted","console","log","userLang","navigator","language","userLanguage","userLangS","split","UserLang","LangPackData","en","computed","currentTrack","curindex","preplist","length","tr","watch","methods","resetInput","inputElement","value","showError","message","alert","error","getAudioDurationSimple","track","Promise","resolve","reject","audio","Audio","objectURL","URL","createObjectURL","src","mkClean","removeEventListener","onLoaded","onError","revokeObjectURL","e","addEventListener","setTimeout","Error","handleFileSelect","event","files","Array","from","target","audioFiles","filter","file","isAudio","cSize","forEach","item","size","validFiles","afile","afile_size","afile_name","blob","slice","parseData","trackDKey","common","tduration","warn","push","audioTypes","extension","toLowerCase","pop","audioExtensions","includes","formatDuration","seconds","isNaN","Math","floor","toString","padStart","VolimePlus","AudioElement","document","querySelector","parseFloat","toFixed","volume","VolumeMinus"],"sources":["/home/kup/my_projects/vue/osi/src/apps/system/OSIMPlayer/OSIMPlayer.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\n<style src=\"./style.css\"></style>\n<script>\n    // import { resolve } from 'core-js/fn/promise';\n    import { LangPack } from './lang';\n    import { parseBlob } from 'music-metadata';\n\n    export default {\n        name: 'OSIMPlayer',\n\n        props: {\n            windowId: {\n                type: String,\n                required: true\n            },\n        },\n\n        data() {\n            return {\n                LangData: {},\n                PlayList: [],\n                isPlaying: false,\n                durationAll: 0,\n                TargetTrack: null,\n                ShowConfig: {\n                    playlist: {\n                        artist: true,\n                        album: true,\n                        genre: true,\n                        duration: true,\n                    }\n                },\n                isLoading: false,\n                totalFiles: 0,\n                MAX_FILE_SIZE: 100 * 1024 * 1024, // 100MB,\n                MAX_PLAYLIST_SIZE: 1000 * 1024 * 1024, // 1000MB,\n                curFilesSize: 0,\n                audioDurations: {}, // Объект для \"длительностей\"\n                VolumeLvl: 0.5,\n                VolumeLvl_save: 0.5,\n                currentIndex: 0,\n            }\n        },\n\n        mounted() {\n            console.log('MPlayer app mounted with windowId:', this.windowId);\n\n            const userLang = navigator.language || navigator.userLanguage;\n            const userLangS = userLang.split('-')[0];\n            this.UserLang = userLangS; \n            \n            const LangPackData = LangPack;\n            this.LangData = (userLangS && LangPackData && LangPackData[userLangS]) ? LangPackData[userLangS] : LangPackData.en;\n        },\n\n        computed: {\n            currentTrack() {\n                const curindex = this.currentIndex + '';\n                const preplist = this.PlayList;\n\n                if (preplist && preplist.length > 0 && curindex) {\n                    let tr = preplist[curindex];\n                    return tr;\n                } else {\n                    return null;\n                }\n            },\n        },\n\n        watch: {\n            // PlayList: {\n            //     handler(newPlayList) {\n\n            //     },\n            //     immediate: true,\n            // },\n        },\n\n        methods: {\n            // Сброс input (открывает возможность повторно загружать те-же файлы)\n            resetInput(inputElement) { inputElement.value = ''; },\n\n            showError(message) {\n                alert(message);\n                console.error(message);\n            },\n\n            getAudioDurationSimple(track) {\n                return new Promise((resolve, reject) => {\n                    const audio = new Audio();\n                    const objectURL = URL.createObjectURL(track);\n\n                    audio.src = objectURL;\n\n                    const mkClean = () => {\n                        audio.removeEventListener('loadedmetadata', onLoaded);\n                        audio.removeEventListener('error', onError);\n                        URL.revokeObjectURL(objectURL); // Освобождаем ссылку в памяти \"URL\" - сразу\n                    };\n\n                    const onLoaded = () => {\n                        mkClean();\n                        resolve(audio.duration);\n                    };\n                    // чистим ссылки, возвращаем ошибку\n                    const onError = (e) => {\n                        mkClean();\n                        reject(e);\n                    };\n                    \n                    audio.addEventListener('loadedmetadata', onLoaded); //подписка на событие \"загрузка мета-данных\"\n                    audio.addEventListener('error', onError); //подписка на событие \"ошибка\"\n                    \n                    // Таймаут\n                    setTimeout(() => {\n                        mkClean();\n                        reject(new Error('Timeout loading audio metadata'));\n                    }, 3000);\n                });\n            },\n            \n            async handleFileSelect(event) {\n                const files = Array.from(event.target.files);\n                const audioFiles = files.filter(file => this.isAudio(file));\n\n                if (audioFiles.length === 0) {\n                    this.showError('Не было выбрано ни одного файла!');\n                    this.resetInput(event.target);\n                    \n                    return;\n                }\n\n                let cSize = 0;\n                files.forEach(function(item) { cSize += item.size; });\n\n                if (cSize > this.MAX_PLAYLIST_SIZE) {\n                    this.showError('Превышен лимит доступной памяти! Максимальный размер - ' + (this.MAX_PLAYLIST_SIZE / 1024 / 1024) + \"MB.\");\n                    this.resetInput(event.target);\n\n                    return;\n                }\n\n                this.isLoading = true;\n                this.totalFiles = audioFiles.length;\n\n                let validFiles = [];\n\n                for (let afile of audioFiles) {\n                    try {\n                        const afile_size = afile.size;\n                        const afile_name = afile.name;\n                        const blob = afile.slice(0, afile_size);\n\n                        let parseData = await parseBlob(blob);\n                        let trackDKey = `${afile_name}-${afile_size}`;\n\n                        afile.common = parseData.common;\n\n                        if (!this.audioDurations[trackDKey]) {\n                            try {\n                                let tduration = await this.getAudioDurationSimple(afile);\n                                this.audioDurations[trackDKey] = tduration;\n                                afile.common.duration = tduration;\n                                this.durationAll += tduration;\n                            } catch (error) {\n                                console.warn(`Не удалось получить длительность для ${afile.name}:`, error);\n                                this.audioDurations[trackDKey] = 0;\n                            }\n                        }\n\n                        validFiles.push(afile);\n                    } catch (error) {\n                        console.error('Ошибка при разборе файла: ', error);\n                    }\n                }\n\n                this.isLoading = false;\n\n                if (validFiles.length > 0) {\n                    this.PlayList = validFiles;\n                } else {\n                    alert('Не было выбрано ни одного аудиофайла!');\n                }\n            },\n\n            // проверка \"на аудиофайл\"\n            isAudio(file) {\n                if (file.size > this.MAX_FILE_SIZE) {\n                    console.warn(`Файл ${file.name} слишком большой: ${file.size} bytes`);\n                    return false;\n                }\n\n                const audioTypes = [ 'audio/mpeg', 'audio/wav', 'audio/flac', 'audio/ogg', 'audio/aac', 'audio/x-m4a' ];\n                const extension = file.name.toLowerCase().split('.').pop();\n                const audioExtensions = ['mp3', 'wav', 'flac', 'ogg', 'aac', 'm4a'];\n            \n                return audioTypes.includes(file.type) || audioExtensions.includes(extension);\n            },\n\n            formatDuration(seconds) {\n                if (!seconds || isNaN(seconds)) {\n                    return '00:00';\n                } else {\n                    return `${Math.floor(seconds / 60).toString().padStart(2, '0')}:${Math.floor(seconds % 60).toString().padStart(2, '0')}`;\n                }\n            },\n\n            VolimePlus() {\n                const AudioElement = document.querySelector('#main_audio');\n\n                if (AudioElement) {\n                    if (this.VolumeLvl < 1) {\n                        this.VolumeLvl = parseFloat((this.VolumeLvl + 0.1).toFixed(1));\n                    }\n                    AudioElement.volume = this.VolumeLvl;\n                }\n            },\n            VolumeMinus() {\n                const AudioElement = document.querySelector('#main_audio');\n                if (this.VolumeLvl > 0) {\n                    this.VolumeLvl = parseFloat((this.VolumeLvl - 0.1).toFixed(1));\n                }\n                AudioElement.volume = this.VolumeLvl;\n            },\n        }\n    }\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}