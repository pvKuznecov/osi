{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { defineStore } from \"pinia\";\nimport { ref, watch } from \"vue\";\nexport const useOSIAppsStore = defineStore('osiapps', () => {\n  const LOCALSTORAGE_KEY = \"osiapps_store\";\n  const windows = ref([]);\n  const activeWindowId = ref(null);\n  let saveTimeout = null;\n  let nextZIndex = 100;\n\n  // Загружаем сохраненные окна из localStorage\n  const loadWindowsFromLS = () => {\n    try {\n      const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        if (parse) {\n          windows.value = parse.windows || [];\n          activeWindowId.value = parse.activeWindowId || null;\n          const maxZIndex = windows.value.reduce((max, w) => Math.max(max, w.zIndex || 100), 100);\n          nextZIndex = maxZIndex + 1;\n          console.log('Loaded windows from storage:', windows.value.length);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load OSI apps store:', error);\n      localStorage.removeItem(LOCALSTORAGE_KEY);\n    }\n  };\n  const loadFromStorage = () => {\n    try {\n      const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        windowStates.value = parsed || {};\n        console.log('Loaded app states from localStorage:', Object.keys(windowStates.value).length, 'windows');\n      }\n    } catch (error) {\n      console.error('Failed to load app states from localStorage:', error);\n      // В случае ошибки очищаем localStorage\n      localStorage.removeItem(LOCALSTORAGE_KEY);\n    }\n  };\n\n  // Сохраняем окна в localStorage\n  const saveWindowsFromLS = () => {\n    try {\n      const LSState = {\n        windows: windows.value.map(w => ({\n          id: w.id,\n          appName: w.appName,\n          contentApp: w.contentApp,\n          title: w.title,\n          isMinimized: w.isMinimized,\n          isMaximized: w.isMaximized,\n          zIndex: w.zIndex,\n          defWidth: w.defWidth,\n          defHeight: w.defHeight,\n          wdata: w.wdata\n        })),\n        activeWindowId: activeWindowId.value\n      };\n      localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(LSState));\n    } catch (error) {\n      console.error(\"Failed to save windows to localstorage:\", error);\n    }\n  };\n\n  // следим за изменениями окон\n  watch(windows, newWindows => {\n    console.log('Windows changed:', newWindows);\n    clearTimeout(saveTimeout);\n    saveTimeout = setTimeout(() => {\n      saveWindowsFromLS();\n    }, 500);\n  }, {\n    deep: true\n  });\n\n  // инициализация local store\n  loadWindowsFromLS();\n\n  // активация окна\n  const activateWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      activeWindowId.value = windowId;\n      windows.value.forEach(w => {\n        if (w.id === windowId) {\n          w.zIndex = nextZIndex++;\n        }\n      });\n      saveWindowsFromLS();\n    }\n  };\n\n  // Сохранить состояние окна\n  const saveWindowState = (windowId, state) => {\n    console.log(\"saveWindowState__windowId\", windowId);\n    console.log(\"saveWindowState__state\", state);\n    if (!windowId) {\n      console.warn('Cannot save window state: windowId is required');\n      return;\n    }\n    const windowIndex = windows.value.findIndex(w => w.id === windowId);\n    if (windowIndex !== -1) {\n      windows.value[windowIndex].wdata = {\n        ...state,\n        lastUpdated: Date.now()\n      };\n      console.log('State saved for window:', windowId, state);\n    } else {\n      console.warn('Window not found:', windowId);\n    }\n  };\n\n  // Получить состояние окна\n  const getWindowState = windowId => {\n    if (!windowId) {\n      console.warn('Cannot get window state: windowId is required');\n      return null;\n    }\n    const existingWindow = windows.value.find(w => w.id === windowId);\n    if (existingWindow && existingWindow.wdata) {\n      return existingWindow.wdata;\n    } else {\n      return null;\n    }\n  };\n\n  // Удалить состояние окна\n  const deleteWindowState = windowId => {\n    if (!windowId) {\n      console.warn('Cannot delete window state: windowId is required');\n      return;\n    }\n    const windowIndex = windows.value.findIndex(w => w.id === windowId);\n    if (windowIndex !== -1) {\n      windows.value[windowIndex].wdata = {};\n      console.log('State deleted for window:', windowId);\n    }\n  };\n\n  // Получить статистику по состояниям\n  const getStats = () => {\n    const byAppType = {};\n    windows.value.forEach(w => {\n      const state = w.wdata || {};\n      const type = state.appType || 'unknown';\n      byAppType[type] = (byAppType[type] || 0) + 1;\n    });\n    return {\n      totalWindows: windows.value.length,\n      byAppType\n    };\n  };\n  const openWindow = appData => {\n    const appName = appData.name;\n    const appTitle = appData.label || appData.title;\n    const contentApp = appData.contentapp || appData.contentApp;\n\n    // Проверяем, есть ли уже такое окно\n    const existingWindow = windows.value.find(w => w.appName === appName && w.contentApp === contentApp);\n    if (existingWindow) {\n      if (existingWindow.isMinimized) {\n        restoreWindow(existingWindow.id);\n      } else {\n        activateWindow(existingWindow.id);\n      }\n      return existingWindow.id;\n    }\n\n    // Создаем новое окно\n    const nWindID = 'window_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    const newWindow = {\n      ...appData,\n      id: nWindID,\n      // windowId: nWindID,\n      appName: appName,\n      contentApp: contentApp,\n      title: appTitle,\n      isMinimized: false,\n      isMaximized: appData.isMaximized || false,\n      zIndex: nextZIndex++,\n      defWidth: appData.defWidth || 400,\n      defHeight: appData.defHeight || 400,\n      wdata: {} // Пустой wdata для нового окна\n    };\n    windows.value.push(newWindow);\n    activateWindow(newWindow.id);\n    return newWindow.id;\n  };\n  const closeWindow = windowId => {\n    const index = windows.value.findIndex(w => w.id === windowId);\n    if (index !== -1) {\n      windows.value.splice(index, 1);\n      if (activeWindowId.value === windowId) {\n        activeWindowId.value = windows.value.length > 0 ? windows.value[windows.value.length - 1].id : null;\n      }\n      saveWindowsFromLS();\n    }\n  };\n  const minimizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = true;\n      saveWindowsFromLS();\n    }\n  };\n  const restoreWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMinimized = false;\n      activateWindow(windowId);\n      saveWindowsFromLS();\n    }\n  };\n  const toggleMaximizeWindow = windowId => {\n    const window = windows.value.find(w => w.id === windowId);\n    if (window) {\n      window.isMaximized = !window.isMaximized;\n      activateWindow(windowId);\n      saveWindowsFromLS();\n    }\n  };\n\n  // Метод для очистки всех окон\n  const clearAllWindows = () => {\n    windows.value = [];\n    activeWindowId.value = null;\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n  };\n  const detectBrowser = () => {\n    const ua = navigator.userAgent;\n    let tem;\n    let M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {\n        name: 'IE',\n        version: tem[1] || ''\n      };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\n      if (tem != null) {\n        return {\n          name: tem[1].replace('OPR', 'Opera'),\n          version: tem[2]\n        };\n      }\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n      M.splice(1, 1, tem[1]);\n    }\n    return {\n      name: M[0],\n      version: M[1]\n    };\n  };\n  const getLocalStorageUsage = () => {\n    try {\n      let totalBytes = 0;\n      let entries = [];\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        const value = localStorage.getItem(key);\n        const keySize = key.length * 2;\n        const valueSize = value.length * 2;\n        const entrySize = keySize + valueSize;\n        totalBytes += entrySize;\n        entries.push({\n          key,\n          keySize: `${key.length} симв (${keySize} байт)`,\n          valueSize: `${value.length} симв (${valueSize} байт)`,\n          totalSize: `${(entrySize / 1024).toFixed(2)} KB`,\n          valuePreview: value.length > 100 ? value.substring(0, 100) + '...' : value\n        });\n      }\n      return {\n        total: {\n          bytes: totalBytes,\n          kilobytes: (totalBytes / 1024).toFixed(2),\n          megabytes: (totalBytes / (1024 * 1024)).toFixed(4),\n          entries: localStorage.length\n        },\n        entries,\n        limit: {\n          standard: '5 MB',\n          usedPercent: (totalBytes / (5 * 1024 * 1024) * 100).toFixed(1)\n        }\n      };\n    } catch (error) {\n      console.error('Error calculating localStorage usage:', error);\n      return null;\n    }\n  };\n  return {\n    windows,\n    activeWindowId,\n    activateWindow,\n    saveWindowState,\n    getWindowState,\n    deleteWindowState,\n    openWindow,\n    closeWindow,\n    minimizeWindow,\n    restoreWindow,\n    toggleMaximizeWindow,\n    clearAllWindows,\n    getStats,\n    getLocalStorageUsage,\n    detectBrowser\n  };\n});","map":{"version":3,"names":["defineStore","ref","watch","useOSIAppsStore","LOCALSTORAGE_KEY","windows","activeWindowId","saveTimeout","nextZIndex","loadWindowsFromLS","saved","localStorage","getItem","parsed","JSON","parse","value","maxZIndex","reduce","max","w","Math","zIndex","console","log","length","error","removeItem","loadFromStorage","windowStates","Object","keys","saveWindowsFromLS","LSState","map","id","appName","contentApp","title","isMinimized","isMaximized","defWidth","defHeight","wdata","setItem","stringify","newWindows","clearTimeout","setTimeout","deep","activateWindow","windowId","window","find","forEach","saveWindowState","state","warn","windowIndex","findIndex","lastUpdated","Date","now","getWindowState","existingWindow","deleteWindowState","getStats","byAppType","type","appType","totalWindows","openWindow","appData","name","appTitle","label","contentapp","restoreWindow","nWindID","random","toString","substr","newWindow","push","closeWindow","index","splice","minimizeWindow","toggleMaximizeWindow","clearAllWindows","detectBrowser","ua","navigator","userAgent","tem","M","match","test","exec","version","replace","appVersion","getLocalStorageUsage","totalBytes","entries","i","key","keySize","valueSize","entrySize","totalSize","toFixed","valuePreview","substring","total","bytes","kilobytes","megabytes","limit","standard","usedPercent"],"sources":["/home/kup/my_projects/vue/osi/src/stores/os.apps.store.js"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport { ref, watch } from \"vue\";\n\nexport const useOSIAppsStore = defineStore('osiapps', () => {\n    const LOCALSTORAGE_KEY = \"osiapps_store\";\n\n    const windows = ref([]);\n    const activeWindowId = ref(null);\n\n    let saveTimeout = null;\n    let nextZIndex = 100;\n\n    // Загружаем сохраненные окна из localStorage\n    const loadWindowsFromLS = () => {\n        try {\n            const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n            \n            if (saved) {\n                const parsed = JSON.parse(saved);\n\n                if (parse) {\n                    windows.value = parse.windows || [];\n                    activeWindowId.value = parse.activeWindowId || null;\n                    \n                    const maxZIndex = windows.value.reduce((max, w) => \n                        Math.max(max, w.zIndex || 100), 100\n                    );\n                    nextZIndex = maxZIndex + 1;\n                    \n                    console.log('Loaded windows from storage:', windows.value.length);\n                }\n            }\n        } catch (error) {\n            console.error('Failed to load OSI apps store:', error);\n            localStorage.removeItem(LOCALSTORAGE_KEY);\n        }\n    };\n\n    const loadFromStorage = () => {\n        try {\n            const saved = localStorage.getItem(LOCALSTORAGE_KEY);\n            if (saved) {\n                const parsed = JSON.parse(saved);\n                windowStates.value = parsed || {};\n                console.log('Loaded app states from localStorage:', Object.keys(windowStates.value).length, 'windows');\n            }\n        } catch (error) {\n            console.error('Failed to load app states from localStorage:', error);\n            // В случае ошибки очищаем localStorage\n            localStorage.removeItem(LOCALSTORAGE_KEY);\n        }\n    };\n\n\n\n\n    // Сохраняем окна в localStorage\n    const saveWindowsFromLS = () => {\n        try {\n            const LSState = {\n                windows: windows.value.map(w => ({\n                    id: w.id,\n                    appName: w.appName,\n                    contentApp: w.contentApp,\n                    title: w.title,\n                    isMinimized: w.isMinimized,\n                    isMaximized: w.isMaximized,\n                    zIndex: w.zIndex,\n                    defWidth: w.defWidth,\n                    defHeight: w.defHeight,\n                    wdata: w.wdata\n                })),\n                activeWindowId: activeWindowId.value\n            };\n\n            localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(LSState));\n        } catch (error) {\n            console.error(\"Failed to save windows to localstorage:\", error);\n        }\n    };\n\n    // следим за изменениями окон\n    watch(\n        windows,\n        (newWindows) => {\n            console.log('Windows changed:', newWindows);\n            \n            clearTimeout(saveTimeout);\n            \n            saveTimeout = setTimeout(() => {\n                saveWindowsFromLS();\n            }, 500);\n        },\n        { deep: true }\n    );\n\n    // инициализация local store\n    loadWindowsFromLS();\n  \n    // активация окна\n    const activateWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n        \n        if (window) {\n            activeWindowId.value = windowId;\n            windows.value.forEach(w => {\n                if (w.id === windowId) {\n                    w.zIndex = nextZIndex++;\n                }\n            });\n            \n            saveWindowsFromLS();\n        }\n    };\n\n    // Сохранить состояние окна\n    const saveWindowState = (windowId, state) => {\n        console.log(\"saveWindowState__windowId\", windowId);\n        console.log(\"saveWindowState__state\", state);\n        if (!windowId) {\n            console.warn('Cannot save window state: windowId is required');\n            return;\n        }\n        \n        const windowIndex = windows.value.findIndex(w => w.id === windowId);\n        \n        if (windowIndex !== -1) {\n            windows.value[windowIndex].wdata = {\n                ...state,\n                lastUpdated: Date.now(),\n            };\n            \n            console.log('State saved for window:', windowId, state);\n        } else {\n            console.warn('Window not found:', windowId);\n        }\n    };\n\n    // Получить состояние окна\n    const getWindowState = (windowId) => {\n        if (!windowId) {\n            console.warn('Cannot get window state: windowId is required');\n            return null;\n        }\n\n        const existingWindow = windows.value.find(w => w.id === windowId );\n\n        if (existingWindow && existingWindow.wdata) {\n            return existingWindow.wdata;\n        } else {\n            return null;\n        }        \n    };\n\n    // Удалить состояние окна\n    const deleteWindowState = (windowId) => {\n        if (!windowId) {\n            console.warn('Cannot delete window state: windowId is required');\n            return;\n        }\n\n        const windowIndex = windows.value.findIndex(w => w.id === windowId);\n        \n        if (windowIndex !== -1) {\n            windows.value[windowIndex].wdata = {};\n            console.log('State deleted for window:', windowId);\n        }\n    };\n\n    // Получить статистику по состояниям\n    const getStats = () => {\n        const byAppType = {};\n\n        windows.value.forEach(w => {\n            const state = w.wdata || {};\n            const type = state.appType || 'unknown';\n            byAppType[type] = (byAppType[type] || 0) + 1;\n        });\n\n        return {\n            totalWindows: windows.value.length,\n            byAppType,\n        };\n    };\n\n    const openWindow = (appData) => {\n        const appName = appData.name;\n        const appTitle = appData.label || appData.title;\n        const contentApp = appData.contentapp || appData.contentApp;\n\n        // Проверяем, есть ли уже такое окно\n        const existingWindow = windows.value.find(w => \n            w.appName === appName && w.contentApp === contentApp\n        );\n        \n        if (existingWindow) {\n            if (existingWindow.isMinimized) {\n                restoreWindow(existingWindow.id);\n            } else {\n                activateWindow(existingWindow.id);\n            }\n            return existingWindow.id;\n        }\n        \n        // Создаем новое окно\n        const nWindID = 'window_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n        const newWindow = {\n            ...appData,\n            id: nWindID,\n            // windowId: nWindID,\n            appName: appName,\n            contentApp: contentApp,\n            title: appTitle,\n            isMinimized: false,\n            isMaximized: appData.isMaximized || false,            \n            zIndex: nextZIndex++,\n            defWidth: appData.defWidth || 400,\n            defHeight: appData.defHeight || 400,\n            wdata: {} // Пустой wdata для нового окна\n        };\n    \n        windows.value.push(newWindow);\n        activateWindow(newWindow.id);\n    \n        return newWindow.id;\n    };\n\n    const closeWindow = (windowId) => {\n        const index = windows.value.findIndex(w => w.id === windowId);\n        \n        if (index !== -1) {\n            windows.value.splice(index, 1);\n            \n            if (activeWindowId.value === windowId) {\n                activeWindowId.value = windows.value.length > 0 \n                    ? windows.value[windows.value.length - 1].id \n                    : null;\n            }\n            \n            saveWindowsFromLS();\n        }\n    };\n\n    const minimizeWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n        \n        if (window) {\n            window.isMinimized = true;\n            saveWindowsFromLS();\n        }\n    };\n    \n    const restoreWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n    \n        if (window) {\n            window.isMinimized = false;\n            activateWindow(windowId);\n            saveWindowsFromLS();\n        }\n    };\n\n    const toggleMaximizeWindow = (windowId) => {\n        const window = windows.value.find(w => w.id === windowId);\n\n        if (window) {\n            window.isMaximized = !window.isMaximized;\n            activateWindow(windowId);\n            saveWindowsFromLS();\n        }\n    };\n\n    // Метод для очистки всех окон\n    const clearAllWindows = () => {\n        windows.value = [];\n        activeWindowId.value = null;\n        localStorage.removeItem(LOCALSTORAGE_KEY);\n    };\n\n    const detectBrowser = () => {\n        const ua = navigator.userAgent;\n        let tem;\n        let M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n        \n        if (/trident/i.test(M[1])) {\n            tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n            return { name: 'IE', version: (tem[1] || '') };\n        }\n        \n        if (M[1] === 'Chrome') {\n            tem = ua.match(/\\b(OPR|Edge)\\/(\\d+)/);\n            if (tem != null) {\n                return { name: tem[1].replace('OPR', 'Opera'), version: tem[2] };\n            }\n        }\n        \n        M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n        \n        if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n            M.splice(1, 1, tem[1]);\n        }\n        \n        return {\n            name: M[0],\n            version: M[1]\n        };\n    };\n\n    const getLocalStorageUsage = () => {\n        try {\n            let totalBytes = 0;\n            let entries = [];\n            \n            for(let i = 0; i < localStorage.length; i++) {\n                const key = localStorage.key(i);\n                const value = localStorage.getItem(key);\n                const keySize = key.length * 2;\n                const valueSize = value.length * 2;\n                const entrySize = keySize + valueSize;\n                \n                totalBytes += entrySize;\n                \n                entries.push({\n                    key,\n                    keySize: `${key.length} симв (${keySize} байт)`,\n                    valueSize: `${value.length} симв (${valueSize} байт)`,\n                    totalSize: `${(entrySize / 1024).toFixed(2)} KB`,\n                    valuePreview: value.length > 100 ? value.substring(0, 100) + '...' : value\n                });\n            }\n            \n            return {\n                total: {\n                    bytes: totalBytes,\n                    kilobytes: (totalBytes / 1024).toFixed(2),\n                    megabytes: (totalBytes / (1024 * 1024)).toFixed(4),\n                    entries: localStorage.length\n                },\n                entries,\n                limit: {\n                    standard: '5 MB',\n                    usedPercent: ((totalBytes / (5 * 1024 * 1024)) * 100).toFixed(1)\n                }\n            };\n        } catch (error) {\n            console.error('Error calculating localStorage usage:', error);\n            return null;\n        }\n    };\n\n    return {\n        windows,\n        activeWindowId,\n        activateWindow,\n        saveWindowState,\n        getWindowState,\n        deleteWindowState,\n        openWindow,\n        closeWindow,\n        minimizeWindow,\n        restoreWindow,\n        toggleMaximizeWindow,\n        clearAllWindows,\n        getStats,\n        getLocalStorageUsage,\n        detectBrowser\n    };\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}