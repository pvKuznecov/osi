{"ast":null,"code":"import initDebug from 'debug';\nimport { VorbisStream } from '../vorbis/VorbisStream.js';\nimport * as Speex from './Speex.js';\nconst debug = initDebug('music-metadata:parser:ogg:speex');\n/**\n * Speex, RFC 5574\n * Ref:\n * - https://www.speex.org/docs/manual/speex-manual/\n * - https://tools.ietf.org/html/rfc5574\n */\nexport class SpeexStream extends VorbisStream {\n  constructor(metadata, options, _tokenizer) {\n    super(metadata, options);\n  }\n  /**\n   * Parse first Speex Ogg page\n   * @param {IPageHeader} header\n   * @param {Uint8Array} pageData\n   */\n  parseFirstPage(_header, pageData) {\n    debug('First Ogg/Speex page');\n    const speexHeader = Speex.Header.get(pageData, 0);\n    this.metadata.setFormat('codec', `Speex ${speexHeader.version}`);\n    this.metadata.setFormat('numberOfChannels', speexHeader.nb_channels);\n    this.metadata.setFormat('sampleRate', speexHeader.rate);\n    if (speexHeader.bitrate !== -1) {\n      this.metadata.setFormat('bitrate', speexHeader.bitrate);\n    }\n    this.metadata.setAudioOnly();\n  }\n}","map":{"version":3,"names":["initDebug","VorbisStream","Speex","debug","SpeexStream","constructor","metadata","options","_tokenizer","parseFirstPage","_header","pageData","speexHeader","Header","get","setFormat","version","nb_channels","rate","bitrate","setAudioOnly"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/ogg/speex/SpeexStream.js"],"sourcesContent":["import initDebug from 'debug';\nimport { VorbisStream } from '../vorbis/VorbisStream.js';\nimport * as Speex from './Speex.js';\nconst debug = initDebug('music-metadata:parser:ogg:speex');\n/**\n * Speex, RFC 5574\n * Ref:\n * - https://www.speex.org/docs/manual/speex-manual/\n * - https://tools.ietf.org/html/rfc5574\n */\nexport class SpeexStream extends VorbisStream {\n    constructor(metadata, options, _tokenizer) {\n        super(metadata, options);\n    }\n    /**\n     * Parse first Speex Ogg page\n     * @param {IPageHeader} header\n     * @param {Uint8Array} pageData\n     */\n    parseFirstPage(_header, pageData) {\n        debug('First Ogg/Speex page');\n        const speexHeader = Speex.Header.get(pageData, 0);\n        this.metadata.setFormat('codec', `Speex ${speexHeader.version}`);\n        this.metadata.setFormat('numberOfChannels', speexHeader.nb_channels);\n        this.metadata.setFormat('sampleRate', speexHeader.rate);\n        if (speexHeader.bitrate !== -1) {\n            this.metadata.setFormat('bitrate', speexHeader.bitrate);\n        }\n        this.metadata.setAudioOnly();\n    }\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,OAAO;AAC7B,SAASC,YAAY,QAAQ,2BAA2B;AACxD,OAAO,KAAKC,KAAK,MAAM,YAAY;AACnC,MAAMC,KAAK,GAAGH,SAAS,CAAC,iCAAiC,CAAC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMI,WAAW,SAASH,YAAY,CAAC;EAC1CI,WAAWA,CAACC,QAAQ,EAAEC,OAAO,EAAEC,UAAU,EAAE;IACvC,KAAK,CAACF,QAAQ,EAAEC,OAAO,CAAC;EAC5B;EACA;AACJ;AACA;AACA;AACA;EACIE,cAAcA,CAACC,OAAO,EAAEC,QAAQ,EAAE;IAC9BR,KAAK,CAAC,sBAAsB,CAAC;IAC7B,MAAMS,WAAW,GAAGV,KAAK,CAACW,MAAM,CAACC,GAAG,CAACH,QAAQ,EAAE,CAAC,CAAC;IACjD,IAAI,CAACL,QAAQ,CAACS,SAAS,CAAC,OAAO,EAAE,SAASH,WAAW,CAACI,OAAO,EAAE,CAAC;IAChE,IAAI,CAACV,QAAQ,CAACS,SAAS,CAAC,kBAAkB,EAAEH,WAAW,CAACK,WAAW,CAAC;IACpE,IAAI,CAACX,QAAQ,CAACS,SAAS,CAAC,YAAY,EAAEH,WAAW,CAACM,IAAI,CAAC;IACvD,IAAIN,WAAW,CAACO,OAAO,KAAK,CAAC,CAAC,EAAE;MAC5B,IAAI,CAACb,QAAQ,CAACS,SAAS,CAAC,SAAS,EAAEH,WAAW,CAACO,OAAO,CAAC;IAC3D;IACA,IAAI,CAACb,QAAQ,CAACc,YAAY,CAAC,CAAC;EAChC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}