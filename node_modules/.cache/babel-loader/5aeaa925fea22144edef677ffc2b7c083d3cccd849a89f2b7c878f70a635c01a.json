{"ast":null,"code":"export default {\n  name: \"SimpleWindow\",\n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    },\n    isMinimized: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'minimize', 'focus', 'restore'],\n  data() {\n    return {\n      posX: 100,\n      posY: 100,\n      isDragging: false,\n      dragOffset: {\n        x: 0,\n        y: 0\n      }\n    };\n  },\n  computed: {\n    isVisible() {\n      return !this.isMinimized;\n    },\n    windowStyle() {\n      return {\n        left: `${this.posX}px`,\n        top: `${this.posY}px`\n      };\n    }\n  },\n  mounted() {\n    // Добавляем глобальные обработчики для перетаскивания\n    document.addEventListener('mousemove', this.onDrag);\n    document.addEventListener('mouseup', this.stopDrag);\n  },\n  beforeUnmount() {\n    // Убираем глобальные обработчики при уничтожении компонента\n    document.removeEventListener('mousemove', this.onDrag);\n    document.removeEventListener('mouseup', this.stopDrag);\n  },\n  methods: {\n    focusWindow(e) {\n      this.$emit('focus', this.windowId);\n\n      // Начинаем перетаскивание, если кликнули на заголовок\n      if (e.target.closest('.window-header')) {\n        this.startDrag(e);\n      }\n    },\n    startDrag(e) {\n      this.isDragging = true;\n      this.dragOffset = {\n        x: e.clientX - this.posX,\n        y: e.clientY - this.posY\n      };\n    },\n    onDrag(e) {\n      if (!this.isDragging) return;\n      this.posX = e.clientX - this.dragOffset.x;\n      this.posY = e.clientY - this.dragOffset.y;\n\n      // Ограничиваем перемещение в пределах экрана\n      const maxX = window.innerWidth - 300;\n      const maxY = window.innerHeight - 200;\n      this.posX = Math.max(0, Math.min(this.posX, maxX));\n      this.posY = Math.max(0, Math.min(this.posY, maxY));\n    },\n    stopDrag() {\n      this.isDragging = false;\n    },\n    minimize() {\n      this.$emit('minimize', this.windowId);\n    },\n    maximize() {\n      console.log('Максимизировать окно', this.windowId);\n    },\n    close() {\n      this.$emit('close', this.windowId);\n    }\n  }\n};","map":{"version":3,"names":["name","props","windowId","String","title","type","default","appName","isMinimized","Boolean","emits","data","posX","posY","isDragging","dragOffset","x","y","computed","isVisible","windowStyle","left","top","mounted","document","addEventListener","onDrag","stopDrag","beforeUnmount","removeEventListener","methods","focusWindow","e","$emit","target","closest","startDrag","clientX","clientY","maxX","window","innerWidth","maxY","innerHeight","Math","max","min","minimize","maximize","console","log","close"],"sources":["/home/kup/my_projects/vue/osi/src/components/os/SimpleWindow/SimpleWindow.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\n<style src=\"./style.css\"></style>\n<script>\n    export default {\n        name: \"SimpleWindow\",\n        props: {\n            windowId: String,\n            title: {\n                type: String,\n                default: 'Окно'\n            },\n            appName: {\n                type: String,\n                default: 'app'\n            },\n            isMinimized: {\n                type: Boolean,\n                default: false\n            }\n        },\n        emits: ['close', 'minimize', 'focus', 'restore'],\n        data() {\n            return {\n                posX: 100,\n                posY: 100,\n                isDragging: false,\n                dragOffset: { x: 0, y: 0 }\n            }\n        },\n        computed: {\n            isVisible() { return !this.isMinimized; },\n            \n            windowStyle() {\n                return {\n                    left: `${this.posX}px`,\n                    top: `${this.posY}px`\n                }\n            }\n        },\n        mounted() {\n            // Добавляем глобальные обработчики для перетаскивания\n            document.addEventListener('mousemove', this.onDrag);\n            document.addEventListener('mouseup', this.stopDrag);\n        },\n        beforeUnmount() {\n            // Убираем глобальные обработчики при уничтожении компонента\n            document.removeEventListener('mousemove', this.onDrag);\n            document.removeEventListener('mouseup', this.stopDrag);\n        },\n        methods: {\n            focusWindow(e) {\n                this.$emit('focus', this.windowId);\n      \n                // Начинаем перетаскивание, если кликнули на заголовок\n                if (e.target.closest('.window-header')) {\n                    this.startDrag(e);\n                }\n            },\n            \n            startDrag(e) {\n                this.isDragging = true\n                this.dragOffset = {\n                    x: e.clientX - this.posX,\n                    y: e.clientY - this.posY\n                }\n            },\n            \n            onDrag(e) {\n                if (!this.isDragging) return;\n      \n                this.posX = e.clientX - this.dragOffset.x;\n                this.posY = e.clientY - this.dragOffset.y;\n      \n                // Ограничиваем перемещение в пределах экрана\n                const maxX = window.innerWidth - 300;\n                const maxY = window.innerHeight - 200;\n      \n                this.posX = Math.max(0, Math.min(this.posX, maxX));\n                this.posY = Math.max(0, Math.min(this.posY, maxY));\n            },\n    \n            stopDrag() { this.isDragging = false; },\n    \n            minimize() { this.$emit('minimize', this.windowId); },\n    \n    maximize() {\n      console.log('Максимизировать окно', this.windowId)\n    },\n    \n    close() {\n      this.$emit('close', this.windowId)\n    }\n  }\n}\n</script>"],"mappings":"AAGI,eAAe;EACXA,IAAI,EAAE,cAAc;EACpBC,KAAK,EAAE;IACHC,QAAQ,EAAEC,MAAM;IAChBC,KAAK,EAAE;MACHC,IAAI,EAAEF,MAAM;MACZG,OAAO,EAAE;IACb,CAAC;IACDC,OAAO,EAAE;MACLF,IAAI,EAAEF,MAAM;MACZG,OAAO,EAAE;IACb,CAAC;IACDE,WAAW,EAAE;MACTH,IAAI,EAAEI,OAAO;MACbH,OAAO,EAAE;IACb;EACJ,CAAC;EACDI,KAAK,EAAE,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,CAAC;EAChDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,IAAI,EAAE,GAAG;MACTC,IAAI,EAAE,GAAG;MACTC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE;QAAEC,CAAC,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE;IAC7B;EACJ,CAAC;EACDC,QAAQ,EAAE;IACNC,SAASA,CAAA,EAAG;MAAE,OAAO,CAAC,IAAI,CAACX,WAAW;IAAE,CAAC;IAEzCY,WAAWA,CAAA,EAAG;MACV,OAAO;QACHC,IAAI,EAAE,GAAG,IAAI,CAACT,IAAI,IAAI;QACtBU,GAAG,EAAE,GAAG,IAAI,CAACT,IAAI;MACrB;IACJ;EACJ,CAAC;EACDU,OAAOA,CAAA,EAAG;IACN;IACAC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,MAAM,CAAC;IACnDF,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACE,QAAQ,CAAC;EACvD,CAAC;EACDC,aAAaA,CAAA,EAAG;IACZ;IACAJ,QAAQ,CAACK,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACH,MAAM,CAAC;IACtDF,QAAQ,CAACK,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACF,QAAQ,CAAC;EAC1D,CAAC;EACDG,OAAO,EAAE;IACLC,WAAWA,CAACC,CAAC,EAAE;MACX,IAAI,CAACC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC/B,QAAQ,CAAC;;MAElC;MACA,IAAI8B,CAAC,CAACE,MAAM,CAACC,OAAO,CAAC,gBAAgB,CAAC,EAAE;QACpC,IAAI,CAACC,SAAS,CAACJ,CAAC,CAAC;MACrB;IACJ,CAAC;IAEDI,SAASA,CAACJ,CAAC,EAAE;MACT,IAAI,CAAClB,UAAS,GAAI,IAAG;MACrB,IAAI,CAACC,UAAS,GAAI;QACdC,CAAC,EAAEgB,CAAC,CAACK,OAAM,GAAI,IAAI,CAACzB,IAAI;QACxBK,CAAC,EAAEe,CAAC,CAACM,OAAM,GAAI,IAAI,CAACzB;MACxB;IACJ,CAAC;IAEDa,MAAMA,CAACM,CAAC,EAAE;MACN,IAAI,CAAC,IAAI,CAAClB,UAAU,EAAE;MAEtB,IAAI,CAACF,IAAG,GAAIoB,CAAC,CAACK,OAAM,GAAI,IAAI,CAACtB,UAAU,CAACC,CAAC;MACzC,IAAI,CAACH,IAAG,GAAImB,CAAC,CAACM,OAAM,GAAI,IAAI,CAACvB,UAAU,CAACE,CAAC;;MAEzC;MACA,MAAMsB,IAAG,GAAIC,MAAM,CAACC,UAAS,GAAI,GAAG;MACpC,MAAMC,IAAG,GAAIF,MAAM,CAACG,WAAU,GAAI,GAAG;MAErC,IAAI,CAAC/B,IAAG,GAAIgC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,IAAI,CAAClC,IAAI,EAAE2B,IAAI,CAAC,CAAC;MAClD,IAAI,CAAC1B,IAAG,GAAI+B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,IAAI,CAACjC,IAAI,EAAE6B,IAAI,CAAC,CAAC;IACtD,CAAC;IAEDf,QAAQA,CAAA,EAAG;MAAE,IAAI,CAACb,UAAS,GAAI,KAAK;IAAE,CAAC;IAEvCiC,QAAQA,CAAA,EAAG;MAAE,IAAI,CAACd,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC/B,QAAQ,CAAC;IAAE,CAAC;IAE7D8C,QAAQA,CAAA,EAAG;MACTC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAChD,QAAQ;IACnD,CAAC;IAEDiD,KAAKA,CAAA,EAAG;MACN,IAAI,CAAClB,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC/B,QAAQ;IACnC;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}