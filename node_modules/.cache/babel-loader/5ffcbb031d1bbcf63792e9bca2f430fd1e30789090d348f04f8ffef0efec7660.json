{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport { textDecode } from '@borewit/text-codec';\nexport const endTag2 = 'LYRICS200';\nexport async function getLyricsHeaderLength(tokenizer) {\n  const fileSize = tokenizer.fileInfo.size;\n  if (fileSize >= 143) {\n    const buf = new Uint8Array(15);\n    const position = tokenizer.position;\n    await tokenizer.readBuffer(buf, {\n      position: fileSize - 143\n    });\n    tokenizer.setPosition(position); // Restore position\n    const txt = textDecode(buf, 'latin1');\n    const tag = txt.substring(6);\n    if (tag === endTag2) {\n      return Number.parseInt(txt.substring(0, 6), 10) + 15;\n    }\n  }\n  return 0;\n}","map":{"version":3,"names":["textDecode","endTag2","getLyricsHeaderLength","tokenizer","fileSize","fileInfo","size","buf","Uint8Array","position","readBuffer","setPosition","txt","tag","substring","Number","parseInt"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/lyrics3/Lyrics3.js"],"sourcesContent":["import { textDecode } from '@borewit/text-codec';\nexport const endTag2 = 'LYRICS200';\nexport async function getLyricsHeaderLength(tokenizer) {\n    const fileSize = tokenizer.fileInfo.size;\n    if (fileSize >= 143) {\n        const buf = new Uint8Array(15);\n        const position = tokenizer.position;\n        await tokenizer.readBuffer(buf, { position: fileSize - 143 });\n        tokenizer.setPosition(position); // Restore position\n        const txt = textDecode(buf, 'latin1');\n        const tag = txt.substring(6);\n        if (tag === endTag2) {\n            return Number.parseInt(txt.substring(0, 6), 10) + 15;\n        }\n    }\n    return 0;\n}\n"],"mappings":";;;;;;;;AAAA,SAASA,UAAU,QAAQ,qBAAqB;AAChD,OAAO,MAAMC,OAAO,GAAG,WAAW;AAClC,OAAO,eAAeC,qBAAqBA,CAACC,SAAS,EAAE;EACnD,MAAMC,QAAQ,GAAGD,SAAS,CAACE,QAAQ,CAACC,IAAI;EACxC,IAAIF,QAAQ,IAAI,GAAG,EAAE;IACjB,MAAMG,GAAG,GAAG,IAAIC,UAAU,CAAC,EAAE,CAAC;IAC9B,MAAMC,QAAQ,GAAGN,SAAS,CAACM,QAAQ;IACnC,MAAMN,SAAS,CAACO,UAAU,CAACH,GAAG,EAAE;MAAEE,QAAQ,EAAEL,QAAQ,GAAG;IAAI,CAAC,CAAC;IAC7DD,SAAS,CAACQ,WAAW,CAACF,QAAQ,CAAC,CAAC,CAAC;IACjC,MAAMG,GAAG,GAAGZ,UAAU,CAACO,GAAG,EAAE,QAAQ,CAAC;IACrC,MAAMM,GAAG,GAAGD,GAAG,CAACE,SAAS,CAAC,CAAC,CAAC;IAC5B,IAAID,GAAG,KAAKZ,OAAO,EAAE;MACjB,OAAOc,MAAM,CAACC,QAAQ,CAACJ,GAAG,CAACE,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE;IACxD;EACJ;EACA,OAAO,CAAC;AACZ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}