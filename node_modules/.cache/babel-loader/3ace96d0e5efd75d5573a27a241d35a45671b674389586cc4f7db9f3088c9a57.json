{"ast":null,"code":"import { EndOfStreamError } from './stream/index.js';\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\nexport class BufferTokenizer extends AbstractTokenizer {\n  /**\n   * Construct BufferTokenizer\n   * @param uint8Array - Uint8Array to tokenize\n   * @param options Tokenizer options\n   */\n  constructor(uint8Array, options) {\n    super(options);\n    this.uint8Array = uint8Array;\n    this.fileInfo = {\n      ...(options?.fileInfo ?? {}),\n      ...{\n        size: uint8Array.length\n      }\n    };\n  }\n  /**\n   * Read buffer from tokenizer\n   * @param uint8Array - Uint8Array to tokenize\n   * @param options - Read behaviour options\n   * @returns {Promise<number>}\n   */\n  async readBuffer(uint8Array, options) {\n    if (options?.position) {\n      this.position = options.position;\n    }\n    const bytesRead = await this.peekBuffer(uint8Array, options);\n    this.position += bytesRead;\n    return bytesRead;\n  }\n  /**\n   * Peek (read ahead) buffer from tokenizer\n   * @param uint8Array\n   * @param options - Read behaviour options\n   * @returns {Promise<number>}\n   */\n  async peekBuffer(uint8Array, options) {\n    const normOptions = this.normalizeOptions(uint8Array, options);\n    const bytes2read = Math.min(this.uint8Array.length - normOptions.position, normOptions.length);\n    if (!normOptions.mayBeLess && bytes2read < normOptions.length) {\n      throw new EndOfStreamError();\n    }\n    uint8Array.set(this.uint8Array.subarray(normOptions.position, normOptions.position + bytes2read));\n    return bytes2read;\n  }\n  close() {\n    return super.close();\n  }\n  supportsRandomAccess() {\n    return true;\n  }\n  setPosition(position) {\n    this.position = position;\n  }\n}","map":{"version":3,"names":["EndOfStreamError","AbstractTokenizer","BufferTokenizer","constructor","uint8Array","options","fileInfo","size","length","readBuffer","position","bytesRead","peekBuffer","normOptions","normalizeOptions","bytes2read","Math","min","mayBeLess","set","subarray","close","supportsRandomAccess","setPosition"],"sources":["/home/kup/my_projects/vue/osi/node_modules/strtok3/lib/BufferTokenizer.js"],"sourcesContent":["import { EndOfStreamError } from './stream/index.js';\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\nexport class BufferTokenizer extends AbstractTokenizer {\n    /**\n     * Construct BufferTokenizer\n     * @param uint8Array - Uint8Array to tokenize\n     * @param options Tokenizer options\n     */\n    constructor(uint8Array, options) {\n        super(options);\n        this.uint8Array = uint8Array;\n        this.fileInfo = { ...options?.fileInfo ?? {}, ...{ size: uint8Array.length } };\n    }\n    /**\n     * Read buffer from tokenizer\n     * @param uint8Array - Uint8Array to tokenize\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async readBuffer(uint8Array, options) {\n        if (options?.position) {\n            this.position = options.position;\n        }\n        const bytesRead = await this.peekBuffer(uint8Array, options);\n        this.position += bytesRead;\n        return bytesRead;\n    }\n    /**\n     * Peek (read ahead) buffer from tokenizer\n     * @param uint8Array\n     * @param options - Read behaviour options\n     * @returns {Promise<number>}\n     */\n    async peekBuffer(uint8Array, options) {\n        const normOptions = this.normalizeOptions(uint8Array, options);\n        const bytes2read = Math.min(this.uint8Array.length - normOptions.position, normOptions.length);\n        if ((!normOptions.mayBeLess) && bytes2read < normOptions.length) {\n            throw new EndOfStreamError();\n        }\n        uint8Array.set(this.uint8Array.subarray(normOptions.position, normOptions.position + bytes2read));\n        return bytes2read;\n    }\n    close() {\n        return super.close();\n    }\n    supportsRandomAccess() {\n        return true;\n    }\n    setPosition(position) {\n        this.position = position;\n    }\n}\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,OAAO,MAAMC,eAAe,SAASD,iBAAiB,CAAC;EACnD;AACJ;AACA;AACA;AACA;EACIE,WAAWA,CAACC,UAAU,EAAEC,OAAO,EAAE;IAC7B,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACE,QAAQ,GAAG;MAAE,IAAGD,OAAO,EAAEC,QAAQ,IAAI,CAAC,CAAC;MAAE,GAAG;QAAEC,IAAI,EAAEH,UAAU,CAACI;MAAO;IAAE,CAAC;EAClF;EACA;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMC,UAAUA,CAACL,UAAU,EAAEC,OAAO,EAAE;IAClC,IAAIA,OAAO,EAAEK,QAAQ,EAAE;MACnB,IAAI,CAACA,QAAQ,GAAGL,OAAO,CAACK,QAAQ;IACpC;IACA,MAAMC,SAAS,GAAG,MAAM,IAAI,CAACC,UAAU,CAACR,UAAU,EAAEC,OAAO,CAAC;IAC5D,IAAI,CAACK,QAAQ,IAAIC,SAAS;IAC1B,OAAOA,SAAS;EACpB;EACA;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMC,UAAUA,CAACR,UAAU,EAAEC,OAAO,EAAE;IAClC,MAAMQ,WAAW,GAAG,IAAI,CAACC,gBAAgB,CAACV,UAAU,EAAEC,OAAO,CAAC;IAC9D,MAAMU,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACb,UAAU,CAACI,MAAM,GAAGK,WAAW,CAACH,QAAQ,EAAEG,WAAW,CAACL,MAAM,CAAC;IAC9F,IAAK,CAACK,WAAW,CAACK,SAAS,IAAKH,UAAU,GAAGF,WAAW,CAACL,MAAM,EAAE;MAC7D,MAAM,IAAIR,gBAAgB,CAAC,CAAC;IAChC;IACAI,UAAU,CAACe,GAAG,CAAC,IAAI,CAACf,UAAU,CAACgB,QAAQ,CAACP,WAAW,CAACH,QAAQ,EAAEG,WAAW,CAACH,QAAQ,GAAGK,UAAU,CAAC,CAAC;IACjG,OAAOA,UAAU;EACrB;EACAM,KAAKA,CAAA,EAAG;IACJ,OAAO,KAAK,CAACA,KAAK,CAAC,CAAC;EACxB;EACAC,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI;EACf;EACAC,WAAWA,CAACb,QAAQ,EAAE;IAClB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC5B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}