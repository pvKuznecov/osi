{"ast":null,"code":"import { textDecode, textEncode } from '@borewit/text-codec';\nimport * as util from './Util.js';\nimport { InternalParserError, FieldDecodingError } from '../ParseError.js';\nconst validFourCC = /^[\\x21-\\x7e©][\\x20-\\x7e\\x00()]{3}/;\n/**\n * Token for read FourCC\n * Ref: https://en.wikipedia.org/wiki/FourCC\n */\nexport const FourCcToken = {\n  len: 4,\n  get: (buf, off) => {\n    const id = textDecode(buf.subarray(off, off + FourCcToken.len), 'latin1');\n    if (!id.match(validFourCC)) {\n      throw new FieldDecodingError(`FourCC contains invalid characters: ${util.a2hex(id)} \"${id}\"`);\n    }\n    return id;\n  },\n  put: (buffer, offset, id) => {\n    const str = textEncode(id, 'latin1');\n    if (str.length !== 4) throw new InternalParserError('Invalid length');\n    buffer.set(str, offset);\n    return offset + 4;\n  }\n};","map":{"version":3,"names":["textDecode","textEncode","util","InternalParserError","FieldDecodingError","validFourCC","FourCcToken","len","get","buf","off","id","subarray","match","a2hex","put","buffer","offset","str","length","set"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/common/FourCC.js"],"sourcesContent":["import { textDecode, textEncode } from '@borewit/text-codec';\nimport * as util from './Util.js';\nimport { InternalParserError, FieldDecodingError } from '../ParseError.js';\nconst validFourCC = /^[\\x21-\\x7e©][\\x20-\\x7e\\x00()]{3}/;\n/**\n * Token for read FourCC\n * Ref: https://en.wikipedia.org/wiki/FourCC\n */\nexport const FourCcToken = {\n    len: 4,\n    get: (buf, off) => {\n        const id = textDecode(buf.subarray(off, off + FourCcToken.len), 'latin1');\n        if (!id.match(validFourCC)) {\n            throw new FieldDecodingError(`FourCC contains invalid characters: ${util.a2hex(id)} \"${id}\"`);\n        }\n        return id;\n    },\n    put: (buffer, offset, id) => {\n        const str = textEncode(id, 'latin1');\n        if (str.length !== 4)\n            throw new InternalParserError('Invalid length');\n        buffer.set(str, offset);\n        return offset + 4;\n    }\n};\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,UAAU,QAAQ,qBAAqB;AAC5D,OAAO,KAAKC,IAAI,MAAM,WAAW;AACjC,SAASC,mBAAmB,EAAEC,kBAAkB,QAAQ,kBAAkB;AAC1E,MAAMC,WAAW,GAAG,mCAAmC;AACvD;AACA;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAG;EACvBC,GAAG,EAAE,CAAC;EACNC,GAAG,EAAEA,CAACC,GAAG,EAAEC,GAAG,KAAK;IACf,MAAMC,EAAE,GAAGX,UAAU,CAACS,GAAG,CAACG,QAAQ,CAACF,GAAG,EAAEA,GAAG,GAAGJ,WAAW,CAACC,GAAG,CAAC,EAAE,QAAQ,CAAC;IACzE,IAAI,CAACI,EAAE,CAACE,KAAK,CAACR,WAAW,CAAC,EAAE;MACxB,MAAM,IAAID,kBAAkB,CAAC,uCAAuCF,IAAI,CAACY,KAAK,CAACH,EAAE,CAAC,KAAKA,EAAE,GAAG,CAAC;IACjG;IACA,OAAOA,EAAE;EACb,CAAC;EACDI,GAAG,EAAEA,CAACC,MAAM,EAAEC,MAAM,EAAEN,EAAE,KAAK;IACzB,MAAMO,GAAG,GAAGjB,UAAU,CAACU,EAAE,EAAE,QAAQ,CAAC;IACpC,IAAIO,GAAG,CAACC,MAAM,KAAK,CAAC,EAChB,MAAM,IAAIhB,mBAAmB,CAAC,gBAAgB,CAAC;IACnDa,MAAM,CAACI,GAAG,CAACF,GAAG,EAAED,MAAM,CAAC;IACvB,OAAOA,MAAM,GAAG,CAAC;EACrB;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}