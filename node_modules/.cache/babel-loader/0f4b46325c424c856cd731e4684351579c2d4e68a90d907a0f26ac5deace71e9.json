{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport { WebStreamReader } from './WebStreamReader.js';\n/**\n * Read from a WebStream using a BYOB reader\n * Reference: https://nodejs.org/api/webstreams.html#class-readablestreambyobreader\n */\nexport class WebStreamByobReader extends WebStreamReader {\n  /**\n   * Read from stream\n   * @param buffer - Target Uint8Array (or Buffer) to store data read from stream in\n   * @param mayBeLess - If true, may fill the buffer partially\n   * @protected Bytes read\n   */\n  async readFromStream(buffer, mayBeLess) {\n    if (buffer.length === 0) return 0;\n    // @ts-ignore\n    const result = await this.reader.read(new Uint8Array(buffer.length), {\n      min: mayBeLess ? undefined : buffer.length\n    });\n    if (result.done) {\n      this.endOfStream = result.done;\n    }\n    if (result.value) {\n      buffer.set(result.value);\n      return result.value.length;\n    }\n    return 0;\n  }\n}","map":{"version":3,"names":["WebStreamReader","WebStreamByobReader","readFromStream","buffer","mayBeLess","length","result","reader","read","Uint8Array","min","undefined","done","endOfStream","value","set"],"sources":["/home/kup/my_projects/vue/osi/node_modules/strtok3/lib/stream/WebStreamByobReader.js"],"sourcesContent":["import { WebStreamReader } from './WebStreamReader.js';\n/**\n * Read from a WebStream using a BYOB reader\n * Reference: https://nodejs.org/api/webstreams.html#class-readablestreambyobreader\n */\nexport class WebStreamByobReader extends WebStreamReader {\n    /**\n     * Read from stream\n     * @param buffer - Target Uint8Array (or Buffer) to store data read from stream in\n     * @param mayBeLess - If true, may fill the buffer partially\n     * @protected Bytes read\n     */\n    async readFromStream(buffer, mayBeLess) {\n        if (buffer.length === 0)\n            return 0;\n        // @ts-ignore\n        const result = await this.reader.read(new Uint8Array(buffer.length), { min: mayBeLess ? undefined : buffer.length });\n        if (result.done) {\n            this.endOfStream = result.done;\n        }\n        if (result.value) {\n            buffer.set(result.value);\n            return result.value.length;\n        }\n        return 0;\n    }\n}\n"],"mappings":";;;;;;;;AAAA,SAASA,eAAe,QAAQ,sBAAsB;AACtD;AACA;AACA;AACA;AACA,OAAO,MAAMC,mBAAmB,SAASD,eAAe,CAAC;EACrD;AACJ;AACA;AACA;AACA;AACA;EACI,MAAME,cAAcA,CAACC,MAAM,EAAEC,SAAS,EAAE;IACpC,IAAID,MAAM,CAACE,MAAM,KAAK,CAAC,EACnB,OAAO,CAAC;IACZ;IACA,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,IAAIC,UAAU,CAACN,MAAM,CAACE,MAAM,CAAC,EAAE;MAAEK,GAAG,EAAEN,SAAS,GAAGO,SAAS,GAAGR,MAAM,CAACE;IAAO,CAAC,CAAC;IACpH,IAAIC,MAAM,CAACM,IAAI,EAAE;MACb,IAAI,CAACC,WAAW,GAAGP,MAAM,CAACM,IAAI;IAClC;IACA,IAAIN,MAAM,CAACQ,KAAK,EAAE;MACdX,MAAM,CAACY,GAAG,CAACT,MAAM,CAACQ,KAAK,CAAC;MACxB,OAAOR,MAAM,CAACQ,KAAK,CAACT,MAAM;IAC9B;IACA,OAAO,CAAC;EACZ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}