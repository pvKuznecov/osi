{"ast":null,"code":"import initDebug from 'debug';\nimport * as Token from 'token-types';\nimport { AbstractID3Parser } from '../id3v2/AbstractID3Parser.js';\nimport { MpcSv8Parser } from './sv8/MpcSv8Parser.js';\nimport { MpcSv7Parser } from './sv7/MpcSv7Parser.js';\nimport { MusepackContentError } from './MusepackConentError.js';\nconst debug = initDebug('music-metadata:parser:musepack');\nexport class MusepackParser extends AbstractID3Parser {\n  async postId3v2Parse() {\n    const signature = await this.tokenizer.peekToken(new Token.StringType(3, 'latin1'));\n    let mpcParser;\n    switch (signature) {\n      case 'MP+':\n        {\n          debug('Stream-version 7');\n          mpcParser = new MpcSv7Parser(this.metadata, this.tokenizer, this.options);\n          break;\n        }\n      case 'MPC':\n        {\n          debug('Stream-version 8');\n          mpcParser = new MpcSv8Parser(this.metadata, this.tokenizer, this.options);\n          break;\n        }\n      default:\n        {\n          throw new MusepackContentError('Invalid signature prefix');\n        }\n    }\n    this.metadata.setAudioOnly();\n    return mpcParser.parse();\n  }\n}","map":{"version":3,"names":["initDebug","Token","AbstractID3Parser","MpcSv8Parser","MpcSv7Parser","MusepackContentError","debug","MusepackParser","postId3v2Parse","signature","tokenizer","peekToken","StringType","mpcParser","metadata","options","setAudioOnly","parse"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/musepack/MusepackParser.js"],"sourcesContent":["import initDebug from 'debug';\nimport * as Token from 'token-types';\nimport { AbstractID3Parser } from '../id3v2/AbstractID3Parser.js';\nimport { MpcSv8Parser } from './sv8/MpcSv8Parser.js';\nimport { MpcSv7Parser } from './sv7/MpcSv7Parser.js';\nimport { MusepackContentError } from './MusepackConentError.js';\nconst debug = initDebug('music-metadata:parser:musepack');\nexport class MusepackParser extends AbstractID3Parser {\n    async postId3v2Parse() {\n        const signature = await this.tokenizer.peekToken(new Token.StringType(3, 'latin1'));\n        let mpcParser;\n        switch (signature) {\n            case 'MP+': {\n                debug('Stream-version 7');\n                mpcParser = new MpcSv7Parser(this.metadata, this.tokenizer, this.options);\n                break;\n            }\n            case 'MPC': {\n                debug('Stream-version 8');\n                mpcParser = new MpcSv8Parser(this.metadata, this.tokenizer, this.options);\n                break;\n            }\n            default: {\n                throw new MusepackContentError('Invalid signature prefix');\n            }\n        }\n        this.metadata.setAudioOnly();\n        return mpcParser.parse();\n    }\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,OAAO;AAC7B,OAAO,KAAKC,KAAK,MAAM,aAAa;AACpC,SAASC,iBAAiB,QAAQ,+BAA+B;AACjE,SAASC,YAAY,QAAQ,uBAAuB;AACpD,SAASC,YAAY,QAAQ,uBAAuB;AACpD,SAASC,oBAAoB,QAAQ,0BAA0B;AAC/D,MAAMC,KAAK,GAAGN,SAAS,CAAC,gCAAgC,CAAC;AACzD,OAAO,MAAMO,cAAc,SAASL,iBAAiB,CAAC;EAClD,MAAMM,cAAcA,CAAA,EAAG;IACnB,MAAMC,SAAS,GAAG,MAAM,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,IAAIV,KAAK,CAACW,UAAU,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;IACnF,IAAIC,SAAS;IACb,QAAQJ,SAAS;MACb,KAAK,KAAK;QAAE;UACRH,KAAK,CAAC,kBAAkB,CAAC;UACzBO,SAAS,GAAG,IAAIT,YAAY,CAAC,IAAI,CAACU,QAAQ,EAAE,IAAI,CAACJ,SAAS,EAAE,IAAI,CAACK,OAAO,CAAC;UACzE;QACJ;MACA,KAAK,KAAK;QAAE;UACRT,KAAK,CAAC,kBAAkB,CAAC;UACzBO,SAAS,GAAG,IAAIV,YAAY,CAAC,IAAI,CAACW,QAAQ,EAAE,IAAI,CAACJ,SAAS,EAAE,IAAI,CAACK,OAAO,CAAC;UACzE;QACJ;MACA;QAAS;UACL,MAAM,IAAIV,oBAAoB,CAAC,0BAA0B,CAAC;QAC9D;IACJ;IACA,IAAI,CAACS,QAAQ,CAACE,YAAY,CAAC,CAAC;IAC5B,OAAOH,SAAS,CAACI,KAAK,CAAC,CAAC;EAC5B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}