{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\n// import { useOSIAppsStore } from '@/stores/os.apps.store';\nimport { useOsStore } from '@/stores/os.store';\nimport { appsConfig } from '@/config/applications';\nexport default {\n  name: \"TaskBar\",\n  data() {\n    return {\n      currentTime: '',\n      currentDate: '',\n      timer: null,\n      showMenu: false\n    };\n  },\n  computed: {\n    osStore() {\n      return useOsStore();\n    },\n    appsList() {\n      const SMApps = appsConfig.getStartMenuApps();\n      return SMApps.sort((n1, n2) => n1.label.toLowerCase() >= n2.label.toLowerCase() ? 1 : -1);\n    }\n  },\n  methods: {\n    updateTime() {\n      const now = new Date();\n      this.currentDate = now.toLocaleDateString();\n      this.currentTime = now.toLocaleTimeString('ru-RU', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    toggleWindow(windowId) {\n      const window = this.osStore.windows.find(w => w.id === windowId);\n      if (window) {\n        console.log('window', window);\n        if (window.isMinimized) {\n          this.osStore.restoreWindow(windowId);\n        } else {\n          this.osStore.activateWindow(windowId);\n        }\n      }\n    },\n    toggleStartMenu() {\n      this.showMenu = !this.showMenu;\n    },\n    launchApp(appData) {\n      const appName = appData.name;\n      const contentApp = appData.contentapp;\n\n      // Ищем окно по windowId или по типу приложения\n      const existingWindow = this.osStore.windows.find(w => w.appName === appName && w.contentApp === contentApp);\n      if (existingWindow) {\n        // Если окно существует, активируем его\n        if (existingWindow.isMinimized) {\n          this.osStore.restoreWindow(existingWindow.id);\n        } else {\n          this.osStore.activateWindow(existingWindow.id);\n        }\n      } else {\n        // Создаем новое окно\n        this.osStore.openWindow({\n          ...appData,\n          defWidth: appData.defWidth || 800,\n          defHeight: appData.defHeight || 600\n        });\n      }\n      this.toggleStartMenu();\n    }\n  },\n  mounted() {\n    this.updateTime();\n    this.timer = setInterval(this.updateTime, 1000);\n  },\n  beforeUnmount() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  }\n};","map":{"version":3,"names":["useOsStore","appsConfig","name","data","currentTime","currentDate","timer","showMenu","computed","osStore","appsList","SMApps","getStartMenuApps","sort","n1","n2","label","toLowerCase","methods","updateTime","now","Date","toLocaleDateString","toLocaleTimeString","hour","minute","toggleWindow","windowId","window","windows","find","w","id","console","log","isMinimized","restoreWindow","activateWindow","toggleStartMenu","launchApp","appData","appName","contentApp","contentapp","existingWindow","openWindow","defWidth","defHeight","mounted","setInterval","beforeUnmount","clearInterval"],"sources":["C:\\projects\\My projects\\Vue\\osi\\src\\components\\os\\TaskBar\\TaskBar.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\r\n<style src=\"./style.css\"></style>\r\n<script>\r\n    // import { useOSIAppsStore } from '@/stores/os.apps.store';\r\n    import { useOsStore } from '@/stores/os.store';\r\n    import { appsConfig } from '@/config/applications';\r\n\r\n    export default {\r\n        name: \"TaskBar\",\r\n  \r\n        data() {\r\n            return {\r\n                currentTime: '',\r\n                currentDate: '',\r\n                timer: null,\r\n                showMenu: false,\r\n            };\r\n        },\r\n  \r\n        computed: {\r\n            osStore() {\r\n                return useOsStore();\r\n            },\r\n\r\n            appsList() {\r\n                const SMApps = appsConfig.getStartMenuApps();\r\n                return SMApps.sort((n1, n2) => (n1.label.toLowerCase() >= n2.label.toLowerCase()) ? 1 : -1);\r\n            }\r\n        },\r\n  \r\n        methods: {\r\n            updateTime() {\r\n                const now = new Date();\r\n\r\n                this.currentDate = now.toLocaleDateString();\r\n                this.currentTime = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});\r\n            },\r\n    \r\n            toggleWindow(windowId) {\r\n                const window = this.osStore.windows.find(w => w.id === windowId);\r\n                \r\n                if (window) {\r\n                    console.log('window', window);\r\n                    if (window.isMinimized) {\r\n                        this.osStore.restoreWindow(windowId);\r\n                    } else {\r\n                        this.osStore.activateWindow(windowId);\r\n                    }\r\n                }\r\n            },\r\n    \r\n            toggleStartMenu() {\r\n                this.showMenu = !this.showMenu;\r\n            },\r\n\r\n            launchApp(appData) {\r\n                const appName = appData.name;\r\n                const contentApp = appData.contentapp;\r\n\r\n                // Ищем окно по windowId или по типу приложения\r\n                const existingWindow = this.osStore.windows.find(\r\n                    w => w.appName === appName && w.contentApp === contentApp\r\n                );\r\n                \r\n                if (existingWindow) {\r\n                    // Если окно существует, активируем его\r\n                    if (existingWindow.isMinimized) {\r\n                        this.osStore.restoreWindow(existingWindow.id);\r\n                    } else {\r\n                        this.osStore.activateWindow(existingWindow.id);\r\n                    }\r\n                } else {\r\n                    // Создаем новое окно\r\n                    this.osStore.openWindow({\r\n                        ...appData,\r\n                        defWidth: appData.defWidth || 800,\r\n                        defHeight: appData.defHeight || 600\r\n                    });\r\n                }\r\n\r\n                this.toggleStartMenu();\r\n            }\r\n        },\r\n  \r\n        mounted() {\r\n            this.updateTime();\r\n            this.timer = setInterval(this.updateTime, 1000);\r\n        },\r\n  \r\n        beforeUnmount() {\r\n            if (this.timer) {\r\n                clearInterval(this.timer);\r\n            }\r\n        }\r\n    }\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}