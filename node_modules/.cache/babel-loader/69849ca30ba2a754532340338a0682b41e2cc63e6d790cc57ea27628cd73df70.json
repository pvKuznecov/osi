{"ast":null,"code":"import * as Token from 'token-types';\nimport * as util from '../../common/Util.js';\nimport { textDecode } from '@borewit/text-codec';\n/**\r\n * BASIC STRUCTURE\r\n */\nexport const Header = {\n  len: 6 * 4,\n  get: (buf, off) => {\n    const header = {\n      // word 0\n      signature: textDecode(buf.subarray(off, off + 3), 'latin1'),\n      // versionIndex number * 1000 (3.81 = 3810) (remember that 4-byte alignment causes this to take 4-bytes)\n      streamMinorVersion: util.getBitAllignedNumber(buf, off + 3, 0, 4),\n      streamMajorVersion: util.getBitAllignedNumber(buf, off + 3, 4, 4),\n      // word 1\n      frameCount: Token.UINT32_LE.get(buf, off + 4),\n      // word 2\n      maxLevel: Token.UINT16_LE.get(buf, off + 8),\n      sampleFrequency: [44100, 48000, 37800, 32000][util.getBitAllignedNumber(buf, off + 10, 0, 2)],\n      link: util.getBitAllignedNumber(buf, off + 10, 2, 2),\n      profile: util.getBitAllignedNumber(buf, off + 10, 4, 4),\n      maxBand: util.getBitAllignedNumber(buf, off + 11, 0, 6),\n      intensityStereo: util.isBitSet(buf, off + 11, 6),\n      midSideStereo: util.isBitSet(buf, off + 11, 7),\n      // word 3\n      titlePeak: Token.UINT16_LE.get(buf, off + 12),\n      titleGain: Token.UINT16_LE.get(buf, off + 14),\n      // word 4\n      albumPeak: Token.UINT16_LE.get(buf, off + 16),\n      albumGain: Token.UINT16_LE.get(buf, off + 18),\n      // word\n      lastFrameLength: Token.UINT32_LE.get(buf, off + 20) >>> 20 & 0x7FF,\n      trueGapless: util.isBitSet(buf, off + 23, 0)\n    };\n    header.lastFrameLength = header.trueGapless ? Token.UINT32_LE.get(buf, 20) >>> 20 & 0x7FF : 0;\n    return header;\n  }\n};","map":{"version":3,"names":["Token","util","textDecode","Header","len","get","buf","off","header","signature","subarray","streamMinorVersion","getBitAllignedNumber","streamMajorVersion","frameCount","UINT32_LE","maxLevel","UINT16_LE","sampleFrequency","link","profile","maxBand","intensityStereo","isBitSet","midSideStereo","titlePeak","titleGain","albumPeak","albumGain","lastFrameLength","trueGapless"],"sources":["C:/projects/My projects/Vue/osi/node_modules/music-metadata/lib/musepack/sv7/StreamVersion7.js"],"sourcesContent":["import * as Token from 'token-types';\r\nimport * as util from '../../common/Util.js';\r\nimport { textDecode } from '@borewit/text-codec';\r\n/**\r\n * BASIC STRUCTURE\r\n */\r\nexport const Header = {\r\n    len: 6 * 4,\r\n    get: (buf, off) => {\r\n        const header = {\r\n            // word 0\r\n            signature: textDecode(buf.subarray(off, off + 3), 'latin1'),\r\n            // versionIndex number * 1000 (3.81 = 3810) (remember that 4-byte alignment causes this to take 4-bytes)\r\n            streamMinorVersion: util.getBitAllignedNumber(buf, off + 3, 0, 4),\r\n            streamMajorVersion: util.getBitAllignedNumber(buf, off + 3, 4, 4),\r\n            // word 1\r\n            frameCount: Token.UINT32_LE.get(buf, off + 4),\r\n            // word 2\r\n            maxLevel: Token.UINT16_LE.get(buf, off + 8),\r\n            sampleFrequency: [44100, 48000, 37800, 32000][util.getBitAllignedNumber(buf, off + 10, 0, 2)],\r\n            link: util.getBitAllignedNumber(buf, off + 10, 2, 2),\r\n            profile: util.getBitAllignedNumber(buf, off + 10, 4, 4),\r\n            maxBand: util.getBitAllignedNumber(buf, off + 11, 0, 6),\r\n            intensityStereo: util.isBitSet(buf, off + 11, 6),\r\n            midSideStereo: util.isBitSet(buf, off + 11, 7),\r\n            // word 3\r\n            titlePeak: Token.UINT16_LE.get(buf, off + 12),\r\n            titleGain: Token.UINT16_LE.get(buf, off + 14),\r\n            // word 4\r\n            albumPeak: Token.UINT16_LE.get(buf, off + 16),\r\n            albumGain: Token.UINT16_LE.get(buf, off + 18),\r\n            // word\r\n            lastFrameLength: (Token.UINT32_LE.get(buf, off + 20) >>> 20) & 0x7FF,\r\n            trueGapless: util.isBitSet(buf, off + 23, 0)\r\n        };\r\n        header.lastFrameLength = header.trueGapless ? (Token.UINT32_LE.get(buf, 20) >>> 20) & 0x7FF : 0;\r\n        return header;\r\n    }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}