{"ast":null,"code":"import { computed, ref } from 'vue';\n\n// Теперь defineProps и defineEmits определены\n\nexport default {\n  __name: 'SimpleWindow',\n  props: {\n    windowId: String,\n    title: {\n      type: String,\n      default: 'Окно'\n    },\n    appName: {\n      type: String,\n      default: 'app'\n    }\n  },\n  emits: ['close', 'minimize', 'focus'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n\n    // ДОБАВЛЯЕМ ИМПОРТ\n    const props = __props;\n    const emit = __emit;\n\n    // Позиция окна\n    const posX = ref(100);\n    const posY = ref(100);\n    const isDragging = ref(false);\n    const dragOffset = ref({\n      x: 0,\n      y: 0\n    });\n\n    // Стиль окна\n    const windowStyle = computed(() => ({\n      left: `${posX.value}px`,\n      top: `${posY.value}px`\n    }));\n\n    // Фокус на окно\n    const focusWindow = e => {\n      emit('focus', props.windowId);\n\n      // Начинаем перетаскивание, если кликнули на заголовок\n      if (e.target.closest('.window-header')) {\n        startDrag(e);\n      }\n    };\n\n    // Начало перетаскивания\n    const startDrag = e => {\n      isDragging.value = true;\n      dragOffset.value = {\n        x: e.clientX - posX.value,\n        y: e.clientY - posY.value\n      };\n      document.addEventListener('mousemove', onDrag);\n      document.addEventListener('mouseup', stopDrag);\n    };\n\n    // Перетаскивание\n    const onDrag = e => {\n      if (!isDragging.value) return;\n      posX.value = e.clientX - dragOffset.value.x;\n      posY.value = e.clientY - dragOffset.value.y;\n\n      // Ограничиваем перемещение в пределах экрана\n      const maxX = window.innerWidth - 300;\n      const maxY = window.innerHeight - 200;\n      posX.value = Math.max(0, Math.min(posX.value, maxX));\n      posY.value = Math.max(0, Math.min(posY.value, maxY));\n    };\n\n    // Остановка перетаскивания\n    const stopDrag = () => {\n      isDragging.value = false;\n      document.removeEventListener('mousemove', onDrag);\n      document.removeEventListener('mouseup', stopDrag);\n    };\n\n    // Действия с окном\n    const minimize = () => {\n      emit('minimize', props.windowId);\n    };\n    const maximize = () => {\n      console.log('Максимизировать окно', props.windowId);\n    };\n    const close = () => {\n      emit('close', props.windowId);\n    };\n    const __returned__ = {\n      props,\n      emit,\n      posX,\n      posY,\n      isDragging,\n      dragOffset,\n      windowStyle,\n      focusWindow,\n      startDrag,\n      onDrag,\n      stopDrag,\n      minimize,\n      maximize,\n      close,\n      computed,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","props","__props","emit","__emit","posX","posY","isDragging","dragOffset","x","y","windowStyle","left","value","top","focusWindow","e","windowId","target","closest","startDrag","clientX","clientY","document","addEventListener","onDrag","stopDrag","maxX","window","innerWidth","maxY","innerHeight","Math","max","min","removeEventListener","minimize","maximize","console","log","close"],"sources":["/home/kup/my_projects/vue/osi/src/components/os/SimpleWindow/SimpleWindow.vue"],"sourcesContent":["<template src=\"./template.html\"></template>\n<script setup>\n// ДОБАВЛЯЕМ ИМПОРТ\nimport { defineProps, defineEmits, computed, ref } from 'vue'\n\n// Теперь defineProps и defineEmits определены\nconst props = defineProps({\n  windowId: String,\n  title: {\n    type: String,\n    default: 'Окно'\n  },\n  appName: {\n    type: String,\n    default: 'app'\n  }\n})\n\nconst emit = defineEmits(['close', 'minimize', 'focus'])\n\n// Позиция окна\nconst posX = ref(100)\nconst posY = ref(100)\nconst isDragging = ref(false)\nconst dragOffset = ref({ x: 0, y: 0 })\n\n// Стиль окна\nconst windowStyle = computed(() => ({\n  left: `${posX.value}px`,\n  top: `${posY.value}px`\n}))\n\n// Фокус на окно\nconst focusWindow = (e) => {\n  emit('focus', props.windowId)\n  \n  // Начинаем перетаскивание, если кликнули на заголовок\n  if (e.target.closest('.window-header')) {\n    startDrag(e)\n  }\n}\n\n// Начало перетаскивания\nconst startDrag = (e) => {\n  isDragging.value = true\n  dragOffset.value = {\n    x: e.clientX - posX.value,\n    y: e.clientY - posY.value\n  }\n  \n  document.addEventListener('mousemove', onDrag)\n  document.addEventListener('mouseup', stopDrag)\n}\n\n// Перетаскивание\nconst onDrag = (e) => {\n  if (!isDragging.value) return\n  \n  posX.value = e.clientX - dragOffset.value.x\n  posY.value = e.clientY - dragOffset.value.y\n  \n  // Ограничиваем перемещение в пределах экрана\n  const maxX = window.innerWidth - 300\n  const maxY = window.innerHeight - 200\n  \n  posX.value = Math.max(0, Math.min(posX.value, maxX))\n  posY.value = Math.max(0, Math.min(posY.value, maxY))\n}\n\n// Остановка перетаскивания\nconst stopDrag = () => {\n  isDragging.value = false\n  document.removeEventListener('mousemove', onDrag)\n  document.removeEventListener('mouseup', stopDrag)\n}\n\n// Действия с окном\nconst minimize = () => {\n  emit('minimize', props.windowId)\n}\n\nconst maximize = () => {\n  console.log('Максимизировать окно', props.windowId)\n}\n\nconst close = () => {\n  emit('close', props.windowId)\n}\n</script>\n\n<style src=\"./style.css\"></style>"],"mappings":"AAGA,SAAmCA,QAAQ,EAAEC,GAAG,QAAQ,KAAI;;AAE5D;;;;;;;;;;;;;;;;;;;;;;IAHA;IAIA,MAAMC,KAAK,GAAGC,OAAA;IAYd,MAAMC,IAAI,GAAGC,MAAA;;IAEb;IACA,MAAMC,IAAI,GAAGL,GAAG,CAAC,GAAG;IACpB,MAAMM,IAAI,GAAGN,GAAG,CAAC,GAAG;IACpB,MAAMO,UAAU,GAAGP,GAAG,CAAC,KAAK;IAC5B,MAAMQ,UAAU,GAAGR,GAAG,CAAC;MAAES,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;;IAErC;IACA,MAAMC,WAAW,GAAGZ,QAAQ,CAAC,OAAO;MAClCa,IAAI,EAAE,GAAGP,IAAI,CAACQ,KAAK,IAAI;MACvBC,GAAG,EAAE,GAAGR,IAAI,CAACO,KAAK;IACpB,CAAC,CAAC;;IAEF;IACA,MAAME,WAAW,GAAIC,CAAC,IAAK;MACzBb,IAAI,CAAC,OAAO,EAAEF,KAAK,CAACgB,QAAQ;;MAE5B;MACA,IAAID,CAAC,CAACE,MAAM,CAACC,OAAO,CAAC,gBAAgB,CAAC,EAAE;QACtCC,SAAS,CAACJ,CAAC;MACb;IACF;;IAEA;IACA,MAAMI,SAAS,GAAIJ,CAAC,IAAK;MACvBT,UAAU,CAACM,KAAK,GAAG,IAAG;MACtBL,UAAU,CAACK,KAAK,GAAG;QACjBJ,CAAC,EAAEO,CAAC,CAACK,OAAO,GAAGhB,IAAI,CAACQ,KAAK;QACzBH,CAAC,EAAEM,CAAC,CAACM,OAAO,GAAGhB,IAAI,CAACO;MACtB;MAEAU,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEC,MAAM;MAC7CF,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEE,QAAQ;IAC/C;;IAEA;IACA,MAAMD,MAAM,GAAIT,CAAC,IAAK;MACpB,IAAI,CAACT,UAAU,CAACM,KAAK,EAAE;MAEvBR,IAAI,CAACQ,KAAK,GAAGG,CAAC,CAACK,OAAO,GAAGb,UAAU,CAACK,KAAK,CAACJ,CAAA;MAC1CH,IAAI,CAACO,KAAK,GAAGG,CAAC,CAACM,OAAO,GAAGd,UAAU,CAACK,KAAK,CAACH,CAAA;;MAE1C;MACA,MAAMiB,IAAI,GAAGC,MAAM,CAACC,UAAU,GAAG,GAAE;MACnC,MAAMC,IAAI,GAAGF,MAAM,CAACG,WAAW,GAAG,GAAE;MAEpC1B,IAAI,CAACQ,KAAK,GAAGmB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC7B,IAAI,CAACQ,KAAK,EAAEc,IAAI,CAAC;MACnDrB,IAAI,CAACO,KAAK,GAAGmB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC5B,IAAI,CAACO,KAAK,EAAEiB,IAAI,CAAC;IACrD;;IAEA;IACA,MAAMJ,QAAQ,GAAGA,CAAA,KAAM;MACrBnB,UAAU,CAACM,KAAK,GAAG,KAAI;MACvBU,QAAQ,CAACY,mBAAmB,CAAC,WAAW,EAAEV,MAAM;MAChDF,QAAQ,CAACY,mBAAmB,CAAC,SAAS,EAAET,QAAQ;IAClD;;IAEA;IACA,MAAMU,QAAQ,GAAGA,CAAA,KAAM;MACrBjC,IAAI,CAAC,UAAU,EAAEF,KAAK,CAACgB,QAAQ;IACjC;IAEA,MAAMoB,QAAQ,GAAGA,CAAA,KAAM;MACrBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEtC,KAAK,CAACgB,QAAQ;IACpD;IAEA,MAAMuB,KAAK,GAAGA,CAAA,KAAM;MAClBrC,IAAI,CAAC,OAAO,EAAEF,KAAK,CAACgB,QAAQ;IAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}