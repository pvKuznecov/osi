{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\nimport TaskBar from './components/os/TaskBar/TaskBar.vue';\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\nimport { useOsStore } from './stores/os.store';\nimport { useAppsStore } from './stores/apps.store';\nimport { usersTable, IDBWindows, activeWindowId } from './idb/db';\nexport default {\n  name: 'App',\n  components: {\n    AutorizationArea,\n    DesktopArea,\n    TaskBar,\n    SimpleWindow\n  },\n  data() {\n    return {\n      isAutorized: false,\n      USERID: null,\n      USER: {}\n    };\n  },\n  watch: {\n    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è IDBWindows\n    IDBWindows: {\n      handler(newVal) {\n        console.log('IDBWindows changed:', newVal?.map(w => ({\n          id: w.id,\n          zIndex: w.zIndex,\n          isMinimized: w.isMinimized\n        })));\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  computed: {\n    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–∫–Ω–∞ –ø–æ zIndex –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n    sortedWindows() {\n      if (!this.IDBWindows) return [];\n\n      // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–≤–µ—Ä–Ω—É—Ç—ã–µ –æ–∫–Ω–∞ - –æ–Ω–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ\n      const visibleWindows = this.IDBWindows.filter(w => !w.isMinimized);\n\n      // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ zIndex (–æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É)\n      return [...visibleWindows].sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0));\n    },\n    IDBWindows() {\n      return IDBWindows.value;\n    },\n    osStore() {\n      return useOsStore();\n    },\n    appsStore() {\n      return useAppsStore();\n    }\n  },\n  methods: {\n    isActiveElem(windowId) {\n      return windowId === activeWindowId.value;\n    },\n    async closeWindow(windowId) {\n      console.log('closeWindow called:', windowId);\n      if (this.USERID && usersTable) {\n        try {\n          await usersTable.windows.close(this.USERID, windowId);\n          await usersTable.windows.reupdate(this.USERID);\n        } catch (error) {\n          console.error('Error closing window:', error);\n        }\n      }\n      if (this.appsStore) {\n        this.appsStore.deleteWindowState(windowId);\n      }\n    },\n    async minimizeWindow(windowId) {\n      console.log('minimizeWindow called:', windowId);\n      if (this.USERID && usersTable) {\n        try {\n          await usersTable.windows.minimize(this.USERID, windowId);\n          await usersTable.windows.reupdate(this.USERID);\n          console.log('Window minimized successfully');\n        } catch (error) {\n          console.error('Error minimizing window:', error);\n        }\n      }\n    },\n    async toggleMaximizeWindow(windowId) {\n      console.log('toggleMaximizeWindow called:', windowId);\n      if (this.USERID && usersTable) {\n        try {\n          // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫–Ω–∞\n          const windows = IDBWindows.value || [];\n          const window = windows.find(w => w.id === windowId);\n          if (window) {\n            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏\n            window.isMaximized = !window.isMaximized;\n\n            // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n            const user = await usersTable.getbyId(this.USERID);\n            const updatedWindows = windows.map(w => w.id === windowId ? window : w);\n            await usersTable.save({\n              ...user,\n              systemconfig: {\n                ...user.systemconfig,\n                windows: updatedWindows\n              }\n            });\n            await usersTable.windows.reupdate(this.USERID);\n          }\n        } catch (error) {\n          console.error('Error toggling maximize window:', error);\n        }\n      }\n    },\n    async activateWindow(windowId) {\n      console.log('üéØ App.activateWindow called with:', windowId);\n      console.log('Current USERID:', this.USERID);\n      if (this.USERID && usersTable) {\n        try {\n          // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫–Ω–æ (–æ–±–Ω–æ–≤–ª—è–µ—Ç zIndex –∏ —Å–Ω–∏–º–∞–µ—Ç —Å–≤–µ—Ä–Ω—É—Ç–æ—Å—Ç—å)\n          await usersTable.windows.activate(this.USERID, windowId);\n\n          // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n          await usersTable.windows.reupdate(this.USERID);\n          console.log('Window activated successfully');\n        } catch (error) {\n          console.error('Error activating window:', error);\n        }\n      } else {\n        console.log('Cannot activate: USERID or usersTable missing');\n      }\n    },\n    async selectUser(userId) {\n      console.log('selectUser called:', userId);\n      this.USERID = userId;\n      if (usersTable) {\n        try {\n          // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n          this.USER = await usersTable.getbyId(userId);\n          // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n          await usersTable.windows.reupdate(userId);\n        } catch (error) {\n          console.error('Error loading user data:', error);\n        }\n      }\n      this.isAutorized = true;\n    },\n    // –ú–µ—Ç–æ–¥ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ–∫–Ω–∞ –∏–∑ —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n    async restoreWindow(windowId) {\n      console.log('restoreWindow called:', windowId);\n      if (this.USERID && usersTable) {\n        try {\n          // –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –º–µ—Ç–æ–¥ restore –≤ usersTable.windows\n          if (usersTable.windows.restore) {\n            await usersTable.windows.restore(this.USERID, windowId);\n          } else {\n            // –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º activate –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è\n            await usersTable.windows.activate(this.USERID, windowId);\n          }\n          await usersTable.windows.reupdate(this.USERID);\n        } catch (error) {\n          console.error('Error restoring window:', error);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["AutorizationArea","DesktopArea","TaskBar","SimpleWindow","useOsStore","useAppsStore","usersTable","IDBWindows","activeWindowId","name","components","data","isAutorized","USERID","USER","watch","handler","newVal","console","log","map","w","id","zIndex","isMinimized","deep","immediate","computed","sortedWindows","visibleWindows","filter","sort","a","b","value","osStore","appsStore","methods","isActiveElem","windowId","closeWindow","windows","close","reupdate","error","deleteWindowState","minimizeWindow","minimize","toggleMaximizeWindow","window","find","isMaximized","user","getbyId","updatedWindows","save","systemconfig","activateWindow","activate","selectUser","userId","restoreWindow","restore"],"sources":["/home/kup/my_projects/vue/osi/src/App.vue"],"sourcesContent":["<template>\n    <AutorizationArea v-if=\"!isAutorized\" @selectUser=\"selectUser\" />\n    <div v-if=\"isAutorized\" class=\"webos\">\n        <DesktopArea :USERID=\"USERID\">\n            <SimpleWindow \n                v-for=\"window in sortedWindows\"\n                :key=\"window.id\"\n                :windowId=\"window.id\"\n                :title=\"window.label\"\n                :appName=\"window.name\"\n                :contentApp=\"window.contentApp\"\n                :icon=\"window.icon\"\n                :iconclass=\"window.iconclass\"\n                :defWidth=\"window.defWidth\"\n                :defHeight=\"window.defHeight\"\n                :isMinimized=\"window.isMinimized\"\n                :isActive=\"isActiveElem(window.id)\"\n                :isMaximized=\"window.isMaximized\"\n                :zIndex=\"window.zIndex\"\n                :resizable=\"window.resizable\"\n                :canMinimize=\"window.canMinimize\"\n                :USERID=\"USERID\"\n                @close=\"closeWindow\"\n                @minimize=\"minimizeWindow\"\n                @toggleMaximize=\"toggleMaximizeWindow\"\n                @focus=\"activateWindow\"\n            />\n        </DesktopArea>\n        <TaskBar :USERID=\"USERID\" />\n    </div>\n</template>\n\n<style src=\"./styles/global.css\"></style>\n\n<script>\nimport AutorizationArea from './components/os/AutorizationArea/AutorizationArea.vue';\nimport DesktopArea from './components/os/DesktopArea/DesktopArea.vue';\nimport TaskBar from './components/os/TaskBar/TaskBar.vue';\nimport SimpleWindow from './components/os/SimpleWindow/SimpleWindow.vue';\nimport { useOsStore } from './stores/os.store';\nimport { useAppsStore } from './stores/apps.store';\nimport { usersTable, IDBWindows, activeWindowId } from './idb/db';\n\nexport default {\n    name: 'App',\n\n    components: {\n        AutorizationArea,\n        DesktopArea,\n        TaskBar,\n        SimpleWindow\n    },\n\n    data() {\n        return {\n            isAutorized: false,\n            USERID: null,\n            USER: {},\n        }\n    },\n\n    watch: {\n        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è IDBWindows\n        IDBWindows: {\n            handler(newVal) {\n                console.log('IDBWindows changed:', newVal?.map(w => ({id: w.id, zIndex: w.zIndex, isMinimized: w.isMinimized})));\n            },\n            deep: true,\n            immediate: true\n        }\n    },\n\n    computed: {\n        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–∫–Ω–∞ –ø–æ zIndex –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n        sortedWindows() {\n            if (!this.IDBWindows) return [];\n            \n            // –§–∏–ª—å—Ç—Ä—É–µ–º —Å–≤–µ—Ä–Ω—É—Ç—ã–µ –æ–∫–Ω–∞ - –æ–Ω–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ\n            const visibleWindows = this.IDBWindows.filter(w => !w.isMinimized);\n            \n            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ zIndex (–æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É)\n            return [...visibleWindows].sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0));\n        },\n\n        IDBWindows() { \n            return IDBWindows.value; \n        },\n        \n        osStore() { \n            return useOsStore(); \n        },\n        \n        appsStore() { \n            return useAppsStore(); \n        },\n    },\n\n    methods: {\n        isActiveElem(windowId) {\n            return windowId === activeWindowId.value;\n        },\n\n        async closeWindow(windowId) {\n            console.log('closeWindow called:', windowId);\n            \n            if (this.USERID && usersTable) {\n                try {\n                    await usersTable.windows.close(this.USERID, windowId);\n                    await usersTable.windows.reupdate(this.USERID);\n                } catch (error) {\n                    console.error('Error closing window:', error);\n                }\n            }\n\n            if (this.appsStore) {\n                this.appsStore.deleteWindowState(windowId);\n            }\n        },\n    \n        async minimizeWindow(windowId) {\n            console.log('minimizeWindow called:', windowId);\n            \n            if (this.USERID && usersTable) {\n                try {\n                    await usersTable.windows.minimize(this.USERID, windowId);\n                    await usersTable.windows.reupdate(this.USERID);\n                    \n                    console.log('Window minimized successfully');\n                } catch (error) {\n                    console.error('Error minimizing window:', error);\n                }\n            }\n        },\n    \n        async toggleMaximizeWindow(windowId) {\n            console.log('toggleMaximizeWindow called:', windowId);\n            \n            if (this.USERID && usersTable) {\n                try {\n                    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫–Ω–∞\n                    const windows = IDBWindows.value || [];\n                    const window = windows.find(w => w.id === windowId);\n                    \n                    if (window) {\n                        // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏\n                        window.isMaximized = !window.isMaximized;\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ë–î\n                        const user = await usersTable.getbyId(this.USERID);\n                        const updatedWindows = windows.map(w => \n                            w.id === windowId ? window : w\n                        );\n                        \n                        await usersTable.save({\n                            ...user,\n                            systemconfig: {\n                                ...user.systemconfig,\n                                windows: updatedWindows\n                            }\n                        });\n                        \n                        await usersTable.windows.reupdate(this.USERID);\n                    }\n                } catch (error) {\n                    console.error('Error toggling maximize window:', error);\n                }\n            }\n        },\n    \n        async activateWindow(windowId) {\n            console.log('üéØ App.activateWindow called with:', windowId);\n            console.log('Current USERID:', this.USERID);\n            \n            if (this.USERID && usersTable) { \n                try {\n                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –æ–∫–Ω–æ (–æ–±–Ω–æ–≤–ª—è–µ—Ç zIndex –∏ —Å–Ω–∏–º–∞–µ—Ç —Å–≤–µ—Ä–Ω—É—Ç–æ—Å—Ç—å)\n                    await usersTable.windows.activate(this.USERID, windowId);\n                    \n                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n                    await usersTable.windows.reupdate(this.USERID);\n                    \n                    console.log('Window activated successfully');\n                } catch (error) {\n                    console.error('Error activating window:', error);\n                }\n            } else {\n                console.log('Cannot activate: USERID or usersTable missing');\n            }\n        },\n\n        async selectUser(userId) {\n            console.log('selectUser called:', userId);\n            this.USERID = userId;\n\n            if (usersTable) {\n                try {\n                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n                    this.USER = await usersTable.getbyId(userId);\n                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ–∫–æ–Ω\n                    await usersTable.windows.reupdate(userId);\n                } catch (error) {\n                    console.error('Error loading user data:', error);\n                }\n            }\n            \n            this.isAutorized = true;\n        },\n\n        // –ú–µ—Ç–æ–¥ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ–∫–Ω–∞ –∏–∑ —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n        async restoreWindow(windowId) {\n            console.log('restoreWindow called:', windowId);\n            \n            if (this.USERID && usersTable) {\n                try {\n                    // –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –º–µ—Ç–æ–¥ restore –≤ usersTable.windows\n                    if (usersTable.windows.restore) {\n                        await usersTable.windows.restore(this.USERID, windowId);\n                    } else {\n                        // –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º activate –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è\n                        await usersTable.windows.activate(this.USERID, windowId);\n                    }\n                    await usersTable.windows.reupdate(this.USERID);\n                } catch (error) {\n                    console.error('Error restoring window:', error);\n                }\n            }\n        }\n    },\n}\n</script>\n\n<style>\n.webos {\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n    position: relative;\n    background: #1a1a1a;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}