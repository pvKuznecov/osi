{"ast":null,"code":"import * as Token from 'token-types';\nexport class BitReader {\n  constructor(tokenizer) {\n    this.pos = 0;\n    this.dword = null;\n    this.tokenizer = tokenizer;\n  }\n  /**\r\n   *\r\n   * @param bits 1..30 bits\r\n   */\n  async read(bits) {\n    while (this.dword === null) {\n      this.dword = await this.tokenizer.readToken(Token.UINT32_LE);\n    }\n    let out = this.dword;\n    this.pos += bits;\n    if (this.pos < 32) {\n      out >>>= 32 - this.pos;\n      return out & (1 << bits) - 1;\n    }\n    this.pos -= 32;\n    if (this.pos === 0) {\n      this.dword = null;\n      return out & (1 << bits) - 1;\n    }\n    this.dword = await this.tokenizer.readToken(Token.UINT32_LE);\n    if (this.pos) {\n      out <<= this.pos;\n      out |= this.dword >>> 32 - this.pos;\n    }\n    return out & (1 << bits) - 1;\n  }\n  async ignore(bits) {\n    if (this.pos > 0) {\n      const remaining = 32 - this.pos;\n      this.dword = null;\n      bits -= remaining;\n      this.pos = 0;\n    }\n    const remainder = bits % 32;\n    const numOfWords = (bits - remainder) / 32;\n    await this.tokenizer.ignore(numOfWords * 4);\n    return this.read(remainder);\n  }\n}","map":{"version":3,"names":["Token","BitReader","constructor","tokenizer","pos","dword","read","bits","readToken","UINT32_LE","out","ignore","remaining","remainder","numOfWords"],"sources":["C:/projects/My projects/Vue/osi/node_modules/music-metadata/lib/musepack/sv7/BitReader.js"],"sourcesContent":["import * as Token from 'token-types';\r\nexport class BitReader {\r\n    constructor(tokenizer) {\r\n        this.pos = 0;\r\n        this.dword = null;\r\n        this.tokenizer = tokenizer;\r\n    }\r\n    /**\r\n     *\r\n     * @param bits 1..30 bits\r\n     */\r\n    async read(bits) {\r\n        while (this.dword === null) {\r\n            this.dword = await this.tokenizer.readToken(Token.UINT32_LE);\r\n        }\r\n        let out = this.dword;\r\n        this.pos += bits;\r\n        if (this.pos < 32) {\r\n            out >>>= (32 - this.pos);\r\n            return out & ((1 << bits) - 1);\r\n        }\r\n        this.pos -= 32;\r\n        if (this.pos === 0) {\r\n            this.dword = null;\r\n            return out & ((1 << bits) - 1);\r\n        }\r\n        this.dword = await this.tokenizer.readToken(Token.UINT32_LE);\r\n        if (this.pos) {\r\n            out <<= this.pos;\r\n            out |= this.dword >>> (32 - this.pos);\r\n        }\r\n        return out & ((1 << bits) - 1);\r\n    }\r\n    async ignore(bits) {\r\n        if (this.pos > 0) {\r\n            const remaining = 32 - this.pos;\r\n            this.dword = null;\r\n            bits -= remaining;\r\n            this.pos = 0;\r\n        }\r\n        const remainder = bits % 32;\r\n        const numOfWords = (bits - remainder) / 32;\r\n        await this.tokenizer.ignore(numOfWords * 4);\r\n        return this.read(remainder);\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,aAAa;AACpC,OAAO,MAAMC,SAAS,CAAC;EACnBC,WAAWA,CAACC,SAAS,EAAE;IACnB,IAAI,CAACC,GAAG,GAAG,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACF,SAAS,GAAGA,SAAS;EAC9B;EACA;AACJ;AACA;AACA;EACI,MAAMG,IAAIA,CAACC,IAAI,EAAE;IACb,OAAO,IAAI,CAACF,KAAK,KAAK,IAAI,EAAE;MACxB,IAAI,CAACA,KAAK,GAAG,MAAM,IAAI,CAACF,SAAS,CAACK,SAAS,CAACR,KAAK,CAACS,SAAS,CAAC;IAChE;IACA,IAAIC,GAAG,GAAG,IAAI,CAACL,KAAK;IACpB,IAAI,CAACD,GAAG,IAAIG,IAAI;IAChB,IAAI,IAAI,CAACH,GAAG,GAAG,EAAE,EAAE;MACfM,GAAG,MAAO,EAAE,GAAG,IAAI,CAACN,GAAI;MACxB,OAAOM,GAAG,GAAI,CAAC,CAAC,IAAIH,IAAI,IAAI,CAAE;IAClC;IACA,IAAI,CAACH,GAAG,IAAI,EAAE;IACd,IAAI,IAAI,CAACA,GAAG,KAAK,CAAC,EAAE;MAChB,IAAI,CAACC,KAAK,GAAG,IAAI;MACjB,OAAOK,GAAG,GAAI,CAAC,CAAC,IAAIH,IAAI,IAAI,CAAE;IAClC;IACA,IAAI,CAACF,KAAK,GAAG,MAAM,IAAI,CAACF,SAAS,CAACK,SAAS,CAACR,KAAK,CAACS,SAAS,CAAC;IAC5D,IAAI,IAAI,CAACL,GAAG,EAAE;MACVM,GAAG,KAAK,IAAI,CAACN,GAAG;MAChBM,GAAG,IAAI,IAAI,CAACL,KAAK,KAAM,EAAE,GAAG,IAAI,CAACD,GAAI;IACzC;IACA,OAAOM,GAAG,GAAI,CAAC,CAAC,IAAIH,IAAI,IAAI,CAAE;EAClC;EACA,MAAMI,MAAMA,CAACJ,IAAI,EAAE;IACf,IAAI,IAAI,CAACH,GAAG,GAAG,CAAC,EAAE;MACd,MAAMQ,SAAS,GAAG,EAAE,GAAG,IAAI,CAACR,GAAG;MAC/B,IAAI,CAACC,KAAK,GAAG,IAAI;MACjBE,IAAI,IAAIK,SAAS;MACjB,IAAI,CAACR,GAAG,GAAG,CAAC;IAChB;IACA,MAAMS,SAAS,GAAGN,IAAI,GAAG,EAAE;IAC3B,MAAMO,UAAU,GAAG,CAACP,IAAI,GAAGM,SAAS,IAAI,EAAE;IAC1C,MAAM,IAAI,CAACV,SAAS,CAACQ,MAAM,CAACG,UAAU,GAAG,CAAC,CAAC;IAC3C,OAAO,IAAI,CAACR,IAAI,CAACO,SAAS,CAAC;EAC/B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}