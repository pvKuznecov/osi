{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport * as Token from 'token-types';\nimport { AttachedPictureType } from '../../id3v2/ID3v2Token.js';\n/**\n * Parse the METADATA_BLOCK_PICTURE\n * Ref: https://wiki.xiph.org/VorbisComment#METADATA_BLOCK_PICTURE\n * Ref: https://xiph.org/flac/format.html#metadata_block_picture\n * // ToDo: move to ID3 / APIC?\n */\nexport class VorbisPictureToken {\n  static fromBase64(base64str) {\n    return VorbisPictureToken.fromBuffer(Uint8Array.from(atob(base64str), c => c.charCodeAt(0)));\n  }\n  static fromBuffer(buffer) {\n    const pic = new VorbisPictureToken(buffer.length);\n    return pic.get(buffer, 0);\n  }\n  constructor(len) {\n    this.len = len;\n  }\n  get(buffer, offset) {\n    const type = AttachedPictureType[Token.UINT32_BE.get(buffer, offset)];\n    offset += 4;\n    const mimeLen = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const format = new Token.StringType(mimeLen, 'utf-8').get(buffer, offset);\n    offset += mimeLen;\n    const descLen = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const description = new Token.StringType(descLen, 'utf-8').get(buffer, offset);\n    offset += descLen;\n    const width = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const height = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const colour_depth = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const indexed_color = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const picDataLen = Token.UINT32_BE.get(buffer, offset);\n    offset += 4;\n    const data = buffer.slice(offset, offset + picDataLen);\n    return {\n      type,\n      format,\n      description,\n      width,\n      height,\n      colour_depth,\n      indexed_color,\n      data\n    };\n  }\n}\n/**\n * Comment header decoder\n * Ref: https://xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-620004.2.1\n */\nexport const CommonHeader = {\n  len: 7,\n  get: (buf, off) => {\n    return {\n      packetType: Token.UINT8.get(buf, off),\n      vorbis: new Token.StringType(6, 'ascii').get(buf, off + 1)\n    };\n  }\n};\n/**\n * Identification header decoder\n * Ref: https://xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-630004.2.2\n */\nexport const IdentificationHeader = {\n  len: 23,\n  get: (uint8Array, off) => {\n    return {\n      version: Token.UINT32_LE.get(uint8Array, off + 0),\n      channelMode: Token.UINT8.get(uint8Array, off + 4),\n      sampleRate: Token.UINT32_LE.get(uint8Array, off + 5),\n      bitrateMax: Token.UINT32_LE.get(uint8Array, off + 9),\n      bitrateNominal: Token.UINT32_LE.get(uint8Array, off + 13),\n      bitrateMin: Token.UINT32_LE.get(uint8Array, off + 17)\n    };\n  }\n};","map":{"version":3,"names":["Token","AttachedPictureType","VorbisPictureToken","fromBase64","base64str","fromBuffer","Uint8Array","from","atob","c","charCodeAt","buffer","pic","length","get","constructor","len","offset","type","UINT32_BE","mimeLen","format","StringType","descLen","description","width","height","colour_depth","indexed_color","picDataLen","data","slice","CommonHeader","buf","off","packetType","UINT8","vorbis","IdentificationHeader","uint8Array","version","UINT32_LE","channelMode","sampleRate","bitrateMax","bitrateNominal","bitrateMin"],"sources":["/home/kup/my_projects/vue/osi/node_modules/music-metadata/lib/ogg/vorbis/Vorbis.js"],"sourcesContent":["import * as Token from 'token-types';\nimport { AttachedPictureType } from '../../id3v2/ID3v2Token.js';\n/**\n * Parse the METADATA_BLOCK_PICTURE\n * Ref: https://wiki.xiph.org/VorbisComment#METADATA_BLOCK_PICTURE\n * Ref: https://xiph.org/flac/format.html#metadata_block_picture\n * // ToDo: move to ID3 / APIC?\n */\nexport class VorbisPictureToken {\n    static fromBase64(base64str) {\n        return VorbisPictureToken.fromBuffer(Uint8Array.from(atob(base64str), c => c.charCodeAt(0)));\n    }\n    static fromBuffer(buffer) {\n        const pic = new VorbisPictureToken(buffer.length);\n        return pic.get(buffer, 0);\n    }\n    constructor(len) {\n        this.len = len;\n    }\n    get(buffer, offset) {\n        const type = AttachedPictureType[Token.UINT32_BE.get(buffer, offset)];\n        offset += 4;\n        const mimeLen = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const format = new Token.StringType(mimeLen, 'utf-8').get(buffer, offset);\n        offset += mimeLen;\n        const descLen = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const description = new Token.StringType(descLen, 'utf-8').get(buffer, offset);\n        offset += descLen;\n        const width = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const height = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const colour_depth = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const indexed_color = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const picDataLen = Token.UINT32_BE.get(buffer, offset);\n        offset += 4;\n        const data = buffer.slice(offset, offset + picDataLen);\n        return {\n            type,\n            format,\n            description,\n            width,\n            height,\n            colour_depth,\n            indexed_color,\n            data\n        };\n    }\n}\n/**\n * Comment header decoder\n * Ref: https://xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-620004.2.1\n */\nexport const CommonHeader = {\n    len: 7,\n    get: (buf, off) => {\n        return {\n            packetType: Token.UINT8.get(buf, off),\n            vorbis: new Token.StringType(6, 'ascii').get(buf, off + 1)\n        };\n    }\n};\n/**\n * Identification header decoder\n * Ref: https://xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-630004.2.2\n */\nexport const IdentificationHeader = {\n    len: 23,\n    get: (uint8Array, off) => {\n        return {\n            version: Token.UINT32_LE.get(uint8Array, off + 0),\n            channelMode: Token.UINT8.get(uint8Array, off + 4),\n            sampleRate: Token.UINT32_LE.get(uint8Array, off + 5),\n            bitrateMax: Token.UINT32_LE.get(uint8Array, off + 9),\n            bitrateNominal: Token.UINT32_LE.get(uint8Array, off + 13),\n            bitrateMin: Token.UINT32_LE.get(uint8Array, off + 17)\n        };\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}