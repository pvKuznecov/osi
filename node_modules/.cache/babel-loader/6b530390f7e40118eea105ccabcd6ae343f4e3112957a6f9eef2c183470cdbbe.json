{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.to-array.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport Dexie from \"dexie\";\n\n// конфигураторы БД\nconst db_name = 'OSIDB';\nconst db_version = 1;\n\n// инициализация БД\nconst DB = new Dexie(db_name);\n\n// описание схемы БД\nDB.version(db_version).stores({\n  users: '++id, login, password, apps, data, config, systemСonfig, createdAt, updatedAt',\n  settings: '++id, key, value, updatedAt'\n});\n\n// -=-=-=-=-=-=-Описание классов моделей-=-=-=-=-=-=-\nexport class User {\n  constructor(data = {}) {\n    this.login = data.login || '';\n    this.password = data.password || ''; //ПРОДУМАТЬ РЕАЛЬНУЮ СХЕМУ ЗАЩИТЫ\n    this.apps = data.apps || [];\n    this.data = data.data || {};\n    this.config = data.config || {};\n    this.systemconfig = data.systemconfig || {};\n    this.createdAt = data.createdAt || new Date();\n    this.updatedAt = data.updatedAt || new Date();\n\n    // автоматическое присваение id (вариант для \"совместимости\")\n    if (data.id) {\n      this.id = data.id;\n    }\n  }\n}\nexport class Setting {\n  constructor(key, value) {\n    this.key = key;\n    this.value = value;\n    this.updatedAt = new Date();\n  }\n}\n\n// -=-=-=-=-=-=-Основные операции CRUD-=-=-=-=-=-=-\nexport const usersTable = {\n  // обновление|сохранение учетной записи\n  async save(userData) {\n    try {\n      const NUser = new User(userData);\n      if (NUser.id) {\n        NUser.updatedAt = new Date();\n        await DB.users.update(NUser.id, NUser);\n        return NUser.id;\n      } else {\n        // зачищаем id в NUser (автоматически сгенерирует)\n        delete NUser.id;\n        NUser.createdAt = new Date();\n        NUser.updateAt = new Date();\n        return await DB.users.add(NUser);\n      }\n    } catch (error) {\n      console.error('Error operation (users; save):', error);\n      throw new Error(`Failed to save user: ${error.message}`);\n    }\n  },\n  // поиск учетной записи по id\n  async getbyId(id) {\n    try {\n      return await DB.users.get(id);\n    } catch (error) {\n      console.error('Error operation (users; getbyId):', error);\n      throw error;\n    }\n  },\n  // поиск учетной записи по login\n  async getbyLogin(login) {\n    try {\n      return await DB.users.where('login').equals(login).first();\n    } catch (error) {\n      console.error('Error operation (users; getbyLogin):', error);\n      throw error;\n    }\n  },\n  // получить массив всех учетных записей\n  async getAll() {\n    try {\n      return await DB.users.toArray();\n    } catch (error) {\n      console.error('Error operation (users; getAll):', error);\n      throw error;\n    }\n  },\n  // удалить учетную запись\n  async delete(id) {\n    try {\n      return await DB.users.delete(id);\n    } catch (error) {\n      console.error('Error operation (users; delete):', error);\n      throw error;\n    }\n  },\n  // кол-во учетных записей\n  async count() {\n    try {\n      return await DB.users.count();\n    } catch (error) {\n      console.error('Error operation (users; count):', error);\n      throw error;\n    }\n  },\n  async search(query) {\n    try {\n      return await DB.users.filter(user => user.login.toLowerCase().includes(query.toLowerCase()) || JSON.stringify(user.data).toLowerCase().includes(query.toLowerCase())).toArray();\n    } catch (error) {\n      console.error('Error operation (users; search');\n      throw error;\n    }\n  }\n};\nexport const settingsTable = {\n  // сохранение настройки\n  async save(key, value) {\n    try {\n      const existing = await DB.settings.where('key').equals(key).first();\n      if (existing) {\n        return await DB.settings.update(existing.id, {\n          value: value,\n          updateAt: new Date()\n        });\n      } else {\n        return await DB.settings.add(new Setting(key, value));\n      }\n    } catch (error) {\n      console.error('Error operation (settings; save');\n      throw error;\n    }\n  },\n  // получить настройку\n  async get(key, defaultVal = null) {\n    try {\n      const findSetting = DB.settings.where('key').equals(key).first();\n      return findSetting ? findSetting.value : defaultVal;\n    } catch (error) {\n      console.error('Error operation (settings; get');\n      throw error;\n    }\n  },\n  // удалить настройку\n  async delete(key) {\n    try {\n      const findSetting = await DB.settings.where('key').equals(key).first();\n      if (findSetting) {\n        return await DB.settings.delete(findSetting.id);\n      }\n    } catch (error) {\n      console.error('Error operation (settings; delete');\n      throw error;\n    }\n  },\n  // получить все настройки\n  async getAll() {\n    try {\n      return await DB.settings.toArray();\n    } catch (error) {\n      console.error('Error operation (settings; getAll');\n      throw error;\n    }\n  }\n};\n\n// -=-=-=-=-=-=-Служебное-=-=-=-=-=-=-\n\n// инициализация БД с тестовыми данными\nexport async function initDatabase() {\n  try {\n    // проверка, пустая ли база\n    const userCount = await usersTable.count();\n    if (userCount === 0) {\n      // создание базового пользователя\n      const defaultUser = new User({\n        login: 'user',\n        password: '',\n        apps: [],\n        data: {},\n        config: {},\n        systemconfig: {}\n      });\n      await usersTable.save(defaultUser);\n      console.log('Default user created.');\n    }\n\n    // инициализация базовых настроек \n    const defaultSettings = [['theme', 'dark']];\n    for (const [key, value] of defaultSettings) {\n      const existing = await settingsTable.get(key);\n      if (existing === null) {\n        await settingsTable.set(key, value);\n      }\n    }\n    console.log('Database initialized successfully');\n  } catch (error) {\n    console.error('Error initializing DB:', error);\n    throw error;\n  }\n}\n\n/**\r\n * Очистка базы данных (осторожно!)\r\n */\nexport async function clearDatabase() {\n  try {\n    await Promise.all([DB.users.clear(), DB.settings.clear()]);\n    console.log('Database cleared');\n  } catch (error) {\n    console.error('Error clearing database:', error);\n    throw error;\n  }\n}\n\n// ==================== МИГРАЦИИ ====================\n\n// Пример добавления миграции при увеличении версии\n// DB.version(2).stores({\n//     users: '++id, login, password, apps, data, config, systemConfig, createdAt, updatedAt, lastLogin',\n//     settings: '++id, key, value, updatedAt',\n//     sessions: '++id, userId, token, expiresAt, createdAt' // Новая таблица\n// }).upgrade(async (tx) => {\n//     // Добавляем поле lastLogin к существующим пользователям\n//     const users = await tx.users.toArray();\n//     await Promise.all(\n//         users.map(user => \n//             tx.users.update(user.id, { \n//                 lastLogin: null,\n//                 updatedAt: new Date() \n//             })\n//         )\n//     );\n\n//     console.log('Migration to version 2 completed');\n// });\n\nexport { DB };\nexport default {\n  DB,\n  User,\n  usersTable,\n  settingsTable,\n  initDatabase,\n  clearDatabase\n};","map":{"version":3,"names":["Dexie","db_name","db_version","DB","version","stores","users","settings","User","constructor","data","login","password","apps","config","systemconfig","createdAt","Date","updatedAt","id","Setting","key","value","usersTable","save","userData","NUser","update","updateAt","add","error","console","Error","message","getbyId","get","getbyLogin","where","equals","first","getAll","toArray","delete","count","search","query","filter","user","toLowerCase","includes","JSON","stringify","settingsTable","existing","defaultVal","findSetting","initDatabase","userCount","defaultUser","log","defaultSettings","set","clearDatabase","Promise","all","clear"],"sources":["C:/projects/My projects/Vue/osi/src/idb/db.js"],"sourcesContent":["import Dexie from \"dexie\";\r\n\r\n// конфигураторы БД\r\nconst db_name = 'OSIDB';\r\nconst db_version = 1;\r\n\r\n// инициализация БД\r\nconst DB = new Dexie(db_name);\r\n\r\n// описание схемы БД\r\nDB.version(db_version).stores({\r\n    users: '++id, login, password, apps, data, config, systemСonfig, createdAt, updatedAt',\r\n    settings: '++id, key, value, updatedAt',\r\n});\r\n\r\n// -=-=-=-=-=-=-Описание классов моделей-=-=-=-=-=-=-\r\nexport class User {\r\n    constructor(data = {}) {\r\n        this.login = data.login || '';\r\n        this.password = data.password || '';    //ПРОДУМАТЬ РЕАЛЬНУЮ СХЕМУ ЗАЩИТЫ\r\n        this.apps = data.apps || [];\r\n        this.data = data.data || {};\r\n        this.config = data.config || {};\r\n        this.systemconfig = data.systemconfig || {};\r\n        this.createdAt = data.createdAt || new Date();\r\n        this.updatedAt = data.updatedAt || new Date();\r\n\r\n        // автоматическое присваение id (вариант для \"совместимости\")\r\n        if (data.id) {\r\n            this.id = data.id;\r\n        }\r\n    }\r\n}\r\n\r\nexport class Setting {\r\n    constructor(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n        this.updatedAt = new Date();\r\n    }\r\n}\r\n\r\n\r\n// -=-=-=-=-=-=-Основные операции CRUD-=-=-=-=-=-=-\r\nexport const usersTable = {\r\n    // обновление|сохранение учетной записи\r\n    async save(userData) {\r\n        try {\r\n            const NUser = new User(userData);\r\n\r\n            if (NUser.id) {\r\n                NUser.updatedAt = new Date();\r\n                await DB.users.update(NUser.id, NUser);\r\n\r\n                return NUser.id;\r\n            } else {\r\n                // зачищаем id в NUser (автоматически сгенерирует)\r\n                delete NUser.id;\r\n\r\n                NUser.createdAt = new Date();\r\n                NUser.updateAt = new Date();\r\n\r\n                return await DB.users.add(NUser);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error operation (users; save):', error);\r\n            \r\n            throw new Error(`Failed to save user: ${error.message}`);\r\n        }\r\n    },\r\n\r\n    // поиск учетной записи по id\r\n    async getbyId(id) {\r\n        try {\r\n            return await DB.users.get(id);\r\n        } catch (error) {\r\n            console.error('Error operation (users; getbyId):', error);\r\n            \r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // поиск учетной записи по login\r\n    async getbyLogin(login) {\r\n        try {\r\n            return await DB.users.where('login').equals(login).first();\r\n        } catch (error) {\r\n            console.error('Error operation (users; getbyLogin):', error);\r\n            \r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // получить массив всех учетных записей\r\n    async getAll() {\r\n        try {\r\n            return await DB.users.toArray();\r\n        } catch (error) {\r\n            console.error('Error operation (users; getAll):', error);\r\n            \r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // удалить учетную запись\r\n    async delete(id) {\r\n        try {\r\n            return await DB.users.delete(id);\r\n        } catch (error) {\r\n            console.error('Error operation (users; delete):', error);\r\n            \r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // кол-во учетных записей\r\n    async count() {\r\n        try {\r\n            return await DB.users.count();\r\n        } catch (error) {\r\n            console.error('Error operation (users; count):', error);\r\n            \r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async search(query) {\r\n        try {\r\n            return await DB.users.filter(user => user.login.toLowerCase().includes(query.toLowerCase()) || JSON.stringify(user.data).toLowerCase().includes(query.toLowerCase())).toArray();\r\n        } catch (error) {\r\n            console.error('Error operation (users; search');\r\n\r\n            throw error;\r\n        }\r\n    },\r\n};\r\n\r\nexport const settingsTable = {\r\n    // сохранение настройки\r\n    async save(key, value) {\r\n        try {\r\n            const existing = await DB.settings.where('key').equals(key).first();\r\n\r\n            if (existing) {\r\n                return await DB.settings.update(existing.id, {\r\n                    value: value,\r\n                    updateAt: new Date(),\r\n                });\r\n            } else {\r\n                return await DB.settings.add(new Setting(key, value));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error operation (settings; save');\r\n\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // получить настройку\r\n    async get(key, defaultVal = null) {\r\n        try {\r\n            const findSetting = DB.settings.where('key').equals(key).first();\r\n\r\n            return findSetting ? findSetting.value : defaultVal;\r\n        } catch (error) {\r\n            console.error('Error operation (settings; get');\r\n\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // удалить настройку\r\n    async delete(key) {\r\n        try {\r\n            const findSetting = await DB.settings.where('key').equals(key).first();\r\n\r\n            if (findSetting) {\r\n                return await DB.settings.delete(findSetting.id);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error operation (settings; delete');\r\n\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // получить все настройки\r\n    async getAll() {\r\n        try {\r\n            return await DB.settings.toArray();\r\n        } catch (error) {\r\n            console.error('Error operation (settings; getAll');\r\n\r\n            throw error;\r\n        }\r\n    },\r\n};\r\n\r\n\r\n// -=-=-=-=-=-=-Служебное-=-=-=-=-=-=-\r\n\r\n// инициализация БД с тестовыми данными\r\nexport async function initDatabase() {\r\n    try {\r\n        // проверка, пустая ли база\r\n        const userCount = await usersTable.count();\r\n\r\n        if (userCount === 0) {\r\n            // создание базового пользователя\r\n            const defaultUser = new User({\r\n                login: 'user',\r\n                password: '',\r\n                apps: [],\r\n                data: {},\r\n                config: {},\r\n                systemconfig: {},\r\n            });\r\n\r\n            await usersTable.save(defaultUser);\r\n            console.log('Default user created.');\r\n        }\r\n\r\n        // инициализация базовых настроек \r\n        const defaultSettings = [\r\n            ['theme', 'dark'],\r\n        ];\r\n\r\n        for (const [key, value] of defaultSettings) {\r\n            const existing = await settingsTable.get(key);\r\n\r\n            if (existing === null) {\r\n                await settingsTable.set(key, value);\r\n            }\r\n        }\r\n\r\n        console.log('Database initialized successfully');\r\n    } catch (error) {\r\n        console.error('Error initializing DB:', error);\r\n\r\n        throw error;\r\n    }    \r\n}\r\n\r\n/**\r\n * Очистка базы данных (осторожно!)\r\n */\r\nexport async function clearDatabase() {\r\n    try {\r\n        await Promise.all([\r\n            DB.users.clear(),\r\n            DB.settings.clear()\r\n        ]);\r\n        console.log('Database cleared');\r\n    } catch (error) {\r\n        console.error('Error clearing database:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// ==================== МИГРАЦИИ ====================\r\n\r\n// Пример добавления миграции при увеличении версии\r\n// DB.version(2).stores({\r\n//     users: '++id, login, password, apps, data, config, systemConfig, createdAt, updatedAt, lastLogin',\r\n//     settings: '++id, key, value, updatedAt',\r\n//     sessions: '++id, userId, token, expiresAt, createdAt' // Новая таблица\r\n// }).upgrade(async (tx) => {\r\n//     // Добавляем поле lastLogin к существующим пользователям\r\n//     const users = await tx.users.toArray();\r\n//     await Promise.all(\r\n//         users.map(user => \r\n//             tx.users.update(user.id, { \r\n//                 lastLogin: null,\r\n//                 updatedAt: new Date() \r\n//             })\r\n//         )\r\n//     );\r\n    \r\n//     console.log('Migration to version 2 completed');\r\n// });\r\n\r\nexport { DB };\r\n\r\nexport default {\r\n    DB,\r\n    User,\r\n    usersTable,\r\n    settingsTable,\r\n    initDatabase,\r\n    clearDatabase\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}