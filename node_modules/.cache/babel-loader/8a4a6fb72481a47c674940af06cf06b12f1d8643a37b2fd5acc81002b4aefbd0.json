{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport { EndOfStreamError } from './stream/index.js';\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\nexport class BlobTokenizer extends AbstractTokenizer {\n  /**\r\n   * Construct BufferTokenizer\r\n   * @param blob - Uint8Array to tokenize\r\n   * @param options Tokenizer options\r\n   */\n  constructor(blob, options) {\n    super(options);\n    this.blob = blob;\n    this.fileInfo = {\n      ...(options?.fileInfo ?? {}),\n      ...{\n        size: blob.size,\n        mimeType: blob.type\n      }\n    };\n  }\n  /**\r\n   * Read buffer from tokenizer\r\n   * @param uint8Array - Uint8Array to tokenize\r\n   * @param options - Read behaviour options\r\n   * @returns {Promise<number>}\r\n   */\n  async readBuffer(uint8Array, options) {\n    if (options?.position) {\n      this.position = options.position;\n    }\n    const bytesRead = await this.peekBuffer(uint8Array, options);\n    this.position += bytesRead;\n    return bytesRead;\n  }\n  /**\r\n   * Peek (read ahead) buffer from tokenizer\r\n   * @param buffer\r\n   * @param options - Read behaviour options\r\n   * @returns {Promise<number>}\r\n   */\n  async peekBuffer(buffer, options) {\n    const normOptions = this.normalizeOptions(buffer, options);\n    const bytes2read = Math.min(this.blob.size - normOptions.position, normOptions.length);\n    if (!normOptions.mayBeLess && bytes2read < normOptions.length) {\n      throw new EndOfStreamError();\n    }\n    const arrayBuffer = await this.blob.slice(normOptions.position, normOptions.position + bytes2read).arrayBuffer();\n    buffer.set(new Uint8Array(arrayBuffer));\n    return bytes2read;\n  }\n  close() {\n    return super.close();\n  }\n  supportsRandomAccess() {\n    return true;\n  }\n  setPosition(position) {\n    this.position = position;\n  }\n}","map":{"version":3,"names":["EndOfStreamError","AbstractTokenizer","BlobTokenizer","constructor","blob","options","fileInfo","size","mimeType","type","readBuffer","uint8Array","position","bytesRead","peekBuffer","buffer","normOptions","normalizeOptions","bytes2read","Math","min","length","mayBeLess","arrayBuffer","slice","set","Uint8Array","close","supportsRandomAccess","setPosition"],"sources":["C:/projects/My projects/Vue/osi/node_modules/strtok3/lib/BlobTokenizer.js"],"sourcesContent":["import { EndOfStreamError } from './stream/index.js';\r\nimport { AbstractTokenizer } from './AbstractTokenizer.js';\r\nexport class BlobTokenizer extends AbstractTokenizer {\r\n    /**\r\n     * Construct BufferTokenizer\r\n     * @param blob - Uint8Array to tokenize\r\n     * @param options Tokenizer options\r\n     */\r\n    constructor(blob, options) {\r\n        super(options);\r\n        this.blob = blob;\r\n        this.fileInfo = { ...options?.fileInfo ?? {}, ...{ size: blob.size, mimeType: blob.type } };\r\n    }\r\n    /**\r\n     * Read buffer from tokenizer\r\n     * @param uint8Array - Uint8Array to tokenize\r\n     * @param options - Read behaviour options\r\n     * @returns {Promise<number>}\r\n     */\r\n    async readBuffer(uint8Array, options) {\r\n        if (options?.position) {\r\n            this.position = options.position;\r\n        }\r\n        const bytesRead = await this.peekBuffer(uint8Array, options);\r\n        this.position += bytesRead;\r\n        return bytesRead;\r\n    }\r\n    /**\r\n     * Peek (read ahead) buffer from tokenizer\r\n     * @param buffer\r\n     * @param options - Read behaviour options\r\n     * @returns {Promise<number>}\r\n     */\r\n    async peekBuffer(buffer, options) {\r\n        const normOptions = this.normalizeOptions(buffer, options);\r\n        const bytes2read = Math.min(this.blob.size - normOptions.position, normOptions.length);\r\n        if ((!normOptions.mayBeLess) && bytes2read < normOptions.length) {\r\n            throw new EndOfStreamError();\r\n        }\r\n        const arrayBuffer = await this.blob.slice(normOptions.position, normOptions.position + bytes2read).arrayBuffer();\r\n        buffer.set(new Uint8Array(arrayBuffer));\r\n        return bytes2read;\r\n    }\r\n    close() {\r\n        return super.close();\r\n    }\r\n    supportsRandomAccess() {\r\n        return true;\r\n    }\r\n    setPosition(position) {\r\n        this.position = position;\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;AAAA,SAASA,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,OAAO,MAAMC,aAAa,SAASD,iBAAiB,CAAC;EACjD;AACJ;AACA;AACA;AACA;EACIE,WAAWA,CAACC,IAAI,EAAEC,OAAO,EAAE;IACvB,KAAK,CAACA,OAAO,CAAC;IACd,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,QAAQ,GAAG;MAAE,IAAGD,OAAO,EAAEC,QAAQ,IAAI,CAAC,CAAC;MAAE,GAAG;QAAEC,IAAI,EAAEH,IAAI,CAACG,IAAI;QAAEC,QAAQ,EAAEJ,IAAI,CAACK;MAAK;IAAE,CAAC;EAC/F;EACA;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMC,UAAUA,CAACC,UAAU,EAAEN,OAAO,EAAE;IAClC,IAAIA,OAAO,EAAEO,QAAQ,EAAE;MACnB,IAAI,CAACA,QAAQ,GAAGP,OAAO,CAACO,QAAQ;IACpC;IACA,MAAMC,SAAS,GAAG,MAAM,IAAI,CAACC,UAAU,CAACH,UAAU,EAAEN,OAAO,CAAC;IAC5D,IAAI,CAACO,QAAQ,IAAIC,SAAS;IAC1B,OAAOA,SAAS;EACpB;EACA;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMC,UAAUA,CAACC,MAAM,EAAEV,OAAO,EAAE;IAC9B,MAAMW,WAAW,GAAG,IAAI,CAACC,gBAAgB,CAACF,MAAM,EAAEV,OAAO,CAAC;IAC1D,MAAMa,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAChB,IAAI,CAACG,IAAI,GAAGS,WAAW,CAACJ,QAAQ,EAAEI,WAAW,CAACK,MAAM,CAAC;IACtF,IAAK,CAACL,WAAW,CAACM,SAAS,IAAKJ,UAAU,GAAGF,WAAW,CAACK,MAAM,EAAE;MAC7D,MAAM,IAAIrB,gBAAgB,CAAC,CAAC;IAChC;IACA,MAAMuB,WAAW,GAAG,MAAM,IAAI,CAACnB,IAAI,CAACoB,KAAK,CAACR,WAAW,CAACJ,QAAQ,EAAEI,WAAW,CAACJ,QAAQ,GAAGM,UAAU,CAAC,CAACK,WAAW,CAAC,CAAC;IAChHR,MAAM,CAACU,GAAG,CAAC,IAAIC,UAAU,CAACH,WAAW,CAAC,CAAC;IACvC,OAAOL,UAAU;EACrB;EACAS,KAAKA,CAAA,EAAG;IACJ,OAAO,KAAK,CAACA,KAAK,CAAC,CAAC;EACxB;EACAC,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI;EACf;EACAC,WAAWA,CAACjB,QAAQ,EAAE;IAClB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC5B;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}