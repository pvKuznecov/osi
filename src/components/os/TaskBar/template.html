<div v-if="showMenu" class="task-bar-overplace" @click="toggleStartMenu"></div>
<div v-if="showMenu" class="task-bar-menu">
    <div class="task-bar-menu-header d-flex align-items-center">
        <span v-if="USER && USER.config?.avatar" class="account-elem-minavatar" :style="avatarStyle(USER.config.avatar)"></span>
        <span v-if="USER && USER.name">{{USER.name}}</span>
        <span v-if="!USER" class="start-icon bi bi-house-fill"></span>
        <span v-if="!USER" class="start-text">ÐœÐµÐ½ÑŽ</span>
    </div>
    <div v-for="cat in Object.keys(sortByType_appsList)" :key="cat" class="app-cat-area">
        <i class="app-category-name">{{GLangData['cattype_' + cat]}}:</i>
        <div class="task-bar-menu-elem" v-for="app in sortByType_appsList[cat]" :key="app.id">
            <div style="display: inline-block; margin-right: 5px;">
                <div v-if="app.iconclass" class="app-icon" :class="app.iconclass" @click="launchApp_byMenu(app)"></div>
                <div v-else-if="app.icon" class="app-icon" @click="launchApp_byMenu(app)">{{ app.icon }}</div>
                <div v-else class="app-icon" @click="launchApp_byMenu(app)">ðŸ“„</div>
            </div>
            <span @click="launchApp_byMenu(app)">{{app.label}}</span>
        </div>
    </div>
</div>

<div class="task-bar">
    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Menu -->
    <button class="start-button d-flex justify-content-center align-items-center" @click="toggleStartMenu">
        <span class="start-icon bi bi-house-fill"></span>
        <span class="start-text">ÐœÐµÐ½ÑŽ</span>
    </button>    
    
    <!-- ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð² Ñ‚Ð°ÑÐºÐ±Ð°Ñ€Ðµ -->
    <div class="taskbar-apps d-flex align-items-center">
        <button 
            v-for="window in windowsList" 
            :key="window.id"
            class="taskbar-app d-flex justify-content-center align-items-center" :class="getWindowClass(window)"
            :title="(window.isMinimized ? 'Ð¡Ð²ÐµÑ€Ð½ÑƒÑ‚Ð¾: ' : '') + (window.label || window.name)"
            @click="toggleWindow(window.id)"
        >
            <div v-if="window.iconclass" class="app-icon" :class="window.iconclass"></div>
            <div v-else-if="window.icon" class="app-icon">{{ window.icon }}</div>
            <div v-else class="app-icon">ðŸ“„</div>
            <span class="app-title">{{ window.label || window.name }}</span>
            <span v-if="window.isMinimized" class="minimized-indicator">â–¼</span>
        </button>
    </div>

    <!-- ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ -->
    <div>
        <i class="bi bi-grid-3x3-gap-fill appmanager-minico" :title="`Ð—Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹: ${windowsList.length}.`" @click="launchApp(appManager_data)"></i>
    </div>
    
    <!-- Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ñ‚Ñ€ÐµÐ¹ -->
    <div class="system-tray">
        <div class="tray-time d-flex justify-content-center align-items-center">
            {{ currentTime }}<br>
            {{ currentDate }}
        </div>
    </div>
</div>